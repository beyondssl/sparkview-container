var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(K,N,Q){if(K==Array.prototype||K==Object.prototype)return K;K[N]=Q.value;return K};
$jscomp.getGlobal=function(K){K=["object"==typeof globalThis&&globalThis,K,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var N=0;N<K.length;++N){var Q=K[N];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(K,N){var Q=$jscomp.propertyToPolyfillSymbol[N];if(null==Q)return K[N];Q=K[Q];return void 0!==Q?Q:K[N]};$jscomp.polyfill=function(K,N,Q,W){N&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(K,N,Q,W):$jscomp.polyfillUnisolated(K,N,Q,W))};
$jscomp.polyfillUnisolated=function(K,N,Q,W){Q=$jscomp.global;K=K.split(".");for(W=0;W<K.length-1;W++){var T=K[W];if(!(T in Q))return;Q=Q[T]}K=K[K.length-1];W=Q[K];N=N(W);N!=W&&null!=N&&$jscomp.defineProperty(Q,K,{configurable:!0,writable:!0,value:N})};
$jscomp.polyfillIsolated=function(K,N,Q,W){var T=K.split(".");K=1===T.length;W=T[0];W=!K&&W in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var wa=0;wa<T.length-1;wa++){var O=T[wa];if(!(O in W))return;W=W[O]}T=T[T.length-1];Q=$jscomp.IS_SYMBOL_NATIVE&&"es6"===Q?W[T]:null;N=N(Q);null!=N&&(K?$jscomp.defineProperty($jscomp.polyfills,T,{configurable:!0,writable:!0,value:N}):N!==Q&&($jscomp.propertyToPolyfillSymbol[T]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(T):$jscomp.POLYFILL_PREFIX+
T,T=$jscomp.propertyToPolyfillSymbol[T],$jscomp.defineProperty(W,T,{configurable:!0,writable:!0,value:N})))};$jscomp.polyfill("Array.prototype.fill",function(K){return K?K:function(N,Q,W){var T=this.length||0;0>Q&&(Q=Math.max(0,T+Q));if(null==W||W>T)W=T;W=Number(W);0>W&&(W=Math.max(0,T+W));for(Q=Number(Q||0);Q<W;Q++)this[Q]=N;return this}},"es6","es3");$jscomp.typedArrayFill=function(K){return K?K:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
var rdpcodecs=rdpcodecs||new function(){function K(){var aa=new Uint32Array(10240),Y=0,r=new Uint8Array(10240),B=0,A=new Uint8Array(10240),q=0,d=new Uint8Array(10240),x=0,p=new Uint8Array(0),l=0;this.getData=function(){return aa};this.getDataSize=function(){return Y};this.resetData=function(k){aa.length<k&&(aa=new Uint32Array(k));Y=k;return aa};this.resetLumaPlane=function(k){r.length<k&&(r=new Uint8Array(k));B=k;return r};this.getLumaPlanceSize=function(){return B};this.resetOrangeChromaPlane=function(k){A.length<
k&&(A=new Uint8Array(k));q=k;return A};this.getOrangeChromaPlane=function(){return q};this.resetGreenChromaPlane=function(k){d.length<k&&(d=new Uint8Array(k));x=k;return d};this.getGreenChromaPlane=function(){return x};this.resetAlphaPlane=function(k){p.length<k&&(p=new Uint8Array(k));l=k;return p};this.getAlphaPlane=function(){return l}}function N(aa,Y,r){var B=aa,A=r,q=0,d=8,x=Y;this.attach=function(p,l,k){B=p;A=k;q=0;d=8;x=l};this.getBits=function(p){for(var l,k=0;q<A&&0<p;)l=p,l>d&&(l=d),0!=k&&
(k<<=l),k|=B[q+x]>>d-l&(1<<l)-1,d-=l,p-=l,0==d&&(d=8,q++);return k};this.putBits=function(p,l){for(var k;q<A&&0<l;)k=l,k>d&&(k=d),B[q+x]|=(p>>l-k&(1<<k)-1)<<d-k,d-=k,l-=k,0==d&&(d=8,q++)};this.eos=function(){return q>=A};this.left=function(){return q>=A?0:8*(A-q-1)+d};this.getProcessBytes=function(){return 8>d?q+1:q}}function Q(){this.y=this.x=this.CrLen=this.CbLen=this.YLen=this.quantIdxCr=this.quantIdxCb=this.quantIdxY=0;this.data=new Uint32Array(4096)}function W(){function aa(B,A,q,d,x,p,l){q=
B.et;var k=4096,h=B.bitStream,e=1,n=e<<3,w=1,g=w<<3,f=0;for(null==h?h=new N(d,x,p):h.attach(d,x,p);!h.eos()&&0<k;)if(0!=e){for(;!h.eos();){x=h.getBits(1);if(0!=x)break;d=e=1<<e;d>k&&(d=k);0<d&&(La(l,f,f+d,0),f+=d);k-=e;n+=4;80<n&&(n=80);0>n&&(n=0);e=n>>3}d=e=h.getBits(e);d>k&&(d=k);0<d&&(La(l,f,f+d,0),f+=d);k-=e;e=h.getBits(1);d=0;do if(x=h.getBits(1),1==x)d++;else break;while(1);x=h.getBits(w);x|=d<<w;0==d?(g+=-2,80<g&&(g=80),0>g&&(g=0),w=g>>3):1!=d&&(g+=d,80<g&&(g=80),0>g&&(g=0),w=g>>3);d=x+1;0<
k&&(l[f++]=0!=e?-d:d);k--;n+=-6;80<n&&(n=80);0>n&&(n=0);e=n>>3}else{d=0;do if(x=h.getBits(1),1==x)d++;else break;while(1);x=h.getBits(w);x|=d<<w;0==d?(g+=-2,80<g&&(g=80),0>g&&(g=0),w=g>>3):1!=d&&(g+=d,80<g&&(g=80),0>g&&(g=0),w=g>>3);d=x;if(1!=q){p=d;for(x=0;0!=p;)p>>=1,x++;x=h.getBits(x);d-=x;0!=x&&0!=d?(n+=-6,80<n&&(n=80),0>n&&(n=0),e=n>>3):0==x&&0==d&&(n+=6,80<n&&(n=80),0>n&&(n=0),e=n>>3);0<k&&(l[f++]=0!=(x&1)?-1*(x+1>>1):x>>1);k--;0<k&&(l[f++]=0!=(d&1)?-1*(d+1>>1):d>>1);k--}else 0==d?(0<k&&(l[f++]=
0),k--,n+=3):(0<k&&(l[f++]=0!=(d&1)?-1*(d+1>>1):d>>1),k--,n+=-3),80<n&&(n=80),0>n&&(n=0),e=n>>3}q=64;k=4032;for(h=4033;1<q;k++,h++,q--)l[h]+=l[k];r(l,0,4096,5);r(l,0,1024,A[8]-6);r(l,1024,1024,A[7]-6);r(l,2048,1024,A[9]-6);r(l,3072,256,A[5]-6);r(l,3328,256,A[4]-6);r(l,3584,256,A[6]-6);r(l,3840,64,A[2]-6);r(l,3904,64,A[1]-6);r(l,3968,64,A[3]-6);r(l,4032,64,A[0]-6);B=B.dwtBuffer;Y(l,3840,B,8);Y(l,3072,B,16);Y(l,0,B,32)}function Y(B,A,q,d){var x,p;var l=d<<1;var k=A+d*d*3;var h=A;var e=0;var n=A+d*d;
var w=A+d*d*2;var g=d*d*2;for(x=0;x<d;x++){q[e]=B[k]-(B[h]+B[h]+1>>1)<<16>>16;q[g]=B[n]-(B[w]+B[w]+1>>1)<<16>>16;for(p=1;p<d;p++){var f=p<<1;q[e+f]=B[k+p]-(B[h+p-1]+B[h+p]+1>>1)<<16>>16;q[g+f]=B[n+p]-(B[w+p-1]+B[w+p]+1>>1)<<16>>16}for(p=0;p<d-1;p++)f=p<<1,q[e+f+1]=(B[h+p]<<1)+(q[e+f]+q[e+f+2]>>1)<<16>>16,q[g+f+1]=(B[w+p]<<1)+(q[g+f]+q[g+f+2]>>1)<<16>>16;f=p<<1;q[e+f+1]=(B[h+p]<<1)+q[e+f]<<16>>16;q[g+f+1]=(B[w+p]<<1)+q[g+f]<<16>>16;k+=d;h+=d;e+=l;n+=d;w+=d;g+=l}for(f=0;f<l;f++){for(p=0;p<d;p++)x=p<<
1,e=A+x*l+f,g=p*l+f,h=g+d*l,B[e]=q[g]-((0<p?q[h-l]:q[h])+q[h]+1>>1)<<16>>16;for(p=0;p<d;p++)x=p<<1,e=A+x*l+f,g=p*l+f,h=g+d*l,B[e+l]=(q[h]<<1)+(B[e]+B[e+(p<d-1?2*l:0)]>>1)<<16>>16}}function r(B,A,q,d){if(0!=d)for(;0<q;A++,q--)B[A]<<=d}this.decodeRgb=function(B,A,q,d,x,p,l,k,h,e){aa(B,q,x,A.getData(),A.getPosition(),d,B.yrBuffer);A.skipPosition(d);aa(B,q,l,A.getData(),A.getPosition(),p,B.cbgBuffer);A.skipPosition(p);aa(B,q,h,A.getData(),A.getPosition(),k,B.crbBuffer);A.skipPosition(k);A=B.yrBuffer;
q=B.cbgBuffer;d=B.crbBuffer;for(p=0;4096>p;p++)l=A[p],k=q[p],h=d[p],l=l+4096<<16,x=l+91947*h,h=l-22544*k-46792*h,l+=115998*k,x>>=21,h>>=21,l>>=21,A[p]=0>x?0:255<x?255:x,q[p]=0>h?0:255<h?255:h,d[p]=0>l?0:255<l?255:l;A=B.yrBuffer;q=B.cbgBuffer;B=B.crbBuffer;for(d=0;4096>d;d++)e[d]=4278190080|B[d]<<16|q[d]<<8|A[d]}}function T(aa){var Y=[new hi5.graphic.Rectangle],r=[new Q],B=0,A=0;this.resetRects=function(q){if(Y.length<q){var d=Y.length;for(Y.length=q;d<q;d++)Y[d]=new hi5.graphic.Rectangle}B=q;return Y};
this.resetTiles=function(q){var d=0;if(aa){if(r.length<q)for(d=r.length,r.length=q;d<q;d++)r[d]=new Q}else for(;d<q;d++)r[d]=new Q;A=q;return r};this.getRectSize=function(){return B};this.getTileSize=function(){return A};this.getRects=function(){return Y};this.getTiles=function(){return r}}function wa(){this.ctxId=0;this.tileSize=64;this.qt=this.et=this.xft=this.cct=this.flags=0;this.yrBuffer=new Int32Array(4096);this.cbgBuffer=new Int32Array(4096);this.crbBuffer=new Int32Array(4096);this.dwtBuffer=
new Int32Array(4096);var aa=this;this.setProperties=function(Y){aa.flags=Y&7;aa.cct=Y>>3&3;aa.xft=Y>>5&15;aa.et=Y>>9&15};this.bitStream=new N}var O=hi5.Arrays.arraycopy,La=hi5.Arrays.fill;this.flipimage=function(aa,Y,r,B,A,q){q*=B;for(var d=0;d<A;d++)B=Y+(A-d-1)*q,O(aa,B,r,d*q,q)};this.Bitmap=function(aa,Y,r,B,A,q,d,x){this.data=aa;this.left=B;this.top=A;this.width=Y;this.height=r;this.bitsperpixel=q;this.bytesperpixel=Math.floor((q+7)/8);this.raw=d;this.codec=x||0};this.NSCodec=function(){function aa(r,
B,A,q,d){if(0==A)La(q,0,d,255);else if(A<d){var x=d;for(d=0;4<x;){var p=r[B++];5==x?(q[d++]=p,x--):p==r[B]?(B++,255>(r[B]&255)?(A=r[B++]&255,A+=2):(B++,A=(r[B+3]&255)<<24|(r[B+2]&255)<<16|(r[B+1]&255)<<8|r[B]&255,B+=4),La(q,d,d+A,p),d+=A,x-=A):(q[d++]=p,x--)}for(A=0;4>A;A++)q[d++]=r[B++]}else O(r,B,q,0,d)}var Y=new K;this.getData=function(){return Y.getData()};this.getDataSize=function(){return Y.getDataSize()};this.process=function(r,B,A,q){B=r.getLittleEndian32();var d=r.getLittleEndian32(),x=r.getLittleEndian32();
r.skipPosition(4);var p=r.getByte(),l=r.getByte();r.skipPosition(2);var k=r.getData(),h=r.getPosition(),e=Y.resetData(A*q),n=A+(~(A&7)+1&7),w=q+(~(q&1)+1&1);var g=n*w;var f=Y.resetLumaPlane(g),y=Y.resetOrangeChromaPlane(g);g=Y.resetGreenChromaPlane(g);var m=A*q;w=0<l?(n>>1)*(w>>1):m;var u=0<l?w:m;aa(k,h,B,f,0<l?n*q:m);h+=B;aa(k,h,d,y,w);aa(k,h+d,x,g,u);k=0;h=A+(~(A&7)+1&7);var L=p-1;for(n=0;n<q;n++)for(0<l?(m=n*h,w=(n>>1)*(h>>1),u=(n>>1)*(h>>1)):(m=n*A,w=n*A,u=n*A),p=0;p<A;p++){var C=f[m]&255;var v=
(y[w]&255)<<L<<24>>24;var G=g[u]<<L<<24>>24;var J=C+v-G;var D=C+G;C=C-v-G;C=0>C?0:255<C?255:C;D=0>D?0:255<D?255:D;J=0>J?0:255<J?255:J;e[k++]=4278190080|C<<16|D<<8|J;m++;w+=0<l?p%2:1;u+=0<l?p%2:1}r.skipPosition(B+d+x)}};this.RemoteFX=function(aa){var Y=new T(!aa);aa=new W;var r=new wa;this.decode=function(A,q){for(q=A.getPosition()+q;A.getPosition()<q;){var d=A.getLittleEndian16();var x=A.getLittleEndian32();if(0==x)break;x=A.getPosition()-6+x;switch(d){case 52416:d=A;d.getLittleEndian32();d.getLittleEndian16();
break;case 52417:A.skipPosition(4);break;case 52418:d=A;for(var p=d.getByte(),l=0;l<p;l++){var k=d.getByte(),h=d.getLittleEndian16(),e=d.getLittleEndian16();svGlobal.logger.info("Channel, id:"+k+" width:"+h+" height:"+e)}break;case 52419:d=A;d.skipPosition(2);r.ctxId=d.getByte();r.tileSize=d.getLittleEndian16();r.setProperties(d.getLittleEndian16());break;case 52420:A.skipPosition(10);break;case 52421:A.skipPosition(2);break;case 52422:d=A;d.skipPosition(2);d.skipPosition(1);p=d.getLittleEndian16();
l=Y.resetRects(p);for(k=0;k<p;k++)h=l[k],h.x=d.getLittleEndian16(),h.y=d.getLittleEndian16(),h.width=d.getLittleEndian16(),h.height=d.getLittleEndian16();d.skipPosition(4);break;case 52423:d=A;p=r;d.skipPosition(6);l=d.getLittleEndian16();p.cct=l>>>4&3;p.xft=l>>>6&15;p.et=l>>>10&15;p.qt=l>>>14&3;var n=d.getByte();d.skipPosition(1);k=d.getLittleEndian16();d.skipPosition(4);h=Array(10*n);var w=0;for(l=0;l<n;l++)e=d.getByte(),h[w++]=e&15,h[w++]=e>>>4,e=d.getByte(),h[w++]=e&15,h[w++]=e>>>4,e=d.getByte(),
h[w++]=e&15,h[w++]=e>>>4,e=d.getByte(),h[w++]=e&15,h[w++]=e>>>4,e=d.getByte(),h[w++]=e&15,h[w++]=e>>>4;e=Y.resetTiles(k);for(l=0;l<k;l++){n=e[l];w=d;var g=n;w.skipPosition(6);g.quantIdxY=w.getByte();g.quantIdxCb=w.getByte();g.quantIdxCr=w.getByte();g.x=64*w.getLittleEndian16();g.y=64*w.getLittleEndian16();g.YLen=w.getLittleEndian16();g.CbLen=w.getLittleEndian16();g.CrLen=w.getLittleEndian16();B(p,d,h,n.YLen,10*n.quantIdxY,n.CbLen,10*n.quantIdxCb,n.CrLen,10*n.quantIdxCr,n.data)}break;default:svGlobal.logger.warn("unknown blockType 0x%X"+
d)}A.setPosition(x)}return Y};var B=aa.decodeRgb;this.getResult=function(){return Y}};this.RDP8BulkData=function(){function aa(f){for(;l<f;)p<<=8,A<q&&(p+=B[A++]),l+=8;x-=f;l-=f;d=p>>l;p&=(1<<l)-1}function Y(f,y,m){if(!(0>=m)){if(25E5<m){var u=m-25E5;m=25E5;y+=u;n=(n+u)%25E5}25E5>=n+m?(g(f,y,e,n,m),25E5==(n+=m)&&(n=0)):(u=25E5-n,g(f,y,e,n,u),g(f,y+u,e,0,m-u),n=m-u)}}var r=[[1,0,8,0,0],[5,17,5,1,0],[5,18,7,1,32],[5,19,9,1,160],[5,20,10,1,672],[5,21,12,1,1696],[5,24,0,0,0],[5,25,0,0,1],[6,44,14,1,5792],
[6,45,15,1,22176],[6,52,0,0,2],[6,53,0,0,3],[6,54,0,0,255],[7,92,18,1,54944],[7,93,20,1,317088],[7,110,0,0,4],[7,111,0,0,5],[7,112,0,0,6],[7,113,0,0,7],[7,114,0,0,8],[7,115,0,0,9],[7,116,0,0,10],[7,117,0,0,11],[7,118,0,0,58],[7,119,0,0,59],[7,120,0,0,60],[7,121,0,0,61],[7,122,0,0,62],[7,123,0,0,63],[7,124,0,0,64],[7,125,0,0,128],[8,188,20,1,1365664],[8,189,21,1,2414240],[8,252,0,0,12],[8,253,0,0,56],[8,254,0,0,57],[8,255,0,0,102],[9,380,22,1,4511392],[9,381,23,1,8705696],[9,382,24,1,17094304],[0]],
B=[],A=0,q=0,d=0,x=0,p=0,l=0,k=new Uint8Array(65536),h=0,e=new Uint8Array(25E5),n=0,w=new hi5.DataBuffer(k,0,65536);this.resetHistory=function(){n=d=0};this.release=function(){w=e=k=B=k=null};var g=hi5.Arrays.arraycopy;this.decompress=function(f,y,m){if(1>m)return null;var u=f[y++];m--;h=0;if(u&32)for(B=f,A=y,q=y+m-1,x=8*(m-1)-(B[q]&7),p=l=0;x;)for(f=m=y=0;0!=r[f][0];f++){for(;y<r[f][0];)aa(1),m=(m<<1)+d,y++;if(m==r[f][1]){if(0==r[f][3])aa(r[f][2]),f=r[f][4]+d,e[n]=f,25E5==++n&&(n=0),k[h++]=f;else{aa(r[f][2]);
var L=r[f][4]+d;if(0!=L){aa(1);if(0==d)f=3;else{f=4;y=2;for(aa(1);1==d;)f*=2,y++,aa(1);aa(y);f+=d}y=k;m=h;var C=m;if(!(0>=f)){u=f;var v=(n+25E5-L)%25E5;L=Math.min(u,L);if(25E5>=v+L)g(e,v,y,C,L);else{var G=25E5-v;g(e,v,y,C,G);g(e,0,y,C+G,L-G)}if(0!=(u-=L)){C+=L;v=L;do L=v,L>u&&(L=u),g(y,m,y,C,L),C+=L,v<<=1;while(0<(u-=L))}}Y(k,h,f)}else aa(15),f=d,x-=l,p=l=0,g(B,A,k,h,f),Y(B,A,f),A+=f,x-=8*f;h+=f}break}}else Y(f,y,m),g(f,y,k,0,m),h=m;w.setPosition(0);w.markEnd(h);return w}};this.bitmap=new function(){function aa(r,
B,A,q,d,x){for(var p,l=0,k,h,e,n,w=0,g,f=B,y=x;l<q;){x=y+A*q*4-(l+1)*A*4;e=0;g=x;p=0;if(0==w)for(;p<A;){k=r[B++];h=k&15;k=k>>4&15;n=h<<4|k;47>=n&&16<=n&&(h=n,k=0);for(;0<k;)e=r[B++],d[x]=e,x+=4,p++,k--;for(;0<h;)d[x]=e,x+=4,p++,h--}else for(;p<A;){k=r[B++];h=k&15;k=k>>4&15;n=h<<4|k;47>=n&&16<=n&&(h=n,k=0);for(;0<k;)n=r[B++],0!=(n&1)?(n>>=1,n+=1,e=-n):e=n>>=1,n=d[w+4*p]+e,d[x]=n,x+=4,p++,k--;for(;0<h;)n=d[w+4*p]+e,d[x]=n,x+=4,p++,h--}l++;w=g}return B-f}function Y(r,B,A,q,d,x){var p,l;for(l=0;l<q;l++)for(p=
0;p<A;p++)d[x+4*((q-l-1)*A+p)]=r[B+(l*A+p)]}this.decompressInt16=function(r,B,A,q,d){var x=-1,p=-1;A=d+A;for(var l,k,h,e=r,n=-1,w,g=0,f=0,y=0,m=4294967295,u,L=!1,C=!1,v=new Uint32Array(r*B);d<A;){w=0;k=q[d++];l=k>>4;switch(l){case 12:case 13:case 14:l-=6;k&=15;h=16;break;case 15:l=k&15;9>l?(k=q[d++],k|=q[d++]<<8):k=11>l?8:1;h=0;break;default:l>>=1,k&=31,h=32}0!=h&&(u=2==l||7==l,0==k?k=u?q[d++]+1:q[d++]+h:u&&(k<<=3));switch(l){case 0:n!=l||e==r&&-1==x||(L=!0);break;case 8:u=q[d++]|q[d++]<<8,g=4278190080|
u>>8&248|u>>13&7|(u>>3&252|u>>9&3)<<8|(u<<3&248|u>>2&7)<<16;case 3:u=q[d++]|q[d++]<<8;f=4278190080|u>>8&248|u>>13&7|(u>>3&252|u>>9&3)<<8|(u<<3&248|u>>2&7)<<16;break;case 6:case 7:u=q[d++]|q[d++]<<8;m=4278190080|u>>8&248|u>>13&7|(u>>3&252|u>>9&3)<<8|(u<<3&248|u>>2&7)<<16;l-=5;break;case 9:y=3;l=2;w=3;break;case 10:y=5,l=2,w=5}n=l;for(h=0;0<k;)switch(e>=r&&(e=0,B--,x=p,p=B*r),l){case 0:L&&(v[p+e]=-1==x?m:v[x+e]^m|4278190080,L=!1,k--,e++);if(-1==x){for(;0!=(k&-8)&&e+8<r;)for(var G=0;8>G;G++)v[p+e]=4278190080,
k--,e++;for(;0<k&&e<r;)v[p+e]=4278190080,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)v[p+e]=v[x+e],k--,e++;for(;0<k&&e<r;)v[p+e]=v[x+e],k--,e++}break;case 1:if(-1==x){for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)v[p+e]=m,k--,e++;for(;0<k&&e<r;)v[p+e]=m,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)v[p+e]=v[x+e]^m|4278190080,k--,e++;for(;0<k&&e<r;)v[p+e]=v[x+e]^m|4278190080,k--,e++}break;case 2:if(-1==x){for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)h<<=1,h&=255,0==h&&(y=0!=w?w&255:q[d++],h=1),v[p+
e]=0!=(y&h)?m:4278190080,k--,e++;for(;0<k&&e<r;)h<<=1,h&=255,0==h&&(y=0!=w?w&255:q[d++],h=1),v[p+e]=0!=(y&h)?m:4278190080,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)h<<=1,h&=255,0==h&&(y=0!=w?w&255:q[d++],h=1),v[p+e]=0!=(y&h)?v[x+e]^m|4278190080:v[x+e],k--,e++;for(;0<k&&e<r;)h<<=1,h&=255,0==h&&(y=0!=w?w&255:q[d++],h=1),v[p+e]=0!=(y&h)?v[x+e]^m|4278190080:v[x+e],k--,e++}break;case 3:for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)v[p+e]=f,k--,e++;for(;0<k&&e<r;)v[p+e]=f,k--,e++;break;case 4:for(;0!=
(k&-8)&&e+8<r;)for(G=0;8>G;G++)u=q[d++]|q[d++]<<8,v[p+e]=4278190080|u>>8&248|u>>13&7|(u>>3&252|u>>9&3)<<8|(u<<3&248|u>>2&7)<<16,k--,e++;for(;0<k&&e<r;)u=q[d++]|q[d++]<<8,v[p+e]=4278190080|u>>8&248|u>>13&7|(u>>3&252|u>>9&3)<<8|(u<<3&248|u>>2&7)<<16,k--,e++;break;case 8:for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)C?(v[p+e]=f,C=!1):(v[p+e]=g,C=!0,k++),k--,e++;for(;0<k&&e<r;)C?(v[p+e]=f,C=!1):(v[p+e]=g,C=!0,k++),k--,e++;break;case 13:for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)v[p+e]=4294967295,k--,e++;for(;0<
k&&e<r;)v[p+e]=4294967295,k--,e++;break;case 14:for(;0!=(k&-8)&&e+8<r;)for(G=0;8>G;G++)v[p+e]=4278190080,k--,e++;for(;0<k&&e<r;)v[p+e]=4278190080,k--,e++;break;default:k--,e++}}return v};this.byte2int=function(r,B,A){B||(B=r.length);A||(A=0);B=Math.floor(B/4);for(var q=new Uint32Array(B),d,x=0;x<B;x++)d=(x<<2)+A,q[x]=(r[d+3]&255)<<24|r[d+2]&255|(r[d+1]&255)<<8|(r[d+0]&255)<<16;return q};this.decompressInt32=function(r,B,A,q,d){A=q[d];d+=1;var x=r*B,p=new Uint32Array(4*x);if(0==(A&32)){for(var l=d,
k,h,e=0,n,w,g,f=l,y=3;e<B;){k=y+r*B*4-(e+1)*r*4;for(h=0;h<r;){n=q[l++];w=n&15;n=n>>4&15;g=w<<4|n;47>=g&&16<=g&&(w=g,n=0);for(;0<n;)l++,p[k]=255,k+=4,h++,n--;for(;0<w;)p[k]=255,k+=4,h++,w--}e++}d+=l-f}else for(k=0;k<x;k++)l=k<<2,p[l+3]=255;0!=(A&16)?(A=aa(q,d,r,B,p,2),d+=A,A=aa(q,d,r,B,p,1),aa(q,d+A,r,B,p,0)):(Y(q,d,r,B,p,2),d+=x,Y(q,d,r,B,p,1),Y(q,d+x,r,B,p,0));return rdpBitmap.byte2int(p)};this.decompressInt24=function(r,B,A,q,d){var x=-1,p=-1;A=d+A;for(var l,k,h,e=r,n=-1,w,g=0,f=0,y=0,m=4294967295,
u=!1,L=!1,C,v=new Uint32Array(r*B);d<A;){w=0;k=q[d++];l=k>>4;switch(l){case 12:case 13:case 14:l-=6;k&=15;h=16;break;case 15:l=k&15;9>l?(k=q[d++],k|=q[d++]<<8):k=11>l?8:1;h=0;break;default:l>>=1,k&=31,h=32}0!=h&&(C=2==l||7==l,0==k?k=C?q[d++]+1:q[d++]+h:C&&(k<<=3));switch(l){case 0:n!=l||e==r&&-1==x||(u=!0);break;case 8:g=4278190080|q[d++]<<16|q[d++]<<8|q[d++];case 3:f=4278190080|q[d++]<<16|q[d++]<<8|q[d++];break;case 6:case 7:m=4278190080|q[d++]<<16|q[d++]<<8|q[d++];l-=5;break;case 9:y=3;l=2;w=3;
break;case 10:y=5,l=2,w=5}n=l;for(h=0;0<k;)switch(e>=r&&(e=0,B--,x=p,p=B*r),l){case 0:u&&(v[p+e]=-1==x?m:v[x+e]^m|4278190080,u=!1,k--,e++);if(-1==x){for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)v[p+e]=4278190080,k--,e++;for(;0<k&&e<r;)v[p+e]=4278190080,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)v[p+e]=v[x+e],k--,e++;for(;0<k&&e<r;)v[p+e]=v[x+e],k--,e++}break;case 1:if(-1==x){for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)v[p+e]=m,k--,e++;for(;0<k&&e<r;)v[p+e]=m,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(C=
0;8>C;C++)v[p+e]=v[x+e]^m|4278190080,k--,e++;for(;0<k&&e<r;)v[p+e]=v[x+e]^m|4278190080,k--,e++}break;case 2:if(-1==x){for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)h<<=1,h&=255,0==h&&(y=0!=w?w&255:q[d++],h=1),v[p+e]=0!=(y&h)?m:4278190080,k--,e++;for(;0<k&&e<r;)h<<=1,h&=255,0==h&&(y=0!=w?w&255:q[d++],h=1),v[p+e]=0!=(y&h)?m:4278190080,k--,e++}else{for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)h<<=1,h&=255,0==h&&(y=0!=w?w&255:q[d++],h=1),v[p+e]=0!=(y&h)?v[x+e]^m|4278190080:v[x+e],k--,e++;for(;0<k&&e<r;)h<<=1,h&=255,
0==h&&(y=0!=w?w&255:q[d++],h=1),v[p+e]=0!=(y&h)?v[x+e]^m|4278190080:v[x+e],k--,e++}break;case 3:for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)v[p+e]=f,k--,e++;for(;0<k&&e<r;)v[p+e]=f,k--,e++;break;case 4:for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)v[p+e]=4278190080|q[d++]<<16|q[d++]<<8|q[d++],k--,e++;for(;0<k&&e<r;)v[p+e]=4278190080|q[d++]<<16|q[d++]<<8|q[d++],k--,e++;break;case 8:for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)L?(v[p+e]=f,L=!1):(v[p+e]=g,L=!0,k++),k--,e++;for(;0<k&&e<r;)L?(v[p+e]=f,L=!1):(v[p+e]=g,L=
!0,k++),k--,e++;break;case 13:for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)v[p+e]=4294967295,k--,e++;for(;0<k&&e<r;)v[p+e]=4294967295,k--,e++;break;case 14:for(;0!=(k&-8)&&e+8<r;)for(C=0;8>C;C++)v[p+e]=4278190080,k--,e++;for(;0<k&&e<r;)v[p+e]=4278190080,k--,e++}}return v};this.decompress=function(r,B,A,q,d){var x=-1,p=0;A+=d;var l=r,k=-1,h=0,e=0,n=0,w=4294967295,g=!1,f=!1,y=new Uint8Array(r*B);for(y[0]=0;d<A;){var m=0;var u=q[d++];var L=u>>4;switch(L){case 12:case 13:case 14:L-=6;u&=15;var C=16;break;case 15:L=
u&15;9>L?(u=q[d++],u|=q[d++]<<8):u=11>L?8:1;C=0;break;default:L>>=1,u&=31,C=32}if(0!=C){var v=2==L||7==L;0==u?u=v?q[d++]+1:q[d++]+C:v&&(u<<=3)}switch(L){case 0:k!=L||l==r&&-1==x||(g=!0);break;case 8:h=q[d++];case 3:e=q[d++];break;case 6:case 7:w=q[d++];L-=5;break;case 9:n=3;L=2;m=3;break;case 10:n=5,L=2,m=5}k=L;for(C=0;0<u;)switch(l>=r&&(l=0,B--,x=p,p=B*r),L){case 0:g&&(y[p+l]=-1==x?w:y[x+l]^w,g=!1,u--,l++);if(-1==x){for(;0!=(u&-8)&&l+8<r;)for(v=0;8>v;v++)y[p+l]=0,u--,l++;for(;0<u&&l<r;)y[p+l]=0,
u--,l++}else{for(;0!=(u&-8)&&l+8<r;)for(v=0;8>v;v++)y[p+l]=y[x+l],u--,l++;for(;0<u&&l<r;)y[p+l]=y[x+l],u--,l++}break;case 1:if(-1==x){for(;0!=(u&-8)&&l+8<r;)for(v=0;8>v;v++)y[p+l]=w,u--,l++;for(;0<u&&l<r;)y[p+l]=w,u--,l++}else{for(;0!=(u&-8)&&l+8<r;)for(v=0;8>v;v++)y[p+l]=y[x+l]^w,u--,l++;for(;0<u&&l<r;)y[p+l]=y[x+l]^w,u--,l++}break;case 2:if(-1==x){for(;0!=(u&-8)&&l+8<r;)for(v=0;8>v;v++)C<<=1,C&=255,0==C&&(n=0!=m?m:q[d++],C=1),y[p+l]=0!=(n&C)?w:0,u--,l++;for(;0<u&&l<r;)C<<=1,C&=255,0==C&&(n=0!=m?
m:q[d++],C=1),y[p+l]=0!=(n&C)?w:0,u--,l++}else{for(;0!=(u&-8)&&l+8<r;)for(v=0;8>v;v++)C<<=1,C&=255,0==C&&(n=0!=m?m:q[d++],C=1),y[p+l]=0!=(n&C)?y[x+l]^w:y[x+l],u--,l++;for(;0<u&&l<r;)C<<=1,C&=255,0==C&&(n=0!=m?m:q[d++],C=1),y[p+l]=0!=(n&C)?y[x+l]^w:y[x+l],u--,l++}break;case 3:for(;0!=(u&-8)&&l+8<r;)for(v=0;8>v;v++)y[p+l]=e,u--,l++;for(;0<u&&l<r;)y[p+l]=e,u--,l++;break;case 4:for(;0!=(u&-8)&&l+8<r;)for(v=0;8>v;v++)y[p+l]=q[d++],u--,l++;for(;0<u&&l<r;)y[p+l]=q[d++],u--,l++;break;case 8:for(;0!=(u&-8)&&
l+8<r;)for(v=0;8>v;v++)f?(y[p+l]=e,f=!1):(y[p+l]=h,f=!0,u++),u--,l++;for(;0<u&&l<r;)f?(y[p+l]=e,f=!1):(y[p+l]=h,f=!0,u++),u--,l++;break;case 13:for(;0!=(u&-8)&&l+8<r;)for(v=0;8>v;v++)y[p+l]=255,u--,l++;for(;0<u&&l<r;)y[p+l]=255,u--,l++;break;case 14:for(;0!=(u&-8)&&l+8<r;)for(v=0;8>v;v++)y[p+l]=0,u--,l++;for(;0<u&&l<r;)y[p+l]=0,u--,l++;break;default:u--,l++}}return y}}};
function RdpGeneral(K,N,Q,W,T,wa,O){function La(){return Ia.displayName||Ia.server||Ia.symlink||Ia.id||"undefined"}function aa(a){return 4278190080|(a<<3&248|a>>2&7)<<16|(a>>3&252|a>>9&3)<<8|a>>8&248|a>>13&7}function Y(a){return 4278190080|ua.paletteRdp[2][a]<<16|ua.paletteRdp[1][a]<<8|ua.paletteRdp[0][a]}function r(a){return 4278190080|a}function B(a){return 4278190080|a}function A(a,t){switch(a){case 16:mb=aa;Gc=rdpBitmap.decompressInt16;break;case 8:mb=Y;break;case 24:mb=B;Gc=rdpBitmap.decompressInt24;
break;case 32:mb=r;Gc=rdpBitmap.decompressInt32;break;case 15:return Ia.invitation||console.log("15 bit color is not supported anymore."),!1;default:return!1}W=a;nb=(a+7)/8>>0;if(t&&X.onColorChange)X.onColorChange(a);return!0}function q(a,t,z){N=a;Q=t;na=da=0;ha=N-1;ra=Q-1;if(X.onresolutionchange&&z)X.onresolutionchange(a,t)}function d(a){rc||Pb&&ya.send(a)}function x(){this.style=this.yOrigin=this.xOrigin=0;this.pattern=Array(8);this.toStream=function(a){a.setByte(this.xOrigin);a.setByte(this.yOrigin);
a.setByte(this.style);a.setBytes(this.pattern)};this.fromStream=function(a){this.xOrigin=a.getByte();this.yOrigin=a.getByte();this.style=a.getByte();this.pattern=a.getBytes(8)};this.byteLength=function(){return 11}}function p(){this.bottom=this.top=this.right=this.left=0;this.toStream=function(a){a.setLittleEndian16(this.left);a.setLittleEndian16(this.right);a.setLittleEndian16(this.top);a.setLittleEndian16(this.bottom)};this.fromStream=function(a){this.left=a.getLittleEndian16();this.right=a.getLittleEndian16();
this.top=a.getLittleEndian16();this.bottom=a.getLittleEndian16()};this.byteLength=function(){return 8}}function l(){this.action=this.offset=this.bottom=this.top=this.right=this.left=0;this.toStream=function(a){a.setLittleEndian16(this.left);a.setLittleEndian16(this.right);a.setLittleEndian16(this.top);a.setLittleEndian16(this.bottom);a.setLittleEndian32(this.offset);a.setByte(this.action)};this.fromStream=function(a){this.left=a.getLittleEndian16();this.right=a.getLittleEndian16();this.top=a.getLittleEndian16();
this.bottom=a.getLittleEndian16();this.offset=a.getLittleEndian32();this.action=a.getByte()};this.byteLength=function(){return 13}}function k(){this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=
a.getByte()};this.byteLength=function(){return 9}}function h(a,t,z,H,E){this.offset=a;this.baseLine=t;this.width=z;this.height=H;this.fontData=E}function e(){this.opcode=this.backgroundColor=this.endY=this.endX=this.startY=this.startX=this.mixmode=0;this.pen=new g;this.toStream=function(a){a.setLittleEndian16(this.mixmode);a.setLittleEndian16(this.startX);a.setLittleEndian16(this.startY);a.setLittleEndian16(this.endX);a.setLittleEndian16(this.endY);a.setLittleEndian32(this.backgroundColor);a.setByte(this.opcode);
this.pen.toStream(a)};this.fromStream=function(a){this.mixmode=a.getLittleEndian16();this.startX=a.getLittleEndian16();this.startY=a.getLittleEndian16();this.endX=a.getLittleEndian16();this.endY=a.getLittleEndian16();this.backgroundColor=a.getLittleEndian32();this.opcode=a.getByte();this.pen.fromStream(a)};this.byteLength=function(){return 15+this.pen.byteLength()}}function n(){this.cacheIDX=this.cacheID=this.colorTable=this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=
function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian16(this.srcX);a.setLittleEndian16(this.srcY);a.setByte(this.cacheID);a.setByte(this.colorTable);a.setLittleEndian16(this.cacheIDX)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.srcX=a.getLittleEndian16();this.srcY=
a.getLittleEndian16();this.cacheID=a.getByte();this.colorTable=a.getByte();this.cacheIDX=a.getLittleEndian16()};this.byteLength=function(){return 17}}function w(){this.foregroundColor=this.backgroundColor=this.opcode=this.cy=this.cx=this.y=this.x=0;this.brush=new x;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian32(this.backgroundColor);a.setLittleEndian32(this.foregroundColor);
this.brush.toStream(a)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.backgroundColor=a.getLittleEndian32();this.foregroundColor=a.getLittleEndian32();this.brush.fromStream(a)};this.byteLength=function(){return 17+this.brush.byteLength()}}function g(){this.color=this.width=this.style=0;this.toStream=function(a){a.setByte(this.style);a.setByte(this.width);a.setLittleEndian32(this.color)};
this.fromStream=function(a){this.style=a.getByte();this.width=a.getByte();this.color=a.getLittleEndian32()};this.byteLength=function(){return 6}}function f(){this.dataSize=this.opcode=this.lines=this.foregroundColor=this.flags=this.y=this.x=0;this.data=[];this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setByte(this.opcode);a.setLittleEndian32(this.foregroundColor);a.setByte(this.lines);a.setByte(this.dataSize);this.dataSize&&a.setBytes(this.data)};this.fromStream=
function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.opcode=a.getByte();this.foregroundColor=a.getLittleEndian32();this.lines=a.getByte();if(this.dataSize=a.getByte())this.data=a.getBytes(this.dataSize)};this.byteLength=function(){return 11+this.dataSize}}function y(){this.color=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setLittleEndian32(this.color)};
this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.color=a.getLittleEndian32()};this.byteLength=function(){return 12}}function m(){this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian16(this.srcX);a.setLittleEndian16(this.srcY)};
this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.srcX=a.getLittleEndian16();this.srcY=a.getLittleEndian16()};this.byteLength=function(){return 13}}function u(){this.length=this.opcode=this.boxBottom=this.boxRight=this.boxTop=this.boxLeft=this.clipBottom=this.clipRight=this.clipTop=this.clipLeft=this.font=this.unknown=this.y=this.x=this.backgroundColor=this.foregroundColor=
this.mixmode=this.flags=0;this.text=null;this.toStream=function(a){a.setByte(this.font);a.setByte(this.flags);a.setByte(this.opcode);a.setByte(this.mixmode);a.setLittleEndian32(this.foregroundColor);a.setLittleEndian32(this.backgroundColor);a.setLittleEndian16(this.clipLeft);a.setLittleEndian16(this.clipTop);a.setLittleEndian16(this.clipRight);a.setLittleEndian16(this.clipBottom);a.setLittleEndian16(this.boxLeft);a.setLittleEndian16(this.boxTop);a.setLittleEndian16(this.boxRight);a.setLittleEndian16(this.boxBottom);
a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setByte(this.length);this.length&&a.setBytes(this.text)};this.fromStream=function(a){this.font=a.getByte();this.flags=a.getByte();this.opcode=a.getByte();this.mixmode=a.getByte();this.foregroundColor=a.getLittleEndian32();this.backgroundColor=a.getLittleEndian32();this.clipLeft=a.getLittleEndian16();this.clipTop=a.getLittleEndian16();this.clipRight=a.getLittleEndian16();this.clipBottom=a.getLittleEndian16();this.boxLeft=a.getLittleEndian16();
this.boxTop=a.getLittleEndian16();this.boxRight=a.getLittleEndian16();this.boxBottom=a.getLittleEndian16();this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();if(this.length=a.getByte())this.text=a.getBytes(this.length)};this.byteLength=function(){return 33+this.length}}function L(){this.orderType=0;this.bounds=new p;this.destBlt=new k;this.patBlt=new w;this.screenBlt=new m;this.line=new e;this.rectangle=new y;this.deskSave=new l;this.memBlt=new n;this.polyLine=new f;this.text2=new u;this._line=
new hi5.graphic.Line;this.paletteRdp=null;this.toPDU=function(){var a=4+this.bounds.byteLength()+this.destBlt.byteLength()+this.patBlt.byteLength()+this.screenBlt.byteLength()+this.line.byteLength()+this.rectangle.byteLength()+this.deskSave.byteLength()+this.memBlt.byteLength()+this.polyLine.byteLength()+this.text2.byteLength()+14+10,t=new Uint8Array(a);t[0]=29;t[2]=1;t[3]=3;a=new hi5.DataBuffer(t,0,a);a.skipPosition(4);this.bounds.toStream(a);this.destBlt.toStream(a);this.patBlt.toStream(a);this.screenBlt.toStream(a);
this.line.toStream(a);this.rectangle.toStream(a);this.deskSave.toStream(a);this.memBlt.toStream(a);this.polyLine.toStream(a);this.text2.toStream(a);a.setLittleEndian16(da);a.setLittleEndian16(na);a.setLittleEndian16(ha);a.setLittleEndian16(ra);a.setLittleEndian32(Wb);a.setByte(this.orderType);a.setByte(W);sc.toStream(a);return t};this.fromStream=function(a){this.bounds.fromStream(a);this.destBlt.fromStream(a);this.patBlt.fromStream(a);this.screenBlt.fromStream(a);this.line.fromStream(a);this.rectangle.fromStream(a);
this.deskSave.fromStream(a);this.memBlt.fromStream(a);this.polyLine.fromStream(a);this.text2.fromStream(a);da=a.getLittleEndian16();na=a.getLittleEndian16();ha=a.getLittleEndian16();ra=a.getLittleEndian16();Wb=a.getLittleEndian32();this.orderType=a.getByte();A(a.getByte(),!0);sc.fromStream(a)}}function C(){var a=Pb;Z=Pb=!1;kb();ua=new L;Wb=0;Qa&&Qa.reset();Sa&&Sa.reset();a&&(Pb=a)}function v(){if(!Pb){Z=!1;if(rc)ya=rc;else{if(X.oncreatewebsocket)ya=X.oncreatewebsocket(K);else{var a=K;0==X.mode&&O&&
(a=K.substring(0,K.indexOf("?"))+"?_METHOD=post",Ia.loadbalanceTokenName&&Ia[Ia.loadbalanceTokenName]&&(a+="&loadbalanceTokenName="+Ia.loadbalanceTokenName+"&"+Ia.loadbalanceTokenName+"="+Ia[Ia.loadbalanceTokenName]));ya=new WebSocket(a,"rdp")}"binaryType"in ya&&(ya.binaryType="arraybuffer")}ya.onopen=function(t){Pb=!0;if(!O&&X.onopen)X.onopen()};"on"==Ia.recording&&(Qb=new RecordingManager,Qb.setHeader({name:"rec",width:N,height:Q,color:W,namesuffix:".rdpv",filetag:"RDPV",duration:0}));ya.onmessage=
G;ya.onclose=U;ya.onerror=X.onerror}}function G(a){var t=a.data;if("string"!=typeof t){var z=new Uint8Array(t);null!=Qb&&Qb.add(new RecordingObj(z,0,t.byteLength,-1));Xb.attach(z,0,t.byteLength);var H=Xb.getLittleEndian16();switch(H){case 29:D(Xb);break;case 48:if(X.onSlowPath)X.onSlowPath();var E=Xb;E.getLittleEndian16();var I=E.getByte(),P=E.getByte(),M=E.getLittleEndian16(),ba=0!=(P&32);ba&&(M-=18);if(ba)if(3==(P&15)){var ja=E.getByte(),sa=E.getByte();M-=2;if(0!=(ja&16)&&0!=(sa&32)){Qa.dec5(E.getData(),
E.getPosition(),M,sa);var ab=Qa.getData(),ta=Qa.getDecompressedLength();Sa.dec(ab.getData(),ab.getPosition(),ta,ja)}else Sa.dec(E.getData(),E.getPosition(),M,ja);var pa=Sa.getData()}else Qa.dec(E.getData(),E.getPosition(),M,P),pa=Qa.getData();else pa=E;var S=pa;switch(I){case 2:var vb=S.getLittleEndian16();switch(vb){case 0:S.skipPosition(2);var Yb=S.getLittleEndian16();S.skipPosition(2);Aa(S,Yb);break;case 1:Hb(S);break;case 2:Ja(S);break;case 3:break;default:svGlobal.logger.warn("Unimplemented Update type "+
vb)}break;case 20:break;case 31:Rb=!1;break;case 27:var Ta=S.getLittleEndian16();S.skipPosition(2);switch(Ta){case 3:var bc=S.getLittleEndian16();var bb=S.getLittleEndian16();X.onMoveCursor(bc,bb,!0);break;case 6:V(S,24);break;case 7:T.setCursor(S.getLittleEndian16());break;case 1:var mc=S.getLittleEndian16();switch(mc){case 0:break;default:svGlobal.logger.warn("XXX system pointer message "+mc)}break;case 8:var Bc=S.getLittleEndian16();V(S,Bc)}break;case 34:break;case 38:a:{var cc=S.getLittleEndian32(),
Ib=X.sessionInfo;if(3>cc){var Jb=X.sessionInfo;switch(cc){case 0:S.skipPosition(4);Jb.domain=S.getUnicodeString(52,!0);S.skipPosition(4);Jb.userName=S.getUnicodeString(512,!0);Jb.sessionId=S.getLittleEndian32();break;case 1:Jb.version=S.getLittleEndian16();S.skipPosition(4);Jb.sessionId=S.getLittleEndian32();var tc=S.getLittleEndian32();var Yc=S.getLittleEndian32();S.skipPosition(558);Jb.domain=S.getUnicodeString(tc,!0);Jb.userName=S.getUnicodeString(Yc,!0)}}else if(3==cc){S.skipPosition(2);var Rc=
S.getLittleEndian32();S.skipPosition(4);if(2==Rc)break a;S.getLittleEndian32();S.skipPosition(4);Ib.sessionId=S.getLittleEndian32();var uc=S.getBytes(16);for(var Na=Array(16),Xa=0;16>Xa;Xa++)Na[Xa]=uc[Xa]&255}if(!Z&&X.onloggedin)X.onloggedin(X.sessionInfo);Z=!0;var Ca="8D";Ib.sessionId&&(Ca+=Ib.sessionId+"\t"+(uc?hi5.Base64.enc(uc):0)+"\t"+Ib.userName+"\t"+Ib.domain);Cc||d(Ca)}Rb=!1;break;case 40:Rb=!1;break;case 41:S.skipPosition(2);var wb=S.getLittleEndian16(),Sb=0!=(wb&4),ob=0!=(wb&2),Zb=0!=(wb&
1),ea=0!=(wb&8);if(X.onLockKeyState)X.onLockKeyState({capsLock:Sb,numLock:ob,scrollLock:Zb,kanaLock:ea});svGlobal.logger.info("LED state, capsLock:"+Sb+" numLock:"+ob+" scrollLock:"+Zb+" kanaLock:"+ea);break;case 47:Rb=!0;var dc=S.getLittleEndian32();svGlobal.logger.info("Disconnect:"+dc);var Hc=11==dc&&Zc;if(Hc)X.onCloseSurface();if(!(1>dc||Hc)){!Cc&&Pb&&d("85"+dc);var ka=dc.toString(16).toUpperCase();if(X.onerror)X.onerror(ka)}break;case 50:S.skipPosition(4);break;case 54:var la=S.getLittleEndian32().toString(16).toUpperCase();
svGlobal.logger.warn("server status code:"+la);break;case 55:for(var Tb=S.getLittleEndian32(),Kb,Ua,ca,ec,cb=0,R=0,ia=0,Dc=0,Ec=0;Ec<Tb;Ec++)Kb=S.getLittleEndian32(),Ua=S.getLittleEndian32(),ca=S.getLittleEndian32(),ec=S.getLittleEndian32(),S.skipPosition(4),cb=Math.min(Kb,cb),R=Math.max(R,ca),ia=Math.min(Ua,ia),Dc=Math.max(Dc,ec);Kb=R-cb+1;Ua=Dc-ia+1;svGlobal.logger.warn("monitor, count:"+Tb+" w:"+Kb+" h:"+Ua);q(Kb,Ua,!0);break;default:svGlobal.logger.warn("Unimplemented Data PDU type "+I)}break;
case 49:if(X.onFastPath)X.onFastPath();a:{var Da=Xb,qa=Da.getByte(),gb=qa&15,vc=qa>>4&3,$b=0;2==(qa>>6&3)&&($b=Da.getByte());var pb=0!=($b&32);var Ya=Da.getLittleEndian16();if(pb)if(3==($b&15)){var Ba=Da.getByte(),Lb=Da.getByte();Ya-=2;if(0!=(Ba&16)&&0!=(Lb&32)){Qa.dec5(Da.getData(),Da.getPosition(),Ya,Lb);var Va=Qa.getData(),fc=Qa.getDecompressedLength();Sa.dec(Va.getData(),Va.getPosition(),fc,Ba)}else Sa.dec(Da.getData(),Da.getPosition(),Ya,Ba);var xb=Sa.getData();Ya=Sa.getDecompressedLength()}else Qa.dec(Da.getData(),
Da.getPosition(),Ya,$b),xb=Qa.getData(),Ya=Qa.getDecompressedLength();else xb=Da;if(0!=vc)switch(vc){case 2:case 3:Ic.addFragement(xb,Ya);break a;case 1:Ic.addFragement(xb,Ya),xb=Ic.clearFragements()}var Ea=xb;za&&za.begin("decodeFastPath");switch(gb){case 0:var gc=Ea.getLittleEndian16();Aa(Ea,gc);break;case 1:Ea.skipPosition(2);Hb(Ea);break;case 2:Ea.skipPosition(2);Ja(Ea);break;case 3:break;case 4:for(var Sc=Ea.getEnd(),wc,xc;Ea.getPosition()<Sc;){var Jc=Ea.getLittleEndian16();switch(Jc){case 1:case 6:wc=
Ea.getLittleEndian16();xc=Ea.getLittleEndian16();Ea.getLittleEndian16();Ea.getBigEndian16();var ac=void 0,Ma=void 0,ma=Ea,Mb=wc,Nb=xc,db=ma.getByte();ma.skipPosition(2);var Tc=ma.getByte(),qb=ma.getLittleEndian16(),rb=ma.getLittleEndian16(),sb=ma.getLittleEndian32(),hc=ma.getPosition()+sb;switch(Tc){case 0:var Ub=rdpBitmap.byte2int(ma.getData(),sb,ma.getPosition());Ma=new Uint32Array(Ub.length);rdpcodecs.flipimage(Ub,0,Ma,qb,rb,1);T.setRGBs(Mb,Nb,qb,rb,Ma,0,qb);break;case 1:Uc(ma,db,qb,rb);var yb=
yc.getData(),Fc=yc.getDataSize();Ma=new Uint32Array(Fc);rdpcodecs.flipimage(yb,0,Ma,qb,rb,1);T.setRGBs(Mb,Nb,qb,rb,Ma,0,qb);break;case 3:for(var eb=nc.decode(ma,sb),hb=eb.getRects(),ic=eb.getTiles(),Oa=eb.getTileSize(),zb=eb.getRectSize(),Pa=zb?new $c(0,0,0,0):null,jc=0;jc<Oa;jc++){var Ab=ic[jc];if(zb)for(var Kc=0;Kc<zb;Kc++)hb[Kc].intersection(Ab.x,Ab.y,64,64,Pa),Pa.isEmpty()||(ac=64*(Pa.y-Ab.y)+(Pa.x-Ab.x),Pa.x+=Mb,Pa.y+=Nb,T.setRGBs(Pa.x,Pa.y,Pa.width,Pa.height,Ab.data,ac,64));else T.setRGBs(Ab.x,
Ab.y,64,64,Ab.data,0,64)}}ma.setPosition(hc);break;case 4:var Vc=Ea,zc=Vc.getLittleEndian16(),Ka=Vc.getLittleEndian32();1==zc&&d("91"+Ka);break;default:svGlobal.logger.warn("Invalid surface cmd:"+Jc)}}break;case 5:break;case 6:break;case 8:break;case 9:V(Ea,24);break;case 10:T.setCursor(Ea.getLittleEndian16());break;case 11:var kc=Ea.getLittleEndian16();V(Ea,kc);break;default:svGlobal.logger.warn("XXX RDP5 opcode "+gb)}za&&za.end("decodeFastPath")}break;case 65:var Ga=Xb,oc=Ga.getPosition(),Bb=Ga.getByte(),
Ob=Ga.getByte();seqNoLow=Ga.getByte();seqNoHigh=Ga.getByte();reqType=Ga.getLittleEndian16;out=null;payloadLen=0;payload=null;averageRTT=bandwidth=baseRTT=0;if(0!=Ob)svGlobal.logger.warn("invalid msg channel data");else switch(reqType){case 1:case 4097:out=new Uint8Array(7);out[0]=65;out.set(Ga.getData().subarray(oc,oc+4),1);out[5]=0;out[6]=0;d(out.buffer);break;case 20:case 276:case 4116:break;case 2:8==Bb?(payloadLen=Ga.getLittleEndian16(),payload=Ga.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");
break;case 43:8==Bb?(payloadLen=Ga.getLittleEndian16(),payload=Ga.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");break;case 1065:case 1577:break;case 2112:baseRTT=Ga.getLittleEndian32();averageRTT=Ga.getLittleEndian32();break;case 2176:bandwidth=Ga.getLittleEndian32();averageRTT=Ga.getLittleEndian32();break;case 2240:baseRTT=Ga.getLittleEndian32();bandwidth=Ga.getLittleEndian32();averageRTT=Ga.getLittleEndian32();break;default:svGlobal.logger.warn("Invalid msg channel type:"+reqType)}break;
case 62:J(Xb.getUnicodeString(Xb.getEnd()-Xb.getPosition(),!1));default:if(X.onmessage)X.onmessage(a)}}else{H=parseInt(t.substring(0,2),16);var ib=t.substring(2);switch(H){case 0:var Fa=K.substring(K.indexOf("?")+1);d("00"+Fa);if(O&&X.onopen)X.onopen();break;case 15:if(X){Wc=Rb=!1;ua=new L;if(ib){var Za=JSON.parse(ib);Za.capability&&X&&(X.sessionInfo.suppressOutput=!!Za.capability.suppressOutput)}if(!Cc&&X&&X.onready)X.onready()}break;case 26:Rb=!0;break;case 56:X.sessionInfo.appInfo=JSON.parse(ib);
break;case 62:J(ib)}X.onmessage(a)}}function J(a){var t=parseInt(a.substring(0,1),16);a=a.substring(1);switch(t){case 0:a=JSON.parse(a),C(),t=a.width,a=a.height,t==N&&a==Q||q(t,a,!1,!1)}}function D(a){var t=a.getByte();if(0==t){svGlobal.logger.info("Send history...");var z=new Uint8Array(4);z[0]=29;z[2]=1;z[3]=1;ya.send(z.buffer);T.getHistory(d,function(){za&&za.begin("his_mppc");(z=Qa.toPDU())&&ya.send(z.buffer);za&&za.end("his_mppc");if(Sa){za&&za.begin("his_mppc61");var H=Sa.toPDU();H&&ya.send(H.buffer);
za&&za.end("his_mppc61")}za&&za.begin("his_order");ya.send(ua.toPDU().buffer);za&&za.end("his_order");z=new Uint8Array(5);z[0]=29;z[2]=1;z[3]=0;z[4]=1;ya.send(z.buffer)})}else switch(t=a.getByte(),t){case 0:svGlobal.logger.warn("Received history");X.sessionInfo.suppressOutput&&Ia.monitorDef&&524292==X.sessionInfo.appInfo.protocolVersion?(X.suppressOutput(!0),X.suppressOutput(!1)):X.refreshOutput(0,0,N-1,Q-1);if(X.onHistoryReceived)X.onHistoryReceived();break;case 1:break;case 2:za&&za.begin("his_mppc_dec");
Qa.fromStream(a);za&&za.end("his_mppc_dec");break;case 3:za&&za.begin("his_order_dec");ua.fromStream(a);za&&za.end("his_order_dec");break;case 9:Sa||(Sa=new Bulk61Data);za&&za.begin("his_mppc_dec61");Sa.fromStream(a);za&&za.end("his_mppc_dec61");break;default:T.setHistory(t,a)}if(X.onReqHistory)X.onReqHistory()}function b(a,t,z,H,E,I,P,M){this.x=a;this.y=t;this.width=z;this.height=H;this.mask=E;this.pixel=I;this.bpp=P;this.cache_idx=M}function V(a,t){if(!va){var z=a.getLittleEndian16();var H=a.getLittleEndian16();
var E=a.getLittleEndian16();var I=a.getLittleEndian16();var P=a.getLittleEndian16();var M=a.getLittleEndian16();var ba=a.getLittleEndian16();var ja=a.getBytes(ba);a=a.getBytes(M);if(0>H||H>=I-1)H=0;0>E?E=0:E>=P&&(E=P-1);for(M=0;M<ba&&0==ja[M];M++);a=new b(H,E,I,P,a,ja,t,z);t=a.x;H=a.y;E=a.width;I=a.height;P=a.mask;ba=a.pixel;ja=a.bpp;a=a.cache_idx;M=new Uint32Array(E*I);for(var sa=M[0]=0,ab=!0,ta=P.length,pa=0;pa<ta;pa++)if(0!=P[pa]){ab=!1;break}for(pa=0;pa<I;pa++)for(ta=0;ta<E;ta++){M[sa]=xa(ta,
pa,E,I,ja,ba);if(!ab){var S=pa;1!=ja&&(S=I-S-1);S=8*S*((E+7)/8|0)+ta;S=0==(P[S/8>>0]&128>>S%8)?1:0;if(0==S&&0!=M[sa])M[sa]=~M[sa],M[sa]|=4278190080;else if(1==S||0!=M[sa])M[sa]|=4278190080;32==ja&&-1==M[sa]&&0==S&&(M[sa]=0)}sa++}t=new oa(a,M,t,H,E,I,ja,ba.length,P.length);T.putCursor(a,t);T.setCursor(z)}}function xa(a,t,z,H,E,I){1!=E&&(t=H-t-1);t=(t*z+a)*E;z=t/8>>0;a=I[z]&255;switch(E){case 1:return 0==(a&128>>t%8)?0:4294967295;case 8:return 0==a?0:4294967295;case 15:return a|=(I[z+1]&255)<<8,E=Array(4),
od(a,15,E,0),E[0]<<16|E[1]<<8|E[2];case 16:return a|=(I[z+1]&255)<<8,E=Array(4),od(a,16,E,0),E[0]<<16|E[1]<<8|E[2];case 24:return(I[z+2]&255)<<16|(I[z+1]&255)<<8|a;case 32:return(I[z+3]&255)<<24|(I[z+2]&255)<<16|(I[z+1]&255)<<8|a}svGlobal.logger.warn("invalid bpp value for Xor Mask.");return 0}function oa(a,t,z,H,E,I,P,M,ba){function ja(){var ta=0;if(t)for(var pa=0,S=t.length;pa<S;pa++)0!=t[pa]&&(ta+=pa%E+(pa/E|0));return ta}function sa(ta){switch(ta){case 0:return"none";case 507:return"text";case 2046:case 4359:return"default";
default:return""}}this.cache_idx=a;this.rawData=t;this.none=!t;this.hotX=z;this.hotY=H;this.width=E;this.height=I;this.xorSize=M;this.andSize=ba;this.result="";this.distance=0;this.bpp=P;this.system="";t&&(this.distance||(this.distance=ja()),this.system||(this.system=sa(this.distance),"none"==this.system&&(t=null)));a="";if(!this.system&&t){P=E*I*4;a=62+P+M+ba;var ab=new Uint8Array(a);a=new hi5.DataBuffer(ab,0,a);a.setLittleEndian16(0);a.setLittleEndian16(2);a.setLittleEndian16(1);a.setByte(E);a.setByte(I);
a.setByte(0);a.setByte(0);a.setLittleEndian16(z);a.setLittleEndian16(H);a.setLittleEndian32(40+P+M+ba);a.setLittleEndian32(22);a.setLittleEndian32(40);a.setLittleEndian32(E);a.setLittleEndian32(2*I);a.setLittleEndian16(1);a.setLittleEndian16(32);a.setLittleEndian32(0);a.setLittleEndian32(M+ba);a.setLittleEndian32(0);a.setLittleEndian32(0);a.setLittleEndian32(0);a.setLittleEndian32(0);for(z=I-1;0<=z;z--)for(H=0;H<E;H++)I=t[E*z+H],a.setByte(I&255),a.setByte(I>>8&255),a.setByte(I>>16&255),a.setByte(I>>
24&255);a="data:image/x-icon;base64,"+hi5.Base64.enc(a.getData())}this.url=a}function Ja(a){var t=0;a.skipPosition(2);var z=a.getLittleEndian16();a.skipPosition(2);var H=Array(z);var E=Array(z);var I=Array(z);a=a.getBytes(3*z);for(var P=0;P<z;P++)H[P]=a[t],E[P]=a[t+1],I[P]=a[t+2],t+=3;256==z&&(ua.paletteRdp||(ua.paletteRdp=Array(3)),ua.paletteRdp[0]=H,ua.paletteRdp[1]=E,ua.paletteRdp[2]=I)}function Aa(a,t){for(var z=0,H,E;z<t;){H=a.getByte();E=H&3;switch(E){case 1:var I=a,P=H;0!=(P&8)&&(ua.orderType=
I.getByte());var M=void 0,ba=I,ja=Cb[ua.orderType],sa=0;0!=(P&64)&&ja--;0!=(P&128)&&(ja=2>ja?0:ja-2);for(var ab=0;ab<ja;ab++)M=ba.getByte(),sa|=M<<8*ab;var ta=sa;if(0!=(P&4)){if(0==(P&32)){var pa=I,S=ua.bounds,vb=pa.getByte();0!=(vb&1)?S.left=F(pa,S.left,!1):0!=(vb&16)&&(S.left=F(pa,S.left,!0));0!=(vb&2)?S.top=F(pa,S.top,!1):0!=(vb&32)&&(S.top=F(pa,S.top,!0));0!=(vb&4)?S.right=F(pa,S.right,!1):0!=(vb&64)&&(S.right=F(pa,S.right,!0));0!=(vb&8)?S.bottom=F(pa,S.bottom,!1):0!=(vb&128)&&(S.bottom=F(pa,
S.bottom,!0))}var Yb=ua.bounds;da=Yb.left;0>da&&(da=0);na=Yb.top;0>na&&(na=0);ha=Yb.right;ha>=N&&(ha=N-1);ra=Yb.bottom;ra>=Q&&(ra=Q-1)}var Ta=0!=(P&16);switch(ua.orderType){case 0:var bc=I,bb=ua.destBlt,mc=ta,Bc=Ta;0!=(mc&1)&&(bb.x=F(bc,bb.x,Bc));0!=(mc&2)&&(bb.y=F(bc,bb.y,Bc));0!=(mc&4)&&(bb.cx=F(bc,bb.cx,Bc));0!=(mc&8)&&(bb.cy=F(bc,bb.cy,Bc));0!=(mc&16)&&(bb.opcode=bc.getByte()&15);var cc=bb.x,Ib=bb.y,Jb=bb.cx,tc=bb.cy,Yc=bb.opcode;if(!(cc>N||Ib>Q)){cc<da&&(Jb-=da-cc,cc=da);var Rc=cc+Jb-1;Rc>ha&&
(Jb-=Rc-ha);Ib<na&&(tc-=na-Ib,Ib=na);var uc=Ib+tc-1;uc>ra&&(tc-=uc-ra);1>Jb||1>tc||T.bitBlt(Yc,N,cc,Ib,Jb,tc,null,0,0,0)}break;case 1:var Na=void 0,Xa=I,Ca=ua.patBlt,wb=ta,Sb=Ta;0!=(wb&1)&&(Ca.x=F(Xa,Ca.x,Sb));0!=(wb&2)&&(Ca.y=F(Xa,Ca.y,Sb));0!=(wb&4)&&(Ca.cx=F(Xa,Ca.cx,Sb));0!=(wb&8)&&(Ca.cy=F(Xa,Ca.cy,Sb));0!=(wb&16)&&(Ca.opcode=Xa.getByte(),Ca.opcode=Ca.opcode&3|(Ca.opcode&48)>>2);0!=(wb&32)&&(Ca.backgroundColor=Db(Xa));0!=(wb&64)&&(Ca.foregroundColor=Db(Xa));var ob=Ca.brush,Zb=wb>>7;0!=(Zb&1)&&
(ob.xOrigin=Xa.getByte());0!=(Zb&2)&&(ob.yOrigin=Xa.getByte());0!=(Zb&4)&&(ob.style=Xa.getByte());var ea=ob.pattern;0!=(Zb&8)&&(ea[0]=Xa.getByte());if(0!=(Zb&16))for(var dc=1;8>dc;dc++)ea[dc]=Xa.getByte();ob.pattern=ea;var Hc=Ca.x,ka=Ca.y;if(!(Hc>ha||ka>ra)){var la=Ca.opcode,Tb=Hc,Kb=ka,Ua=Ca.cx,ca=Ca.cy,ec=Ca.foregroundColor,cb=Ca.backgroundColor,R=Ca.brush.xOrigin,ia=Ca.brush.yOrigin,Dc=Ca.brush.style,Ec=Ca.brush.pattern;ec=mb(ec);cb=mb(cb);if(!(Tb>N||Kb>Q)){Tb<da&&(Ua-=da-Tb,Tb=da);var Da=Tb+Ua-
1;Da>ha&&(Ua-=Da-ha);Kb<na&&(ca-=na-Kb,Kb=na);var qa=Kb+ca-1;qa>ra&&(ca-=qa-ra);if(!(1>Ua||1>ca))switch(Dc){case 0:Na=new Uint32Array(Ua*ca);for(var gb=0;gb<Na.length;gb++)Na[gb]=ec;T.bitBlt(la,N,Tb,Kb,Ua,ca,Na,Ua,0,0);break;case 2:svGlobal.logger.warn("hatch");break;case 3:Na=new Uint32Array(Ua*ca);var vc=0;for(gb=0;gb<ca;gb++)for(var $b=0;$b<Ua;$b++)Na[vc]=0==(Ec[(gb+ia)%8]&1<<($b+R)%8)?ec:cb,vc++;T.bitBlt(la,N,Tb,Kb,Ua,ca,Na,Ua,0,0);break;default:svGlobal.logger.warn("Unsupported brush style "+
Dc)}}}break;case 2:var pb=void 0,Ya=I,Ba=ua.screenBlt,Lb=ta,Va=Ta;0!=(Lb&1)&&(Ba.x=F(Ya,Ba.x,Va));0!=(Lb&2)&&(Ba.y=F(Ya,Ba.y,Va));0!=(Lb&4)&&(Ba.cx=F(Ya,Ba.cx,Va));0!=(Lb&8)&&(Ba.cy=F(Ya,Ba.cy,Va));0!=(Lb&16)&&(Ba.opcode=Ya.getByte()&15);0!=(Lb&32)&&(Ba.srcX=F(Ya,Ba.srcX,Va));0!=(Lb&64)&&(Ba.srcY=F(Ya,Ba.srcY,Va));var fc=Ba.x,xb=Ba.y;if(!(fc>ha||xb>ra)){var Ea=Ba.cx,gc=Ba.cy,Sc=Ba.opcode,wc=Ba.srcX,xc=Ba.srcY;fc<da&&(pb=da-fc,fc=da,wc+=pb,Ea-=pb);var Jc=fc+Ea-1;Jc>ha&&(pb=Jc-ha,Ea-=pb);xb<na&&(pb=
na-xb,xb=na,xc+=pb,gc-=pb);var ac=xb+gc-1;ac>ra&&(pb=ac-ra,gc-=pb);1>Ea||1>gc||(12==Sc?T.moveArea(wc,xc,Ea,gc,fc-wc,xb-xc):T.bitBlt(Sc,Ea,fc,xb,Ea,gc,null,Ea,wc,xc))}break;case 9:var Ma=I,ma=ua.line,Mb=ta,Nb=Ta;0!=(Mb&1)&&(ma.mixmode=Ma.getLittleEndian16());0!=(Mb&2)&&(ma.startX=F(Ma,ma.startX,Nb));0!=(Mb&4)&&(ma.startY=F(Ma,ma.startY,Nb));0!=(Mb&8)&&(ma.endX=F(Ma,ma.endX,Nb));0!=(Mb&16)&&(ma.endY=F(Ma,ma.endY,Nb));0!=(Mb&32)&&(ma.backgroundColor=Db(Ma));0!=(Mb&64)&&(ma.opcode=Ma.getByte());var db=
ma.pen,Tc=Mb>>7;0!=(Tc&1)&&(db.style=Ma.getByte());0!=(Tc&2)&&(db.width=Ma.getByte());0!=(Tc&4)&&(db.color=Db(Ma));var qb=ma.startX,rb=ma.startY,sb=ma.endX,hc=ma.endY,Ub=ma.pen.color,yb=ma.opcode-1;if(rb==hc){if(qb>sb){var Fc=qb;qb=sb;sb=Fc}qb<da&&(qb=da);sb>ha&&(sb=ha)}else qb==sb&&(rb>hc&&(Fc=rb,rb=hc,hc=Fc),rb<na&&(rb=na),rb>ra&&(rb=ra));Vb(qb,rb,sb,hc,Ub,yb);break;case 10:var eb=I,hb=ua.rectangle,ic=ta,Oa=Ta;0!=(ic&1)&&(hb.x=F(eb,hb.x,Oa));0!=(ic&2)&&(hb.y=F(eb,hb.y,Oa));0!=(ic&4)&&(hb.cx=F(eb,
hb.cx,Oa));0!=(ic&8)&&(hb.cy=F(eb,hb.cy,Oa));0!=(ic&16)&&(Wb=Wb&4294967040|eb.getByte());0!=(ic&32)&&(Wb=Wb&4294902015|eb.getByte()<<8);0!=(ic&64)&&(Wb=Wb&4278255615|eb.getByte()<<16);hb.color=Wb;var zb=hb.x,Pa=hb.y,jc=hb.cx,Ab=hb.cy;if(!(zb>ha||Pa>ra)){zb<da&&(jc-=da-zb,zb=da);var Kc=zb+jc-1;Kc>ha&&(jc-=Kc-ha);Pa<na&&(Ab-=na-Pa,Pa=na);var Vc=Pa+Ab-1;Vc>ra&&(Ab-=Vc-ra);1>jc||1>Ab||T.fillRect(zb,Pa,jc,Ab,mb(hb.color))}break;case 11:var zc=I,Ka=ua.deskSave,kc=ta,Ga=Ta;0!=(kc&1)&&(Ka.offset=zc.getLittleEndian32());
0!=(kc&2)&&(Ka.left=F(zc,Ka.left,Ga));0!=(kc&4)&&(Ka.top=F(zc,Ka.top,Ga));0!=(kc&8)&&(Ka.right=F(zc,Ka.right,Ga));0!=(kc&16)&&(Ka.bottom=F(zc,Ka.bottom,Ga));0!=(kc&32)&&(Ka.action=zc.getByte());var oc=Ka.right-Ka.left+1,Bb=Ka.bottom-Ka.top+1;0==Ka.action?1>oc||1>Bb||T.saveDesktop(Ka.left,Ka.top,oc,Bb,Ka.offset):T.restoreDesktop(Ka.left,Ka.top,oc,Bb,Ka.offset);break;case 13:var Ob=void 0,ib=I,Fa=ua.memBlt,Za=ta,Lc=Ta;0!=(Za&1)&&(Fa.cacheID=ib.getByte(),Fa.colorTable=ib.getByte());0!=(Za&2)&&(Fa.x=
F(ib,Fa.x,Lc));0!=(Za&4)&&(Fa.y=F(ib,Fa.y,Lc));0!=(Za&8)&&(Fa.cx=F(ib,Fa.cx,Lc));0!=(Za&16)&&(Fa.cy=F(ib,Fa.cy,Lc));0!=(Za&32)&&(Fa.opcode=ib.getByte()&15);0!=(Za&64)&&(Fa.srcX=F(ib,Fa.srcX,Lc));0!=(Za&128)&&(Fa.srcY=F(ib,Fa.srcY,Lc));0!=(Za&256)&&(Fa.cacheIDX=ib.getLittleEndian16());var Mc=Fa.x,Nc=Fa.y;if(!(Mc>ha||Nc>ra)){var pc=Fa.cx,Oc=Fa.cy,lb=Fa.srcX,Xc=Fa.srcY;Mc<da&&(Ob=da-Mc,Mc=da,lb+=Ob,pc-=Ob);var tb=Mc+pc-1;tb>ha&&(Ob=tb-ha,pc-=Ob);Nc<na&&(Ob=na-Nc,Nc=na,Xc+=Ob,Oc-=Ob);var gd=Nc+Oc-1;gd>
ra&&(Ob=gd-ra,Oc-=Ob);1>pc||1>Oc||T.drawBitmap(Fa.cacheID,Fa.cacheIDX,Mc,Nc,pc,Oc,lb,Xc,Fa.opcode)}break;case 22:var Eb=I,$a=ua.polyLine,c=ta,Pc=Ta;0!=(c&1)&&($a.x=F(Eb,$a.x,Pc));0!=(c&2)&&($a.y=F(Eb,$a.y,Pc));0!=(c&4)&&($a.opcode=Eb.getByte());0!=(c&16)&&($a.foregroundColor=Db(Eb));0!=(c&32)&&($a.lines=Eb.getByte());if(0!=(c&64)){var hd=Eb.getByte();$a.dataSize=hd;$a.data=Eb.getBytes(hd)}var yd=$a.x,zd=$a.y,je=$a.foregroundColor,Ld=$a.lines,ke=$a.dataSize,Ad=$a.data,pd=Array(1);pd[0]=Math.floor((Ld-
1)/4)+1;for(var ad=0,le=0,me=$a.opcode-1,Bd=0;Bd<Ld&&pd[0]<ke;Bd++){var ne=yd,oe=zd;0==Bd%4&&(ad=Ad[le++]);0==(ad&192)&&(ad|=192);0!=(ad&64)&&(yd+=bd(Ad,pd));0!=(ad&128)&&(zd+=bd(Ad,pd));Vb(ne,oe,yd,zd,je,me);ad<<=2}break;case 27:var Ra=I,jb=ua.text2,Wa=ta;0!=(Wa&1)&&(jb.font=Ra.getByte());0!=(Wa&2)&&(jb.flags=Ra.getByte());0!=(Wa&4)&&(jb.opcode=Ra.getByte());0!=(Wa&8)&&(jb.mixmode=Ra.getByte());0!=(Wa&16)&&(jb.foregroundColor=Db(Ra));0!=(Wa&32)&&(jb.backgroundColor=Db(Ra));0!=(Wa&64)&&(jb.clipLeft=
Ra.getLittleEndian16());0!=(Wa&128)&&(jb.clipTop=Ra.getLittleEndian16());0!=(Wa&256)&&(jb.clipRight=Ra.getLittleEndian16());0!=(Wa&512)&&(jb.clipBottom=Ra.getLittleEndian16());0!=(Wa&1024)&&(jb.boxLeft=Ra.getLittleEndian16());0!=(Wa&2048)&&(jb.boxTop=Ra.getLittleEndian16());0!=(Wa&4096)&&(jb.boxRight=Ra.getLittleEndian16());0!=(Wa&8192)&&(jb.boxBottom=Ra.getLittleEndian16());0!=(Wa&16384)&&Ra.skipPosition(1);0!=(Wa&32768)&&Ra.skipPosition(1);0!=(Wa&65536)&&Ra.skipPosition(1);0!=(Wa&131072)&&Ra.skipPosition(1);
0!=(Wa&262144)&&Ra.skipPosition(7);0!=(Wa&524288)&&(jb.x=Ra.getLittleEndian16());0!=(Wa&1048576)&&(jb.y=Ra.getLittleEndian16());if(0!=(Wa&2097152)){var Md=Ra.getByte();jb.length=Md;jb.text=Ra.getBytes(Md)}var ub=jb,pe=ub.font,qe=ub.flags,re=ub.mixmode,se=mb(ub.foregroundColor),te=mb(ub.backgroundColor),Nd=ub.clipLeft,Od=ub.clipTop,ue=ub.clipRight,ve=ub.clipBottom,qd=ub.boxLeft,Pd=ub.boxTop,we=ub.boxBottom,xe=ub.x,ye=ub.y,ze=ub.length,Ae=ub.text,Cd=ub.boxRight-qd;qd+Cd>N&&(Cd=N-qd);T.drawText(pe,qe,
re,se,te,Nd,Od,ue-Nd,ve-Od,qd,Pd,Cd,we-Pd,xe,ye,ze,Ae,da,na,ha,ra);break;default:svGlobal.logger.warn("XXX Order type "+ua.orderType)}0!=(P&4)&&kb();break;case 2:var Qd=a,Rd=H>>2;switch(Rd){case 11:var rd=Qd,Sd=rd.getLittleEndian16()-3,Be=rd.getPosition()+Sd;X.onAltSecWindows(rd,Sd);rd.setPosition(Be);break;case 13:Qd.getLittleEndian32();break;default:svGlobal.logger.warn("Alt Sec order:"+Rd)}break;case 3:var lc=a;var Td=lc.getLittleEndian16();var sd=lc.getLittleEndian16();var Ud=lc.getByte();var Ce=
lc.getPosition()+Td+7;if(lc.has(Td+7)){switch(Ud){case 0:var Vd=void 0,Ac=lc,De=Ac.getByte();Ac.skipPosition(1);var Dd=Ac.getByte(),td=Ac.getByte(),ud=Ac.getByte(),vd=Math.floor((ud+7)/8),Ee=Ac.getLittleEndian16(),Fe=Ac.getLittleEndian16(),Ge=Ac.getPosition();Ac.skipPosition(Ee);W!=ud&&(svGlobal.logger.warn("Server limited colour depth to "+ud+" bits"),A(ud,!0));var Ed=Array(Dd*td*vd);Ed[0]=0;for(var Fd=Dd*vd,wd=0;wd<td;wd++)Vd=Ge+(td-wd-1)*Fd,Ac.copyToByteArray(Ed,wd*Fd,Vd,Fd);var He=cd(Ed,vd);T.putBitmap(De,
Fe,new rdpcodecs.Bitmap(He,Dd,td,0,0,8*vd,null,0));break;case 1:svGlobal.logger.info("TODO: color cache");break;case 2:var Wd=void 0,id=void 0,Fb=lc,Ie=sd,Je=Fb.getByte();Fb.getByte();var Gd=Fb.getByte(),Hd=Fb.getByte(),jd=Fb.getByte(),Ke=Math.floor((jd+7)/8),Le=Fb.getLittleEndian16(),Me=Fb.getLittleEndian16();W!=jd&&(svGlobal.logger.warn("Server limited colour depth to "+jd+" bits"),A(jd,!0));0!=(Ie&1024)?id=Le:(Fb.skipPosition(2),id=Fb.getLittleEndian16(),Fb.skipPosition(2),Fb.skipPosition(2));
Wd=1!=Ke?Gc(Gd,Hd,id,Fb.getData(),Fb.getPosition()):dd(Gd,Hd,id,Fb.getData(),Fb.getPosition());var Ne=Fb.getBytes(id);T.putBitmap(Je,Me,new rdpcodecs.Bitmap(Wd,Gd,Hd,0,0,jd,Ne,1));break;case 3:var Xd=void 0,Id=void 0,Jd=void 0,Yd=void 0,Zd=void 0,$d=void 0,ae=void 0,be=void 0,ce=void 0,Qc=lc;be=Qc.getByte();ae=Qc.getByte();for(var de=0;de<ae;de++)$d=Qc.getLittleEndian16(),Zd=Qc.getLittleEndian16(),Yd=Qc.getLittleEndian16(),Jd=Qc.getLittleEndian16(),Id=Qc.getLittleEndian16(),Xd=Id*Math.floor((Jd+7)/
8)+3&-4,ce=new h(Zd,Yd,Jd,Id,Qc.getBytes(Xd)),T.putFont(be,$d,ce);break;case 4:Ha(lc,sd,!1);break;case 5:Ha(lc,sd,!0);break;case 7:svGlobal.logger.info("CacheBrush...=");break;case 8:var ed=void 0,Gb=lc,ee=sd&7,fe=Gb.getLittleEndian16();Gb.skipPosition(8);var xd=Gb.getByte();W!=xd&&(svGlobal.logger.warn("Server limited colour depth to "+xd+" bits"),A(xd,!0));Gb.skipPosition(2);var Kd=Gb.getByte(),kd=Gb.getLittleEndian16(),ld=Gb.getLittleEndian16(),ge=Gb.getLittleEndian32(),he=Gb.getPosition();if(1==
Kd){Uc(Gb,xd,kd,ld);var Oe=yc.getData(),Pe=yc.getDataSize();ed=new Uint32Array(Pe);rdpcodecs.flipimage(Oe,0,ed,kd,ld,1);var Qe=Gb.getPosition()-he;Gb.setPosition(he);var Re=Gb.getBytes(Qe);T.putBitmap(ee,fe,new rdpcodecs.Bitmap(ed,kd,ld,0,0,32,Re,2))}else if(0==Kd){var ie=rdpBitmap.byte2int(Gb.getData(),ge,Gb.getPosition());ed=new Uint32Array(ie.length);rdpcodecs.flipimage(ie,0,ed,kd,ld,1);T.putBitmap(ee,fe,new rdpcodecs.Bitmap(ed,kd,ld,0,0,32,null,0))}else svGlobal.logger.warn("XXX invalid codec id:"+
Kd);Gb.skipPosition(ge);break;default:svGlobal.logger.warn("invalid second Order, type="+Ud)}lc.setPosition(Ce)}}z++}}function Ha(a,t,z){var H;var E=t&7;var I=((t&120)>>3)-2;t=(t&65408)>>7;nb!=I&&(A(8*I,!0),svGlobal.logger.warn("Server limited colour depth to "+I+" bytes"));0!=(t&2)&&a.skipPosition(8);if(0!=(t&1))var P=H=qc.readVar2Bytes(a);else H=qc.readVar2Bytes(a),P=qc.readVar2Bytes(a);var M=qc.readVar4Bytes(a);var ba=qc.readVar2Bytes(a);z&&0==(t&8)&&a.skipPosition(8);if(z){z=1!=I?Gc(H,P,M,a.getData(),
a.getPosition()):dd(H,P,M,a.getData(),a.getPosition());a=a.getBytes(M);if(!z){svGlobal.logger.warn("Failed to decompress bitmap data");return}H=new rdpcodecs.Bitmap(z,H,P,0,0,8*I,a,1)}else{z=Array(H*P*I);z[0]=0;var ja=a.getPosition(),sa=H*I;for(M=0;M<P;M++){var ab=ja+(P-M-1)*sa;a.copyToByteArray(z,M*sa,ab,sa)}a=cd(z,I);H=new rdpcodecs.Bitmap(a,H,P,0,0,8*I,null,0)}T.putBitmap(E,ba,H);0!=(t&2)&&svGlobal.logger.warn("XXX:TODO, persistent")}function F(a,t,z){return z?(a=a.getByte()<<24>>24,t+a):t=a.getLittleEndian16()<<
16>>16}function Db(a){var t;var z=t=a.getByte();t=a.getByte();z|=t<<8;t=a.getByte();return z|t<<16}function Hb(a){for(var t,z,H,E,I,P,M,ba,ja,sa=a.getLittleEndian16(),ab=0;ab<sa;ab++)if(t=a.getLittleEndian16(),z=a.getLittleEndian16(),H=a.getLittleEndian16(),E=a.getLittleEndian16(),I=a.getLittleEndian16(),P=a.getLittleEndian16(),M=a.getLittleEndian16(),ba=a.getLittleEndian16(),ja=a.getLittleEndian16(),H=H-t+1,E=E-z+1,W!=M&&(svGlobal.logger.warn("Server limited colour depth to "+M+" bits"),A(M,!0)),
0==ba){ba=I*nb;ja=P*ba;M=new Uint8Array(ja);for(var ta=a.getPosition(),pa=0;pa<P;pa++)md(a.getData(),ta,M,(P-pa-1)*ba,ba),ta+=ba;a.skipPosition(ja);M=cd(M,nb);T.setRGBs(t,z,H,E,M,0,I)}else 0!=(ba&1024)?M=ja:(a.skipPosition(2),M=a.getLittleEndian16(),a.skipPosition(4)),ba=a.getData(),ja=M,ta=a.getPosition(),pa=z,z=E,E=nb,1>H*z*I*P||(1!=E?T.setRGBs(t,pa,H,z,Gc(I,P,ja,ba,ta),0,I):(P=dd(I,P,ja,ba,ta),ba=pa,E=cd(P,E),T.setRGBs(t,ba,H,z,E,0,I))),a.skipPosition(M)}function kb(){da=0;ha=N-1;na=0;ra=Q-1}function Vb(a,
t,z,H,E,I){var P=Math.min(a,z),M=Math.max(a,z),ba=Math.min(t,H),ja=Math.max(t,H);E=mb(E);if(!(P>=da&&M<=ha&&ba>=na&&ja<=ra)){if(P>ha||M<da||ba>ra||ja<na)return;if(a==z)t>H&&(P=t,t=H,H=P),t<na&&(t=na),H>ra&&(H=ra);else if(t==H)a>z&&(P=a,a=z,z=P),a<da&&(a=da),z>ha&&(z=ha);else{P=ua._line;P.set(a,t,z,H);M=P.intersection(da,na,ha,na);ba=[];M&&ba.push(M.x,M.y);(M=P.intersection(ha,na,ha,ra))&&ba.push(M.x,M.y);(M=P.intersection(da,ra,ha,ra))&&ba.push(M.x,M.y);(M=P.intersection(da,na,da,ra))&&ba.push(M.x,
M.y);2==ba.length&&(a>=da&&a<=ha&&t>=na&&t<=ra?ba.push(a,t):z>=da&&z<=ha&&H>=na&&H<=ra&&ba.push(z,H));if(4!=ba.length)return;a=ba[0];t=ba[1];z=ba[2];H=ba[3]}}12==I?T.drawLine(a,t,z,H,E):T.drawLineExt(a,t,z,H,E,I)}function bd(a,t){var z=a[t[0]++]&255,H=z&128;z=0!=(z&64)?z|-64:z&63;0!=H&&(z=z<<8|a[t[0]++]&255);return z}function U(a){if(X)if(svGlobal.logger.warn("closed "+(X.sessionInfo.appInfo?X.sessionInfo.appInfo.numericId:0)),X&&(Pb=!1),Wc)svGlobal.logger.info("Req credential");else{ua=null;"undefined"!=
typeof rdp8bulkData&&rdp8bulkData.release();yc=Uc=nc=K=null;try{if(null!=Qb&&(Qb.exit(),Qb=null),X.onclose)X.onclose(Rb);else svGlobal.logger.info("onclose: null")}catch(t){}Xb=null;ya&&(ya.onopen=null,ya.onmessage=null,ya.onclose=null,ya=ya.onerror=null);Ic=null;Qa&&(Qa.release(),Qa=null);Sa&&(Sa.release(),Sa=null);X=null}}function od(a,t,z,H){switch(t){case 16:t=a>>8&248;var E=a>>3&252;a=a<<3&255;z[H]=t|t>>5;z[H+1]=E|E>>6;z[H+2]=a|a>>5;z[H+3]=255;break;case 15:t=a>>7&248;E=a>>2&248;a=a<<3&255;z[H]=
t|t>>5;z[H+1]=E|E>>5;z[H+2]=a|a>>5;z[H+3]=255;break;case 8:z[H]=ua.paletteRdp[0][a];z[H+1]=ua.paletteRdp[1][a];z[H+2]=ua.paletteRdp[2][a];z[H+3]=255;break;case 32:z[H]=a&255,z[H+1]=a>>8&255,z[H+2]=a>>16&255,z[H+3]=a>>24&255;default:z[H]=a&255,z[H+1]=a>>8&255,z[H+2]=a>>16&255,z[H+3]=255}}function cd(a,t){var z=a.length/t>>0,H=new Uint32Array(z),E=mb;switch(t){case 1:for(var I=0;I<z;I++)H[I]=E(a[I]);break;case 2:for(I=0;I<z;I++)H[I]=E(a[2*I+1]<<8|a[2*I]);break;default:for(I=0;I<z;I++)H[I]=E(a[I*t+2]<<
16)|a[I*t+1]<<8|a[I*t]}return H}this.sessionInfo={domain:"",userName:"",sessionId:0,joinedSessions:[],suppressOutput:!1,appInfo:null};this.mode=0;this.remoteAppLogin=!0;var X=this,Rb=!1,Wc=!1,rc="object"==typeof K?K:null,Ia=rc?{}:hi5.string.queryToObj(K.substring(K.indexOf("?")+1)),md=hi5.Arrays.arraycopy,za=null,Qa=new BulkData,Sa=function(a){return"on"==a||"true"==a}(Ia.decompressingRDP61)?new Bulk61Data:null;this.protocol=rc?"":K.substring(0,K.indexOf("://")).toLowerCase();this.setProfiler=function(a){za=
a};this.getProfiler=function(){return za};this.gateway=function(){if(rc)return"";var a=K.lastIndexOf("/RDP?");-1==a&&(a=K.lastIndexOf("/JOIN?"));-1==a&&(a=K.lastIndexOf("/PLAY?"));return K.substring(0,a).replace(/wss:\/\//ig,"https://").replace(/ws:\/\//ig,"http://")}();this.getGatewayAddr=function(){var a=X.gateway;X.ongetgatewayaddress&&(a=X.ongetgatewayaddress(a));return a};var Cc="object"==typeof K||0<K.indexOf("/PLAY?"),fd=!Cc&&0<K.indexOf("invitation=");if(fd){var fb=decodeURIComponent(K),fa=
fb.indexOf(' USERNAME="');0<fa&&(fa+=11,fb=fb.substring(fa,fb.indexOf('"',fa)),K+="&novice="+fb+"&server="+fb);K+="&mapClipboard=on"}if(Cc)this.mode=1,rc?K="":(N=640,Q=480);else if(0<K.indexOf("/JOIN?")||fd)this.mode=2;Ia.symlink&&Ia.parameters&&hi5.string.queryToObj(Ia.parameters,Ia);Ia.gateway||(K+="&gateway="+encodeURIComponent(X.gateway));"useSSL"in Ia||(K+="&useSSL="+("wss"==X.protocol));this.getDisplayName=La;this.server=La();this.port=parseInt(Ia.port,10);this.getURL=function(){return K};this.getColor=
function(){return W};var $c=hi5.graphic.Rectangle,va=0<K.indexOf("nocurosr=on"),Zc=0<K.indexOf("startProgram=app");K.indexOf("mapDisk=on");this.isRemoteApp=function(){return Zc};var ya=null,Pb=!1,Z=!1,da=0,na=0,ha=N-1,ra=Q-1,nb=0,Qb=null,mb=aa,Gc=rdpBitmap.decompressInt16,dd=rdpBitmap.decompress;A(W,!0);this.setColor=function(a){A(a,!1)};this.setResolution=function(a,t){q(a,t,!1)};var sc={tag:0,channels:0,bitsPerSample:0,samplePerSec:22050,toStream:function(a){a.setLittleEndian16(this.tag);a.setLittleEndian16(this.channels);
a.setLittleEndian16(this.bitsPerSample);a.setLittleEndian32(this.samplePerSec)},fromStream:function(a){this.tag=a.getLittleEndian16();this.channels=a.getLittleEndian16();this.bitsPerSample=a.getLittleEndian16();this.samplePerSec=a.getLittleEndian32()}};this.setAudioFormat=function(a){sc.tag=a.tag;sc.channels=a.channels;sc.samplePerSec=a.samplePerSec;sc.bitsPerSample=a.bitsPerSample};this.running=function(){return Pb};this.setJoinMode=function(a){d("8E1"+a)};this.setJoinCloseMode=function(a){d("8EB3\t"+
a)};this.refuseControl=function(a){d("8E3"+a)};this.giveControl=function(a){d("8E4"+a)};this.pauseSession=function(a,t){d("8EB"+(t?1:0)+"\t"+a)};this.closeSession=function(a){d("8EB2\t"+a)};this.requestControl=function(){d("8E2")};this.saveSession=function(a){d("8E9"+(a.save?1:0)+"\t"+(a.timeout||0)+"\t"+(a.id||0))};this.allowJoin=function(a,t){d("8EA"+a+"\t"+(t?1:0))};var nd=new function(){function a(){if(z&&0<z.length){var E=z.shift();nd.sendSingleKey(E.down,E.key);0<z.length?setTimeout(a,H):z=
null}}var t={" ":57,space:57,pgup:201,pageup:201,pgdn:209,pagedown:209,end:207,home:199,left:203,up:200,right:205,down:208,printscreen:183,insert:210,del:211,"delete":211,altgr:184,windows:219,windowsright:220,context:221,esc:1,backspace:14,tab:15,enter:28,meta:29,command:29,ctrl:29,shift:42,alt:56,capslock:58,f1:59,f2:60,f3:61,f4:62,f5:63,f6:64,f7:65,f8:66,f9:67,f10:68,f11:87,f12:88,numlock:69,scrolllock:70,add:78};this.sendSingleKey=function(E,I){var P=t[I.toLowerCase()];P?X.writeScancode(E,P):
(P=I.length,0!=P&&(1==P?X.writeKeyCode(E,I.toUpperCase().charCodeAt(0)):E&&X.writeText(I)))};var z=null,H=0;this.sendKeyComb=function(E,I){E=E.split("+");var P=E.length,M;if(0!=P){var ba=null,ja=[];for(M=0;M<P;M++){var sa=E[M];""==sa&&""==ba&&(sa="Add");""!=sa&&ja.push({key:sa,down:!0});ba=sa}P=ja.length;for(M=P-1;0<=M;M--)ja.push({key:ja[M].key,down:!1});if(I)z=ja,H=I,a();else for(M=0,P=ja.length;M<P;M++)nd.sendSingleKey(ja[M].down,ja[M].key)}}};this.writeRawInput=function(a){d(a);if(X.onactivity)X.onactivity(a);
if(Qb&&a.substring){var t=a.substring(0,2);a=a.substring(2);if("80"==t||"81"==t||"82"==t||"83"==t){a=a.split("\t");var z=new Uint8Array(7),H=0;var E=parseInt(a[0]);var I=parseInt(a[1]);switch(parseInt(t,16)){case 128:H=("0"==a[2]?4096:8192)|32768;break;case 129:H="0"==a[2]?4096:8192;break;case 130:H=2048;break;case 131:H="0"==a[2]?33408:33664}z[0]=32;z[1]=H&255;z[2]=H>>8;z[3]=E&255;z[4]=E>>8;z[5]=I&255;z[6]=I>>8;Qb.add(new RecordingObj(z,0,7,60))}}};var ua=new L,Wb=0;this.resetStatus=C;this.notify=
function(a,t){a="8E6"+a;t&&(a+="\t"+t.join(";"));d(a)};this.run=function(){v()};this.getDesktop=function(){return T};var Xb=new hi5.DataBuffer([],0,0);this.suppressOutput=function(a){if(!X.sessionInfo.suppressOutput)return!1;void 0==a&&(a=!0);var t=new Uint8Array(a?3:11);t[0]=146;t[1]=3;t[2]=a?1:0;a||(t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=N-1,t[8]=N-1>>8,t[9]=Q-1,t[10]=Q-1>>8);ya.send(t.buffer);return!0};this.refreshOutput=function(a,t,z,H){var E=new Uint8Array(z?11:3);E[0]=146;E[1]=3;E[2]=2;z&&(E[3]=
a,E[4]=a>>8,E[5]=t,E[6]=t>>8,E[7]=z,E[8]=z>>8,E[9]=H,E[10]=H>>8);ya.send(E.buffer)};var Ic=new function(){var a=0,t=0,z=[0],H=new hi5.DataBuffer(z,0,0);this.addFragement=function(E,I){md(E.getData(),E.getPosition(),z,t,I);t+=I;a+=I};this.clearFragements=function(){H.setPosition(0);H.markEnd(a);t=a=0;return H}},nc=new rdpcodecs.RemoteFX(wa),yc=new rdpcodecs.NSCodec,Uc=yc.process,Cb=[1,2,1,0,0,0,0,1,1,2,1,1,0,2,3,1,2,2,2,2,1,2,1,0,2,1,2,3],qc={readVar4Bytes:function(a){var t=a.getByte(),z=0;switch((t&
192)>>6){case 0:z=t&63;break;case 1:z=(t&63)<<8|a.getByte();break;case 2:z=(t&63)<<16;t=a.getByte();z|=t<<8;t=a.getByte();z|=t;break;case 3:z=(t&63)<<24,t=a.getByte(),z|=t<<16,t=a.getByte(),z|=t<<8,t=a.getByte(),z|=t}return z},readVar2Bytes:function(a){var t=a.getByte();return 0!=(t&128)?(t&127)<<8|a.getByte():t}};this._unload=U;this.close=function(){Rb=!0;svGlobal.logger.info("closing...");if(ya&&ya.readyState!=WebSocket.CLOSING&&ya.readyState!=WebSocket.CLOSED)try{for(;ya&&ya.readyState!=WebSocket.CLOSING&&
ya.readyState!=WebSocket.CLOSED;)Cc||ya.readyState!=WebSocket.OPEN||d("85-1"),ya.close()}finally{U()}else U()}}
function BulkData(){function K(e){e=(e&1431655765)<<1|e>>>1&1431655765;e=(e&858993459)<<2|e>>>2&858993459;e=(e&252645135)<<4|e>>>4&252645135;if(0==e>>>8)return e;e=(e&16711935)<<8|e>>>8&16711935;return 0==e>>>16?e:(e&65535)<<16|e>>>16&65535}function N(e,n,w,g){var f=0,y=0,m,u,L=0!=(g&1),C=W;if(0==(g&32))return wa=0,O=w,0;0!=(g&64)&&(Q=0);if(0!=(g&128)){for(g=65536;0<=--g;)C[g]=0;Q=0}O=wa=0;wa=u=m=g=Q;if(0==w)return 0;w+=y;do{if(0==f){if(y>=w)break;g=e[n+y++]<<24;f=8}if(0<=g){if(8>f){if(y>=w){if(0!=
g)return-1;break}g|=e[n+y++]<<24-f;f+=8}if(65536<=m)return-1;C[m++]=g>>>24&255;g<<=8;f-=8}else{g<<=1;if(0==--f){if(y>=w)return-1;g=e[n+y++]<<24;f=8}if(0<=g){if(8>f){if(y>=w)return-1;g|=e[n+y++]<<24-f;f+=8}if(65536<=m)return-1;C[m++]=(g>>>24|128)&255;g<<=8;f-=8}else{g<<=1;if(--f<(L?3:2)){if(y>=w)return-1;g|=e[n+y++]<<24-f;f+=8}if(L)switch(g>>>29){case 7:for(;9>f;f+=8){if(y>=w)return-1;g|=e[n+y++]<<24-f}g<<=3;var v=g>>>26;g<<=6;f-=9;break;case 6:for(;11>f;f+=8){if(y>=w)return-1;g|=e[n+y++]<<24-f}g<<=
3;v=(g>>>24)+64;g<<=8;f-=11;break;case 5:case 4:for(;13>f;f+=8){if(y>=w)return-1;g|=e[n+y++]<<24-f}g<<=2;v=(g>>>21)+320;g<<=11;f-=13;break;default:for(;17>f;f+=8){if(y>=w)return-1;g|=e[n+y++]<<24-f}g<<=1;v=(g>>>16)+2368;g<<=16;f-=17}else switch(g>>>30){case 3:if(8>f){if(y>=w)return-1;g|=e[n+y++]<<24-f;f+=8}g<<=2;v=g>>>26;g<<=6;f-=8;break;case 2:for(;10>f;f+=8){if(y>=w)return-1;g|=e[n+y++]<<24-f}g<<=2;v=(g>>>24)+64;g<<=8;f-=10;break;default:for(;14>f;f+=8){if(y>=w)return-1;g|=e[n+y++]<<24-f}v=(g>>>
18)+320;g<<=14;f-=14}if(0==f){if(y>=w)return-1;g=e[n+y++]<<24;f=8}if(0<=g){var G=3;g<<=1;f--}else{var J=L?14:11;do{g<<=1;if(0==--f){if(y>=w)return-1;g=e[n+y++]<<24;f=8}if(0<=g)break;if(0==--J)return-1}while(1);G=(L?16:13)-J;g<<=1;if(--f<G)for(;f<G;f+=8){if(y>=w)return-1;g|=e[n+y++]<<24-f}J=G;G=g>>>32-J&~(-1<<J)|1<<J;g<<=J;f-=J}if(65536<=m+G)return-1;v=m-v&(L?65535:8191);do C[m++]=C[v++];while(0!=--G)}}}while(1);Q=m;wa=u;O=m-u;return 0}var Q=0,W=new Uint8Array(65536),T=new Int32Array(8),wa=0,O=0,La=
[6,6,6,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,9,8,9,9,9,9,8,8,9,9,9,9,9,9,8,9,9,10,9,9,9,9,9,9,9,10,9,10,10,10,9,9,10,9,10,9,10,9,9,9,10,10,9,10,9,9,8,9,9,9,9,10,10,10,9,9,10,10,10,10,10,10,9,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,9,7,9,9,10,9,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,10,10,10,10,10,10,11,10,10,10,10,10,10,10,10,10,10,10,10,
10,9,10,10,10,10,10,9,10,10,10,10,10,9,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,8,9,9,10,9,10,10,10,9,10,10,10,9,9,8,7,13,13,7,7,10,7,7,6,6,6,6,5,6,6,6,5,6,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,8,5,6,7,7],aa=[123,65311,65293,65063,65024,65285,65303,65128,197,65031,65299,65216,65288,65048,65307,65203,65027,162,65090,65296,65035,65026,65169,65305,65152,233,65082,65301,65042,87,65239,65309,65294,65077,65129,65314,65304,65146,65025,65315,65300,65268,
65204,65033,65308,65220,65289,65120,65136,65298,65029,65170,65185,65306,65039,65287,65110,65302,65282,65240,65256,65310,65053,59,65535,65286,65535,65137,65161,65535,65535,65068,65067,65056,65535,65211,65231,65032,65535,65248,65037,65535,65177,65535,65028,65194,65097,65535,65047,65121,65247,65535,65279,65270,65100,65535,65535,65159,65535,65316,65535,65084,65138,65535,65535,65230,65535,65278,65535,65059,65212,65034,65193,65535,65041,65535,65154,65535,65030,65178,65269,65535,65058,65101,65119,65535,
65283,65249,65535,65226,65228,65535,65049,65535,65207,65535,65535,65155,65065,65535,65535,65535,65132,65535,65261,65535,65535,65094,65116,65045,65535,65243,65190,65535,65535,65092,65535,65036,65535,65173,65276,65535,65535,65208,5833,65535,65264,65535,65080,65535,65535,65133,65150,65535,65535,65535,65535,65115,65244,65535,65535,65260,65095,65055,65535,65151,65174,65535,65535,65189,65535,65040,65088,65074,65215,65535,65535,65236,65265,65535,65535,65535,65141,65535,65535,65165,65073,65535,65125,65051,
65535,65252,65275,65535,65535,65106,65535,65038,65535,65181,65199,65535,65535,65105,65235,65535,65312,65535,65071,65535,65535,65217,65164,65535,65535,65535,65087,65535,65535,65142,65535,65274,65107,65061,65535,65124,65253,65535,65535,65198,65535,65043,65535,65160,65182,65535,65091,65535,65535,65188,65171,65535,65535,65535,65085,65535,65535,65259,65241,65535,65044,65114,65535,65064,65149,65535,65535,65130,65535,65535,65281,65222,65224,65535,65535,65205,65535,65535,65535,65172,65144,65535,65535,65535,
65187,65535,65535,65242,65112,65535,65054,65093,65258,65535,65131,65535,65535,65079,65535,65535,65535,65148,65206,65535,65535,65272,65535,65535,65535,65223,65179,65535,65535,65535,65104,65535,65535,65197,65250,65535,65050,65123,65102,65535,65535,65273,65535,65139,65535,65535,65535,65072,65163,65535,65535,65213,65070,256,65535,65262,65234,65535,65535,65535,65196,65535,65535,65180,65156,65535,65060,65103,65271,65535,65535,65251,65122,65535,65535,65535,65535,65162,65140,65535,65535,65086,65535,65535,
65535,65233,65214,65535,65535,65069,65535,65098,65267,65535,65535,65245,65118,65046,65535,65096,65192,65535,65195,65175,65535,65535,65232,65535,65535,65229,65209,65535,65535,65535,65066,65535,65535,65158,65134,65535,65535,65535,65246,65535,65535,65117,65099,65057,65535,65263,65176,65535,65535,65153,65535,65535,65535,65191,65535,65210,65277,65535,65535,65535,65227,65535,65535,65135,65081,65535,65535,65535,65157,65535,268,65254,65127,65052,65535,65108,65202,65535,65535,65183,65535,65535,65535,65113,
65201,65535,65218,65535,65535,65078,65266,65535,65535,65238,65143,65535,65535,65535,65075,65535,65535,65167,65109,65062,266,65284,65255,65535,289,65126,65535,65535,65535,65200,65184,65535,271,65168,65535,65535,65237,65535,65535,65219,65076,65535,65535,65535,65166,65535,273,65145,65089,267],Y=[511,0,508,448,494,347,486,482],r=[4,2,3,4,3,4,4,5,4,5,5,6,6,7,7,8,7,8,8,9,9,8,9,9,9,9,9,9,9,9,9,9],B=[4065,4064,4066,4072,14,4069,4068,4074,4081,4067,21,4071,4079,70,4080,4077,4095,4087,4091,25,4093,4084,300,
4075,4094,4086,4090,137,4092,4083,4088,4082],A=[0,4,10,19],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,32769,49153,65537],x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,6,6,8,8,14,14],p=[2,3,4,5,6,7,8,9,10,12,14,16,18,22,26,30,34,42,50,58,66,82,98,114,130,194,258,514,2,2],l=new hi5.DataBuffer(W,0,1),k=hi5.Arrays.arraycopy,h=hi5.Arrays.fill;this.reset=
function(){Q=0;W=new Uint8Array(65536);O=wa=0;l=new hi5.DataBuffer(W,0,1)};this.release=function(){W=l=T=null};this.getArrayBuffer=function(){return W.buffer.slice(wa,wa+O)};this.getData=function(){l.setPosition(wa);l.markEnd(wa+O);return l};this.toPDU=function(){var e=new Uint8Array(65576);e[0]=29;e[2]=1;e[3]=2;e[4]=Q;e[5]=Q>>8;e[6]=Q>>16;e[7]=Q>>24;e.set(W,8);e.set(new Uint8Array(T.buffer),65544);return e};this.fromStream=function(e){Q=e.getLittleEndian32();var n=e.getPosition();W.set(e.getData().subarray(n,
n+65536));e.skipPosition(65536);for(n=0;8>n;n++)T[n]=e.getLittleEndian32()};this.getDecompressedLength=function(){return O};this.dec5=function(e,n,w,g){return N(e,n,w,g)};this.dec=function(e,n,w,g){if(2==(g&15)){var f=W,y=T,m=Q,u=0,L=n,C=0,v=0,G=0;O=0;wa=m;0!=(g&64)&&(k(f,m-32768,f,0,32768),wa=Q=m=32768);0!=(g&128)&&(m=0,h(f,0,65536,0),h(y,0,y.length,0),wa=0);if(32!=(g&32))k(e,0,f,m,w),m+=w,O=m-Q;else{var J=0;for(var D=n+w;L<D&&!(G=e[L++],u|=G<<J,v+=8,J+=8,32<=J););u=K(u);L<D?(C=K(e[L++])&255,w=8):
w=0;for(;8<=v;){n=0;for(J=5;13>=J;J++)if(12!=J){G=K(u&4294967295<<32-J);var b=aa[G&511^G>>>9^G>>>4^G>>>7];0!=(b^G)>>>9?G=b&511:(b=(G>>>8^G&255)>>>2&15,0!=G>>>9&&(b=~b),G=aa[Y[(b&65535)%12]]);if(J==La[G])break}u<<=J;v-=J;if(256>G)f[m++]=G&255;else if(256<G&&289>G){b=G-257;J=q[b];n=d[b]-1;0!=J&&(n+=K(u&4294967295<<32-J));b=y;var V=n;var xa=b[2]|b[3]<<16;xa<<=16;b[2]=xa&65535;b[3]=xa>>>16&65535;var oa=b[0]|b[1]<<16;xa|=oa>>>16;b[2]=xa&65535;b[3]=xa>>>16&65535;oa=oa<<16|V;b[0]=oa&65535;b[1]=oa>>>16&65535;
u<<=J;v-=J}else if(288<G&&293>G)b=G-289,n=y[b],0!=b&&(J=y,V=J[0],J[0]=J[b],J[b]=V);else if(256==G)break;for(J=32-v;0<J;)if(w<J)G=C>>>8-w,u|=G<<32-v-w,v+=w,J-=w,L<D?(C=K(e[L++])&255,w=8):w=J=0;else{w>J?(u|=C>>>8-J,C<<=J,C&=255,w-=J,v=32):(u|=C>>>8-J,v=32,L<D?(C=K(e[L++])&255,w=8):w=0);break}if(0!=n){for(J=2;9>=J&&(G=K(u&4294967295<<32-J),b=B[G&31^G>>>5^G>>>9],0!=(b^G)>>>5?G=b&31:(G=G>>>4&15,G=B[A[(G^G>>>2^G>>>3)&3]]),J!=r[G]);J++);u<<=J;v-=J;J=x[G];b=p[G];0!=J&&(b+=K(u&4294967295<<32-J));u<<=J;v-=
J;V=m-n;J=b>n?n:b;for(G=0;0<J;)f[m++]=f[V++],J--;for(;b>n;)G=G>=n?0:G,f[m++]=f[V+G++],b--;for(J=32-v;0<J;)if(w<J)G=C>>>8-w,u|=G<<32-v-w,v+=w,J-=w,L<D?(C=K(e[L++])&255,w=8):w=J=0;else{w>J?(u|=C>>>8-J,C<<=J,C&=255,w-=J,v=32):(u|=C>>>8-J,v=32,L<D?(C=K(e[L++])&255,w=8):w=0);break}}}O=0!=(g&128)?m:m-Q}Q=m;return 0}return N(e,n,w,g)}}
function Bulk61Data(){var K=0,N=new Uint8Array(2E6),Q=0,W=0,T=new hi5.DataBuffer(N,0,1),wa=hi5.Arrays.arraycopy;this.reset=function(){K=0;N=new Uint8Array(2E6);W=Q=0;T=new hi5.DataBuffer(N,0,1)};this.release=function(){N=T=null};this.getArrayBuffer=function(){return N.buffer.slice(Q,Q+W)};this.getData=function(){T.setPosition(Q);T.markEnd(Q+W);return T};this.toPDU=function(){var O=new Uint8Array(2000008);O[0]=29;O[2]=1;O[3]=9;O[4]=K;O[5]=K>>8;O[6]=K>>16;O[7]=K>>24;O.set(N,8);return O};this.fromStream=
function(O){K=O.getLittleEndian32();var La=O.getPosition();N.set(O.getData().subarray(La,La+2E6))};this.getDecompressedLength=function(){return W};this.dec=function(O,La,aa,Y){0!=(Y&4)&&(K=0);Q=K;W=0;var r=La;if(0==(Y&2)){var B=O[r++]|O[r++]<<8;Y=r+8*B;for(var A=0;A<B;A++){var q=O[r++]|O[r++]<<8,d=O[r++]|O[r++]<<8,x=O[r++]|O[r++]<<8|O[r++]<<16|O[r++]<<24;var p=d-W;wa(O,Y,N,K,p);K+=p;Y+=p;W=d;for(p=0;p<q;p++)N[K++]=N[x++],W++}}else Y=r;if(p=La+aa-Y)wa(O,Y,N,K,p),W+=p,K+=p;return 0}}var rdpBitmap=rdpcodecs.bitmap;
function MSGSMEncoder(){function K(b,V){return-32768==b&&-32768==V?32767:b*V>>15<<16>>16}function N(b,V){return-32768==b&&-32768==V?32767:b*V+16384>>15<<16>>16}function Q(b,V){if(0>=b){if(0<=V)return b+V;b=-(b+1)-(V+1);return 2147483647<=b?-2147483648:-b-2}if(0>=V)return b+V;b+=V;return 2147483647<b?2147483647:b}function W(b){if(0>b){if(-1073741824>=b)return 0;b=~b}return(0!=(b&4294901760)?0!=(b&4278190080)?-1+y[255&b>>24]:7+y[255&b>>16]:0!=(b&65280)?15+y[255&b>>8]:23+y[255&b])<<16>>16}function T(b,
V){return 16<=V?0>b?-1:-0:-16>=V?0:0>V?b<<-V<<16>>16:b>>V<<16>>16}function wa(b,V,xa,oa,Ja,Aa){b=K(b<<16>>16,Ja[Aa]);V=b+(V<<16>>16);V=(-32768>V?-32768:32767<V?32767:V)+256;b=(-32768>V?-32768:32767<V?32767:V)>>9<<16>>16;Ja[Aa]=(b>xa?xa-oa:b<oa?0:b-oa)<<16>>16}function O(b,V){b=D[b+3*V]>>2<<16>>16;return b*b}function La(b,V,xa,oa,Ja,Aa,Ha){b=b[xa]+Aa;Ja=((-32768>b?-32768:32767<b?32767:b)<<26>>16)-(Ja<<17>>16);oa=N(Ha,-32768>Ja?-32768:32767<Ja?32767:Ja);Ha=oa+oa;V[xa]=-32768>Ha?-32768:32767<Ha?32767:
Ha}function aa(b){for(var V,xa,oa=0;8>oa;oa++)0>b[oa]?(V=(-32768==b[oa]?32767:-b[oa])<<16>>16,xa=(V>>2<<16>>16)+26112,b[oa]=-(11059>V?V<<1:20070>V?V+11059:-32768>xa?-32768:32767<xa?32767:xa)<<16>>16):(V=b[oa],xa=(V>>2<<16>>16)+26112,b[oa]=(11059>V?V<<1:20070>V?V+11059:-32768>xa?-32768:32767<xa?32767:xa)<<16>>16)}function Y(b,V,xa,oa,Ja){for(var Aa=b.u,Ha,F,Db,Hb,kb,Vb;0!=xa;){xa--;Ha=Hb=oa[Ja];for(Vb=0;8>Vb;Vb++)Db=Aa[Vb],kb=V[Vb],Aa[Vb]=Hb,F=N(kb,Ha),Hb=Db+F,Hb=-32768>Hb?-32768:32767<Hb?32767:Hb,
F=N(kb,Db),Ha+=F,Ha=-32768>Ha?-32768:32767<Ha?32767:Ha;oa[Ja++]=Ha}b.u=Aa}var r=[6554,16384,26214,32767],B=[29128,26215,23832,21846,20165,18725,17476,16384],A=[18431,20479,22527,24575,26623,28671,30719,32767],q=new function(){this.dp0=new Int16Array(280);this.mp=this.l_z2=this.z1=0;this.u=new Int16Array(8);this.larpp=[new Int16Array(8),new Int16Array(8)];this.j=0;this.nrp=40;this.v=new Int16Array(9);this.msr=0},d=new Int16Array(8),x=new Int16Array(4),p=new Int16Array(4),l=new Int16Array(4),k=new Int16Array(4),
h=new Int16Array(52),e=new Int16Array(160),n=new Uint8Array(33),w=0,g=hi5.Arrays.arraycopy;this.encode=function(b,V,xa,oa){for(var Ja=V,Aa,Ha=0;160>Ha;Ha++)Aa=b[Ja++],e[Ha]=0>Aa?32768*Aa:32767*Aa;f=!f;for(var F=0,Db=0,Hb=0,kb=0,Vb=120,bd=new Int16Array(50),U=new Int16Array(160),od=0,cd=0,X=q.z1,Rb=q.l_z2,Wc=q.mp,rc,Ia,md,za,Qa,Sa,Cc=160;0!=Cc;){Cc--;za=e[od++]>>3<<2<<16>>16;rc=za-X<<16>>16;X=za;Qa=rc;Qa<<=15;Ia=Rb>>15<<16>>16;md=Rb-(Ia<<15)<<16>>16;Qa+=N(md,32735);Sa=32735*Ia;Rb=Q(Sa,Qa);Sa=Q(Rb,
16384);Ia=N(Wc,-28180);Wc=Sa>>15<<16>>16;var fd=Wc+Ia;U[cd++]=-32768>fd?-32768:32767<fd?32767:fd}q.z1=X;q.l_z2=Rb;q.mp=Wc;var fb,fa=0,$c=0,va;for(va=0;159>=va;va++){var Zc=U[va]+0;var ya=-32768>Zc?-32768:32767<Zc?32767:Zc;ya>$c&&($c=ya)}var Pb=0==$c?0:4-W($c<<16)<<16>>16;if(0<Pb)switch(Pb){case 1:for(va=0;159>=va;va++)U[va]=N(U[va],16384);break;case 2:for(va=0;159>=va;va++)U[va]=N(U[va],8192);break;case 3:for(va=0;159>=va;va++)U[va]=N(U[va],4096);break;case 4:for(va=0;159>=va;va++)U[va]=N(U[va],2048)}var Z=
U[fa];g([0,0,0,0,0,0,0,0,0],0,m,0,m.length);m[0]+=Z*U[fa-0];Z=U[++fa];m[0]+=Z*U[fa-0];m[1]+=Z*U[fa-1];Z=U[++fa];m[0]+=Z*U[fa-0];m[1]+=Z*U[fa-1];m[2]+=Z*U[fa-2];Z=U[++fa];m[0]+=Z*U[fa-0];m[1]+=Z*U[fa-1];m[2]+=Z*U[fa-2];m[3]+=Z*U[fa-3];Z=U[++fa];m[0]+=Z*U[fa-0];m[1]+=Z*U[fa-1];m[2]+=Z*U[fa-2];m[3]+=Z*U[fa-3];m[4]+=Z*U[fa-4];Z=U[++fa];m[0]+=Z*U[fa-0];m[1]+=Z*U[fa-1];m[2]+=Z*U[fa-2];m[3]+=Z*U[fa-3];m[4]+=Z*U[fa-4];m[5]+=Z*U[fa-5];Z=U[++fa];m[0]+=Z*U[fa-0];m[1]+=Z*U[fa-1];m[2]+=Z*U[fa-2];m[3]+=Z*U[fa-
3];m[4]+=Z*U[fa-4];m[5]+=Z*U[fa-5];m[6]+=Z*U[fa-6];Z=U[++fa];m[0]+=Z*U[fa-0];m[1]+=Z*U[fa-1];m[2]+=Z*U[fa-2];m[3]+=Z*U[fa-3];m[4]+=Z*U[fa-4];m[5]+=Z*U[fa-5];m[6]+=Z*U[fa-6];m[7]+=Z*U[fa-7];++fa;for(fb=fa;160>fb;++fb)Z=U[fb],m[0]+=Z*U[fb-0],m[1]+=Z*U[fb-1],m[2]+=Z*U[fb-2],m[3]+=Z*U[fb-3],m[4]+=Z*U[fb-4],m[5]+=Z*U[fb-5],m[6]+=Z*U[fb-6],m[7]+=Z*U[fb-7],m[8]+=Z*U[fb-8];for(va=0;9>va;va++)m[va]<<=1;if(0<Pb)for(va=0;160>va;va++)U[va]<<=Pb;var da=new Int16Array(1),na=0,ha,ra=new Int16Array(9),nb=new Int16Array(9),
Qb=new Int16Array(9);if(0==m[0])for(ha=0;8>ha;ha++)d[ha]=0;else{da[0]=W(m[0]);for(ha=0;8>=ha;ha++)ra[ha]=m[ha]<<da[0]>>16;g(ra,0,Qb,0,7);g(ra,0,nb,0,8);for(var mb=1;8>=mb;mb++,na++){da[0]=nb[1];da[0]=(0>da[0]?-32768==da[0]?32767:-da[0]:da[0])<<16>>16;if(nb[0]<da[0]){for(ha=mb;8>ha;ha++)d[ha]=0;break}var Gc=na;var dd=da[0],sc=dd,nd=nb[0],ua=0,Wb=15;if(0==dd)var Xb=0;else{for(;0!=Wb;)Wb--,ua=ua<<17>>16,sc<<=1,sc>=nd&&(sc-=nd,ua++);Xb=ua<<16>>16}d[Gc]=Xb;0<nb[1]&&(d[na]=-d[na]);if(8==mb)break;da[0]=
N(nb[1],d[na]);var Ic=nb[0]+da[0];nb[0]=-32768>Ic?-32768:32767<Ic?32767:Ic;for(var nc=1;nc<=8-mb;nc++){da[0]=N(Qb[nc],d[na]);var yc=nb[nc+1]+da[0];nb[nc]=-32768>yc?-32768:32767<yc?32767:yc;da[0]=N(nb[nc+1],d[na]);var Uc=Qb[nc]+da[0];Qb[nc]=-32768>Uc?-32768:32767<Uc?32767:Uc}}}for(var Cb,qc=0;8>qc;qc++)Cb=d[qc],Cb=(0>Cb?-32768==Cb?32767:-Cb:Cb)<<16>>16,22118>Cb?Cb>>=1:31130>Cb?Cb-=11059:(Cb-=26112,Cb<<=2),d[qc]=0>d[qc]?-Cb:Cb;var a=0;wa(20480,0,31,-32,d,a++);wa(20480,0,31,-32,d,a++);wa(20480,2048,
15,-16,d,a++);wa(20480,-2560,15,-16,d,a++);wa(13964,94,7,-8,d,a++);wa(15360,-1792,7,-8,d,a++);wa(8534,-341,3,-4,d,a++);wa(9036,-1144,3,-4,d,a++);var t=new Int16Array(8),z=q.j;var H=z^1;q.j=H;var E=q.larpp[z],I=q.larpp[H],P=0;La(d,E,P++,0,0,-32,13107);La(d,E,P++,0,0,-32,13107);La(d,E,P++,0,2048,-16,13107);La(d,E,P++,0,-2560,-16,13107);La(d,E,P++,0,94,-8,19223);La(d,E,P++,0,-1792,-8,17476);La(d,E,P++,0,-341,-4,31454);La(d,E,P++,0,-1144,-4,29708);for(var M=0;8>M;M++){var ba=(I[M]>>2<<16>>16)+(E[M]>>
2<<16>>16);t[M]=-32768>ba?-32768:32767<ba?32767:ba;var ja=t[M]+(I[M]>>1<<16>>16);t[M]=-32768>ja?-32768:32767<ja?32767:ja}aa(t);Y(q,t,13,U,0);for(var sa=0;8>sa;sa++){var ab=(I[sa]>>1<<16>>16)+(E[sa]>>1<<16>>16);t[sa]=-32768>ab?-32768:32767<ab?32767:ab}aa(t);Y(q,t,14,U,13);for(var ta=0;8>ta;ta++){var pa=(I[ta]>>2<<16>>16)+(E[ta]>>2<<16>>16);t[ta]=-32768>pa?-32768:32767<pa?32767:pa;var S=t[ta]+(E[ta]>>1<<16>>16);t[ta]=-32768>S?-32768:32767<S?32767:S}aa(t);Y(q,t,13,U,27);for(var vb=0;8>vb;vb++)t[vb]=
E[vb];aa(t);Y(q,t,120,U,40);for(var Yb=q.dp0,Ta,bc,bb=0;3>=bb;bb++,Db+=13){for(var mc=U,Bc=40*bb,cc=bd,Ib=Yb,Jb=Yb,tc=Vb,Yc=x,Rc=l,uc=Hb++,Na=void 0,Xa=void 0,Ca=void 0,wb=void 0,Sb=void 0,ob=void 0,Zb=void 0,ea=void 0,dc=mc,Hc=Bc,ka=Ib,la=tc,Tb=Rc,Kb=Yc,Ua=uc,ca=new Int16Array(40),ec=0,cb=0;39>=cb;cb++)Na=dc[cb+Hc],Na=(0>Na?-32768==Na?32767:-Na:Na)<<16>>16,Na>ec&&(ec=Na);Na=0;0!=ec&&(Na=W(ec<<16));Xa=6<Na?0:6-Na<<16>>16;for(cb=0;39>=cb;cb++)ca[cb]=dc[cb+Hc]>>Xa;ob=0;for(ea=Zb=40;120>=ea;ea++){var R=
1;var ia=ca[0]*ka[la-ea];ia+=ca[1]*ka[R+la-ea];R++;ia+=ca[2]*ka[R+la-ea];R++;ia+=ca[3]*ka[R+la-ea];R++;ia+=ca[4]*ka[R+la-ea];R++;ia+=ca[5]*ka[R+la-ea];R++;ia+=ca[6]*ka[R+la-ea];R++;ia+=ca[7]*ka[R+la-ea];R++;ia+=ca[8]*ka[R+la-ea];R++;ia+=ca[9]*ka[R+la-ea];R++;ia+=ca[10]*ka[R+la-ea];R++;ia+=ca[11]*ka[R+la-ea];R++;ia+=ca[12]*ka[R+la-ea];R++;ia+=ca[13]*ka[R+la-ea];R++;ia+=ca[14]*ka[R+la-ea];R++;ia+=ca[15]*ka[R+la-ea];R++;ia+=ca[16]*ka[R+la-ea];R++;ia+=ca[17]*ka[R+la-ea];R++;ia+=ca[18]*ka[R+la-ea];R++;
ia+=ca[19]*ka[R+la-ea];R++;ia+=ca[20]*ka[R+la-ea];R++;ia+=ca[21]*ka[R+la-ea];R++;ia+=ca[22]*ka[R+la-ea];R++;ia+=ca[23]*ka[R+la-ea];R++;ia+=ca[24]*ka[R+la-ea];R++;ia+=ca[25]*ka[R+la-ea];R++;ia+=ca[26]*ka[R+la-ea];R++;ia+=ca[27]*ka[R+la-ea];R++;ia+=ca[28]*ka[R+la-ea];R++;ia+=ca[29]*ka[R+la-ea];R++;ia+=ca[30]*ka[R+la-ea];R++;ia+=ca[31]*ka[R+la-ea];R++;ia+=ca[32]*ka[R+la-ea];R++;ia+=ca[33]*ka[R+la-ea];R++;ia+=ca[34]*ka[R+la-ea];R++;ia+=ca[35]*ka[R+la-ea];R++;ia+=ca[36]*ka[R+la-ea];R++;ia+=ca[37]*ka[R+
la-ea];R++;ia+=ca[38]*ka[R+la-ea];R++;ia+=ca[39]*ka[R+la-ea];ia>ob&&(Zb=ea<<16>>16,ob=ia)}Kb[Ua]=Zb;ob=ob<<1>>6-Xa;for(cb=Sb=0;39>=cb;cb++){var Dc=ka[cb-Zb+la]>>3<<16>>16;Sb+=Dc*Dc}Sb<<=1;if(0>=ob)Tb[Ua]=0;else if(ob>=Sb)Tb[Ua]=3;else{Na=W(Sb);wb=ob<<Na>>16<<16>>16;Ca=Sb<<Na>>16<<16>>16;for(var Ec=0;2>=Ec&&!(wb<=K(Ca,r[Ec]));Ec++)Tb[Ua]=Ec}var Da=void 0,qa=void 0,gb=void 0,vc=Yc[uc],$b=Ib,pb=mc,Ya=Bc,Ba=Jb,Lb=cc,Va=tc;switch(Rc[uc]){case 0:gb=3277;for(qa=0;39>=qa;qa++)Ba[qa+Va]=N(gb,$b[qa-vc+Va]),
Da=pb[qa+Ya]-Ba[qa+Va],Lb[qa+5]=-32768>Da?-32768:32767<Da?32767:Da;break;case 1:gb=11469;for(qa=0;39>=qa;qa++)Ba[qa+Va]=N(gb,$b[qa-vc+Va]),Da=pb[qa+Ya]-Ba[qa+Va],Lb[qa+5]=-32768>Da?-32768:32767<Da?32767:Da;break;case 2:gb=21299;for(qa=0;39>=qa;qa++)Ba[qa+Va]=N(gb,$b[qa-vc+Va]),Da=pb[qa+Ya]-Ba[qa+Va],Lb[qa+5]=-32768>Da?-32768:32767<Da?32767:Da;break;case 3:for(gb=32767,qa=0;39>=qa;qa++)Ba[qa+Va]=N(gb,$b[qa-vc+Va]),Da=pb[qa+Ya]-Ba[qa+Va],Lb[qa+5]=-32768>Da?-32768:32767<Da?32767:Da}for(var fc=bd,xb=
k,Ea=p,gc=kb++,Sc=h,wc=Db,xc=new Int16Array(13),Jc=new Int16Array(13),ac=void 0,Ma=fc,ma=0;39>=ma;ma++)ac=4096,ac+=-134*Ma[ma+0]+-374*Ma[ma+1]+2054*Ma[ma+3]+5741*Ma[ma+4]+8192*Ma[ma+5]+5741*Ma[ma+6]+2054*Ma[ma+7]+-374*Ma[ma+9]+-134*Ma[ma+10],ac=ac>>13<<16>>16,D[ma]=-32768>ac?-32768:32767<ac?32767:ac;var Mb=void 0,Nb=void 0,db=void 0,Tc=xc,qb=Ea,rb=gc,sb=0;Mb=db=0+(O(0,1)+O(0,2)+O(0,3)+O(0,4)+O(0,5)+O(0,6)+O(0,7)+O(0,8)+O(0,9)+O(0,10)+O(0,11)+O(0,12));db+=O(0,0);Nb=db<<1;db=0+(O(1,0)+O(1,1)+O(1,2)+
O(1,3)+O(1,4)+O(1,5)+O(1,6)+O(1,7)+O(1,8)+O(1,9)+O(1,10)+O(1,11)+O(1,12));db<<=1;db>Nb&&(sb=1,Nb=db);db=0+(O(2,0)+O(2,1)+O(2,2)+O(2,3)+O(2,4)+O(2,5)+O(2,6)+O(2,7)+O(2,8)+O(2,9)+O(2,10)+O(2,11)+O(2,12));db<<=1;db>Nb&&(sb=2,Nb=db);db=Mb+O(3,12);db<<=1;db>Nb&&(sb=3);for(var hc=0;12>=hc;hc++)Tc[hc]=D[sb+3*hc];qb[rb]=sb;var Ub=void 0,yb=void 0,Fc=void 0,eb=void 0,hb=void 0,ic=void 0,Oa=void 0,zb=void 0,Pa=void 0,jc=xc,Ab=Sc,Kc=wc,Vc=xb,zc=gc,Ka=0;for(yb=0;12>=yb;yb++)Oa=jc[yb],Oa=0>Oa?-32768==Oa?32767:
-Oa:Oa,Oa>Ka&&(Ka=Oa);eb=0;Oa=Ka>>9<<16>>16;for(yb=Pa=0;5>=yb;yb++)Pa=0>=Oa?Pa|1:Pa|0,Oa=Oa>>1<<16>>16,0==Pa&&eb++;var kc=(Ka>>(eb+5<<16>>16)<<16>>16)+(eb<<3<<16>>16);zb=-32768>kc?-32768:32767<kc?32767:kc;var Ga=0;15<zb&&(Ga=(zb>>3<<16>>16)-1<<16>>16);Ub=zb-(Ga<<3)<<16>>16;if(0==Ub)Ga=-4,Ub=7;else{for(;7>=Ub;)Ub=(Ub<<1|1)<<16>>16,Ga--;Ub-=8}J==J?(u=Ga,L=Ub):(C=Ga,v=Ub);eb=u;Fc=L;ic=6-eb<<16>>16;hb=B[Fc];for(yb=0;12>=yb;yb++)Oa=jc[yb]<<ic<<16>>16,Oa=K(Oa,hb),Oa=Oa>>12<<16>>16,Ab[yb+Kc]=Oa+4<<16>>16;
L=Fc;u=eb;Vc[zc]=zb;var oc=void 0,Bb=void 0,Ob=void 0,ib=void 0,Fa=void 0,Za=void 0,Lc=Sc,Mc=Jc,Nc=wc;J==J?(Fa=A[L],Bb=6-u<<16>>16):(Fa=A[v],Bb=6-C<<16>>16);ib=-32768>Bb?-32768:32767<Bb?32767:Bb;Bb=ib-1;var pc=-32768>Bb?-32768:32767<Bb?32767:Bb;Ob=16<=pc?0:-16>=pc?-0:0>pc?T(1,-pc):1<<pc<<16>>16;for(var Oc=G=0;13>Oc;Oc++)Za=(Lc[Nc++]<<1)-7<<16>>16,Za=Za<<28>>16,Za=N(Fa,Za),oc=Za+Ob,Za=-32768>oc?-32768:32767<oc?32767:oc,Mc[G++]=T(Za,ib);var lb=void 0,Xc=Jc,tb=fc,gd=J,Eb=13,$a=0;lb=gd==J?5:0;switch(Ea[gc]){case 3:tb[lb++]=
0;do tb[lb++]=0,tb[lb++]=0,tb[lb++]=Xc[$a++],--Eb;while(0!=Eb);break;case 2:do tb[lb++]=0,tb[lb++]=0,tb[lb++]=Xc[$a++],--Eb;while(0!=Eb);break;case 1:do tb[lb++]=0,tb[lb++]=Xc[$a++],tb[lb++]=0,--Eb;while(0!=Eb);break;case 0:do tb[lb++]=Xc[$a++],tb[lb++]=0,tb[lb++]=0,--Eb;while(0!=Eb)}gd==J&&(tb[lb++]=0);for(Ta=0;39>=Ta;Ta++)bc=bd[5+Ta]+Yb[Ta+Vb],Yb[Ta+Vb]=-32768>bc?-32768:32767<bc?32767:bc;Vb+=40}for(Ta=0;120>Ta;Ta++)Yb[Ta]=Yb[160+Ta];if(f){var c=d[0]<<4|d[1]<<10;n[F++]=c>>4;c=c>>5|d[2]<<11;n[F++]=
c>>7;c=c>>5|d[3]<<11;c=c>>4|d[4]<<12;n[F++]=c>>6;c=c>>4|d[5]<<12;c=c>>3|d[6]<<13;n[F++]=c>>7;c=c>>3|d[7]<<13;c=c>>7|x[0]<<9;n[F++]=c>>5;c=c>>2|l[0]<<14;c=c>>2|p[0]<<14;c=c>>6|k[0]<<10;n[F++]=c>>3;c=c>>3|h[0]<<13;n[F++]=c>>8;c=c>>3|h[1]<<13;c=c>>3|h[2]<<13;c=c>>3|h[3]<<13;n[F++]=c>>7;c=c>>3|h[4]<<13;c=c>>3|h[5]<<13;c=c>>3|h[6]<<13;n[F++]=c>>6;c=c>>3|h[7]<<13;c=c>>3|h[8]<<13;n[F++]=c>>8;c=c>>3|h[9]<<13;c=c>>3|h[10]<<13;c=c>>3|h[11]<<13;n[F++]=c>>7;c=c>>3|h[12]<<13;c=c>>7|x[1]<<9;n[F++]=c>>5;c=c>>2|
l[1]<<14;c=c>>2|p[1]<<14;c=c>>6|k[1]<<10;n[F++]=c>>3;c=c>>3|h[13]<<13;n[F++]=c>>8;c=c>>3|h[14]<<13;c=c>>3|h[15]<<13;c=c>>3|h[16]<<13;n[F++]=c>>7;c=c>>3|h[17]<<13;c=c>>3|h[18]<<13;c=c>>3|h[19]<<13;n[F++]=c>>6;c=c>>3|h[20]<<13;c=c>>3|h[21]<<13;n[F++]=c>>8;c=c>>3|h[22]<<13;c=c>>3|h[23]<<13;c=c>>3|h[24]<<13;n[F++]=c>>7;c=c>>3|h[25]<<13;c=c>>7|x[2]<<9;n[F++]=c>>5;c=c>>2|l[2]<<14;c=c>>2|p[2]<<14;c=c>>6|k[2]<<10;n[F++]=c>>3;c=c>>3|h[26]<<13;n[F++]=c>>8;c=c>>3|h[27]<<13;c=c>>3|h[28]<<13;c=c>>3|h[29]<<13;
n[F++]=c>>7;c=c>>3|h[30]<<13;c=c>>3|h[31]<<13;c=c>>3|h[32]<<13;n[F++]=c>>6;c=c>>3|h[33]<<13;c=c>>3|h[34]<<13;n[F++]=c>>8;c=c>>3|h[35]<<13;c=c>>3|h[36]<<13;c=c>>3|h[37]<<13;n[F++]=c>>7;c=c>>3|h[38]<<13;c=c>>7|x[3]<<9;n[F++]=c>>5;c=c>>2|l[3]<<14;c=c>>2|p[3]<<14;c=c>>6|k[3]<<10;n[F++]=c>>3;c=c>>3|h[39]<<13;n[F++]=c>>8;c=c>>3|h[40]<<13;c=c>>3|h[41]<<13;c=c>>3|h[42]<<13;n[F++]=c>>7;c=c>>3|h[43]<<13;c=c>>3|h[44]<<13;c=c>>3|h[45]<<13;n[F++]=c>>6;c=c>>3|h[46]<<13;c=c>>3|h[47]<<13;n[F++]=c>>8;c=c>>3|h[48]<<
13;c=c>>3|h[49]<<13;c=c>>3|h[50]<<13;n[F++]=c>>7;c=c>>3|h[51]<<13;n[F]=c>>12;w=n[F]}else c=w<<6|d[0]<<10,n[F++]=c>>6,c=c>>6|d[1]<<10,n[F++]=c>>8,c=c>>5|d[2]<<11,c=c>>5|d[3]<<11,n[F++]=c>>6,c=c>>4|d[4]<<12,c=c>>4|d[5]<<12,n[F++]=c>>6,c=c>>3|d[6]<<13,c=c>>3|d[7]<<13,n[F++]=c>>8,c=c>>7|x[0]<<9,c=c>>2|l[0]<<14,n[F++]=c>>7,c=c>>2|p[0]<<14,c=c>>6|k[0]<<10,n[F++]=c>>7,c=c>>3|h[0]<<13,c=c>>3|h[1]<<13,c=c>>3|h[2]<<13,n[F++]=c>>6,c=c>>3|h[3]<<13,c=c>>3|h[4]<<13,n[F++]=c>>8,c=c>>3|h[5]<<13,c=c>>3|h[6]<<13,c=
c>>3|h[7]<<13,n[F++]=c>>7,c=c>>3|h[8]<<13,c=c>>3|h[9]<<13,c=c>>3|h[10]<<13,n[F++]=c>>6,c=c>>3|h[11]<<13,c=c>>3|h[12]<<13,n[F++]=c>>8,c=c>>7|x[1]<<9,c=c>>2|l[1]<<14,n[F++]=c>>7,c=c>>2|p[1]<<14,c=c>>6|k[1]<<10,n[F++]=c>>7,c=c>>3|h[13]<<13,c=c>>3|h[14]<<13,c=c>>3|h[15]<<13,n[F++]=c>>6,c=c>>3|h[16]<<13,c=c>>3|h[17]<<13,n[F++]=c>>8,c=c>>3|h[18]<<13,c=c>>3|h[19]<<13,c=c>>3|h[20]<<13,n[F++]=c>>7,c=c>>3|h[21]<<13,c=c>>3|h[22]<<13,c=c>>3|h[23]<<13,n[F++]=c>>6,c=c>>3|h[24]<<13,c=c>>3|h[25]<<13,n[F++]=c>>8,
c=c>>7|x[2]<<9,c=c>>2|l[2]<<14,n[F++]=c>>7,c=c>>2|p[2]<<14,c=c>>6|k[2]<<10,n[F++]=c>>7,c=c>>3|h[26]<<13,c=c>>3|h[27]<<13,c=c>>3|h[28]<<13,n[F++]=c>>6,c=c>>3|h[29]<<13,c=c>>3|h[30]<<13,n[F++]=c>>8,c=c>>3|h[31]<<13,c=c>>3|h[32]<<13,c=c>>3|h[33]<<13,n[F++]=c>>7,c=c>>3|h[34]<<13,c=c>>3|h[35]<<13,c=c>>3|h[36]<<13,n[F++]=c>>6,c=c>>3|h[37]<<13,c=c>>3|h[38]<<13,n[F++]=c>>8,c=c>>7|x[3]<<9,c=c>>2|l[3]<<14,n[F++]=c>>7,c=c>>2|p[3]<<14,c=c>>6|k[3]<<10,n[F++]=c>>7,c=c>>3|h[39]<<13,c=c>>3|h[40]<<13,c=c>>3|h[41]<<
13,n[F++]=c>>6,c=c>>3|h[42]<<13,c=c>>3|h[43]<<13,n[F++]=c>>8,c=c>>3|h[44]<<13,c=c>>3|h[45]<<13,c=c>>3|h[46]<<13,n[F++]=c>>7,c=c>>3|h[47]<<13,c=c>>3|h[48]<<13,c=c>>3|h[49]<<13,n[F++]=c>>6,c=c>>3|h[50]<<13,c=c>>3|h[51]<<13,n[F++]=c>>8;var Pc,hd=f?32:33;for(Pc=0;Pc<hd;Pc++)xa[Pc+oa]=n[Pc];return hd};var f=!1,y=[8,7,6,6,5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=new Int32Array(9),u=0,L=0,C=0,v=0,G=0,J=0,D=new Int16Array(40)}
function MSGSM(){function K(g,f,y,m,u,L,C,v){var G=0;h(e,0,160,0);h(n,0,40,0);for(var J=0;3>=J;J++,G+=13){var D=u[J],b=y[J],V=G,xa=L,oa=n,Ja=new Int32Array(13);Ja.buffer||h(Ja,0,13,0);var Aa=0;15<D&&(Aa=(D>>3)-1);D-=Aa<<3;if(0==D)Aa=-4,D=7;else{for(;7>=D;)D=D<<1|1,Aa--;D-=8}var Ha=Array(2);Ha[0]=Aa;Ha[1]=D;Aa=Ja;D=V;V=aa[Ha[1]];Ha=O(6,Ha[0]);var F=O(Ha,1);F=16<=F?0:-16>=F?-0:0>F?La(1,-F):1<<F;for(var Db=0,Hb=0;13>Hb;Hb++){var kb=(xa[D++]<<1)-7;kb<<=12;kb=T(V,kb);kb+=F;-32768>kb?kb=-32768:32767<kb&&
(kb=32767);Aa[Db++]=La(kb,Ha)}xa=13;V=Aa=0;switch(b){case 3:oa[V++]=0;case 2:oa[V++]=0;case 1:oa[V++]=0;case 0:oa[V++]=Ja[Aa++],xa--}do oa[V++]=0,oa[V++]=0,oa[V++]=Ja[Aa++];while(0<--xa);for(;4>++b;)oa[V++]=0;Ja=f[J];b=m[J];oa=n;q=Ja=40>Ja||120<Ja?q:Ja;xa=Y[b];for(Aa=0;39>=Aa;Aa++)b=T(xa,r[Aa-Ja+120]),b+=oa[Aa],-32768>b?b=-32768:32767<b&&(b=32767),r[Aa+120]=b;k(r,40,r,0,120);k(r,120,e,40*J,39)}f=B[A];y=B[A^=1];m=0;N(g,f,m++,0,0,-32,13107);N(g,f,m++,0,0,-32,13107);N(g,f,m++,0,2048,-16,13107);N(g,f,
m++,0,-2560,-16,13107);N(g,f,m++,0,94,-8,19223);N(g,f,m++,0,-1792,-8,17476);N(g,f,m++,0,-341,-4,31454);N(g,f,m++,0,-1144,-4,29708);g=w;for(u=0;8>u;u++)m=(y[u]>>2)+(f[u]>>2),-32768>m?m=-32768:32767<m&&(m=32767),m+=y[u]>>1,-32768>m?m=-32768:32767<m&&(m=32767),g[u]=m;Q(w);W(w,13,e,C,0,v);g=w;for(u=0;8>u;u++)m=(y[u]>>1)+(f[u]>>1),-32768>m?m=-32768:32767<m&&(m=32767),g[u]=m;Q(w);W(w,14,e,C,13,v);g=w;for(u=0;8>u;u++)m=(y[u]>>2)+(f[u]>>2),-32768>m?m=-32768:32767<m&&(m=32767),m+=f[u]>>1,-32768>m?m=-32768:
32767<m&&(m=32767),g[u]=m;Q(w);W(w,13,e,C,27,v);g=w;for(y=0;8>y;y++)g[y]=f[y];Q(w);W(w,120,e,C,40,v);f=v;for(y=v+160;y-- >v;f++)g=T(x,28180),x=C[f]+g,-32768>x?x=-32768:32767<x&&(x=32767),g=x<<1,-32768>g?g=-32768:32767<g&&(g=32767),C[f]=g}function N(g,f,y,m,u,L,C){m=g[y]+L;-32768>m?m=-32768:32767<m&&(m=32767);m=O(m<<10,u<<1);m=T(C,m);m+=m;-32768>m?m=-32768:32767<m&&(m=32767);f[y]=m}function Q(g){for(var f,y=0;8>y;y++)0>g[y]?(f=-32768==g[y]?32767:-g[y],g[y]=-(11059>f?f<<1:20070>f?f+11059:wa(f>>2,26112))):
(f=g[y],g[y]=11059>f?f<<1:20070>f?f+11059:wa(f>>2,26112))}function W(g,f,y,m,u,L){for(var C,v,G;0!=f;){f--;C=y[u];for(var J=7;0<=J;J--)v=g[J],G=d[J],G=((-32768==v&&-32768==G?32767:65535&v*G+16384>>15)&65535)<<16>>16,C=O(C,G),v=((-32768==v&&-32768==C?32767:65535&v*C+16384>>15)&65535)<<16>>16,v=d[J]+v,-32768>v?v=-32768:32767<v&&(v=32767),d[J+1]=v;m[L+u++]=d[0]=C}}function T(g,f){return-32768==g&&-32768==f?32767:(g*f+16384>>15&65535)<<16>>16}function wa(g,f){g+=f;return-32768>g?-32768:32767<g?32767:
g}function O(g,f){g-=f;return-32768>g?-32768:32767<g?32767:g}function La(g,f){return 16<=f?0>g?-1:0:-16>=f?0:0>f?g<<-f:g>>f}var aa=[18431,20479,22527,24575,26623,28671,30719,32767],Y=[3277,11469,21299,32767],r=new Int32Array(280),B=[new Int32Array(8),new Int32Array(8)],A=0,q=40,d=new Int32Array(9),x=0,p=new Int32Array(320);p[0]=0;var l=[.1],k=hi5.Arrays.arraycopy,h=hi5.Arrays.fill;this.decode=function(g,f,y){var m=0,u;y=f+y;for(var L=new Int32Array(8),C=new Int32Array(4),v=new Int32Array(4),G=new Int32Array(4),
J=new Int32Array(4),D=new Int32Array(52);f<y;){var b=g[f++]&255;L[0]=b&63;b>>>=6;b|=g[f++]<<2&1023;L[1]=b&63;b>>>=6;b|=g[f++]<<4&4095;L[2]=b&31;b>>>=5;L[3]=b&31;b>>>=5;b|=g[f++]<<2&1023;L[4]=b&15;b>>>=4;L[5]=b&15;b>>>=4;b|=g[f++]<<2&1023;L[6]=b&7;b>>>=3;L[7]=b&7;b>>>=3;b|=g[f++]<<4&4095;C[0]=b&127;b>>>=7;G[0]=b&3;b>>>=2;v[0]=b&3;b>>>=2;b|=g[f++]<<1&511;J[0]=b&63;b>>>=6;D[0]=b&7;b=g[f++]&255;D[1]=b&7;b>>>=3;D[2]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[3]=b&7;b>>>=3;D[4]=b&7;b>>>=3;D[5]=b&7;b>>>=3;b|=g[f++]<<
1&511;D[6]=b&7;b>>>=3;D[7]=b&7;b>>>=3;D[8]=b&7;b=g[f++]&255;D[9]=b&7;b>>>=3;D[10]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[11]=b&7;b>>>=3;D[12]=b&7;b>>>=3;b|=g[f++]<<4&4095;C[1]=b&127;b>>>=7;G[1]=b&3;b>>>=2;v[1]=b&3;b>>>=2;b|=g[f++]<<1&511;J[1]=b&63;b>>>=6;D[13]=b&7;b=g[f++]&255;D[14]=b&7;b>>>=3;D[15]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[16]=b&7;b>>>=3;D[17]=b&7;b>>>=3;D[18]=b&7;b>>>=3;b|=g[f++]<<1&511;D[19]=b&7;b>>>=3;D[20]=b&7;b>>>=3;D[21]=b&7;b=g[f++]&255;D[22]=b&7;b>>>=3;D[23]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[24]=
b&7;b>>>=3;D[25]=b&7;b>>>=3;b|=g[f++]<<4&4095;C[2]=b&127;b>>>=7;G[2]=b&3;b>>>=2;v[2]=b&3;b>>>=2;b|=g[f++]<<1&511;J[2]=b&63;b>>>=6;D[26]=b&7;b=g[f++]&255;D[27]=b&7;b>>>=3;D[28]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[29]=b&7;b>>>=3;D[30]=b&7;b>>>=3;D[31]=b&7;b>>>=3;b|=g[f++]<<1&511;D[32]=b&7;b>>>=3;D[33]=b&7;b>>>=3;D[34]=b&7;b=g[f++]&255;D[35]=b&7;b>>>=3;D[36]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[37]=b&7;b>>>=3;D[38]=b&7;b>>>=3;b|=g[f++]<<4&4095;C[3]=b&127;b>>>=7;G[3]=b&3;b>>>=2;v[3]=b&3;b>>>=2;b|=g[f++]<<1&511;
J[3]=b&63;b>>>=6;D[39]=b&7;b=g[f++]&255;D[40]=b&7;b>>>=3;D[41]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[42]=b&7;b>>>=3;D[43]=b&7;b>>>=3;D[44]=b&7;b>>>=3;b|=g[f++]<<1&511;D[45]=b&7;b>>>=3;D[46]=b&7;b>>>=3;D[47]=b&7;b=g[f++]&255;D[48]=b&7;b>>>=3;D[49]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[50]=b&7;b>>>=3;D[51]=b&7;b>>>=3;K(L,C,v,G,J,D,p,0);b&=15;b|=g[f++]<<4&4095;L[0]=b&63;b>>>=6;L[1]=b&63;b=g[f++]&255;L[2]=b&31;b>>>=5;b|=g[f++]<<3&2047;L[3]=b&31;b>>>=5;L[4]=b&15;b>>>=4;b|=g[f++]<<2&1023;L[5]=b&15;b>>>=4;L[6]=b&7;b>>>=
3;L[7]=b&7;b=g[f++]&255;C[0]=b&127;b>>>=7;b|=g[f++]<<1&511;G[0]=b&3;b>>>=2;v[0]=b&3;b>>>=2;b|=g[f++]<<5&8191;J[0]=b&63;b>>>=6;D[0]=b&7;b>>>=3;D[1]=b&7;b>>>=3;b|=g[f++]<<1&511;D[2]=b&7;b>>>=3;D[3]=b&7;b>>>=3;D[4]=b&7;b=g[f++]&255;D[5]=b&7;b>>>=3;D[6]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[7]=b&7;b>>>=3;D[8]=b&7;b>>>=3;D[9]=b&7;b>>>=3;b|=g[f++]<<1&511;D[10]=b&7;b>>>=3;D[11]=b&7;b>>>=3;D[12]=b&7;b=g[f++]&255;C[1]=b&127;b>>>=7;b|=g[f++]<<1&511;G[1]=b&3;b>>>=2;v[1]=b&3;b>>>=2;b|=g[f++]<<5&8191;J[1]=b&63;b>>>=
6;D[13]=b&7;b>>>=3;D[14]=b&7;b>>>=3;b|=g[f++]<<1&511;D[15]=b&7;b>>>=3;D[16]=b&7;b>>>=3;D[17]=b&7;b=g[f++]&255;D[18]=b&7;b>>>=3;D[19]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[20]=b&7;b>>>=3;D[21]=b&7;b>>>=3;D[22]=b&7;b>>>=3;b|=g[f++]<<1&511;D[23]=b&7;b>>>=3;D[24]=b&7;b>>>=3;D[25]=b&7;b=g[f++]&255;C[2]=b&127;b>>>=7;b|=g[f++]<<1&511;G[2]=b&3;b>>>=2;v[2]=b&3;b>>>=2;b|=g[f++]<<5&8191;J[2]=b&63;b>>>=6;D[26]=b&7;b>>>=3;D[27]=b&7;b>>>=3;b|=g[f++]<<1&511;D[28]=b&7;b>>>=3;D[29]=b&7;b>>>=3;D[30]=b&7;b=g[f++]&255;D[31]=
b&7;b>>>=3;D[32]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[33]=b&7;b>>>=3;D[34]=b&7;b>>>=3;D[35]=b&7;b>>>=3;b|=g[f++]<<1&511;D[36]=b&7;b>>>=3;D[37]=b&7;b>>>=3;D[38]=b&7;b=g[f++]&255;C[3]=b&127;b>>>=7;b|=g[f++]<<1&511;G[3]=b&3;b>>>=2;v[3]=b&3;b>>>=2;b|=g[f++]<<5&8191;J[3]=b&63;b>>>=6;D[39]=b&7;b>>>=3;D[40]=b&7;b>>>=3;b|=g[f++]<<1&511;D[41]=b&7;b>>>=3;D[42]=b&7;b>>>=3;D[43]=b&7;b=g[f++]&255;D[44]=b&7;b>>>=3;D[45]=b&7;b>>>=3;b|=g[f++]<<2&1023;D[46]=b&7;b>>>=3;D[47]=b&7;b>>>=3;D[48]=b&7;b>>>=3;b|=g[f++]<<1&511;
D[49]=b&7;b>>>=3;D[50]=b&7;b>>>=3;D[51]=b&7;K(L,C,v,G,J,D,p,160);b=320*m++;for(u=0;320>u;u++)l[b++]=p[u]/32768}l.length=320*m;return l};var e=new Int32Array(160),n=new Int32Array(40),w=new Int32Array(8)};
