var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(J,L,O){if(J==Array.prototype||J==Object.prototype)return J;J[L]=O.value;return J};
$jscomp.getGlobal=function(J){J=["object"==typeof globalThis&&globalThis,J,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var L=0;L<J.length;++L){var O=J[L];if(O&&O.Math==Math)return O}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(J,L){var O=$jscomp.propertyToPolyfillSymbol[L];if(null==O)return J[L];O=J[O];return void 0!==O?O:J[L]};$jscomp.polyfill=function(J,L,O,W){L&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(J,L,O,W):$jscomp.polyfillUnisolated(J,L,O,W))};
$jscomp.polyfillUnisolated=function(J,L,O,W){O=$jscomp.global;J=J.split(".");for(W=0;W<J.length-1;W++){var U=J[W];if(!(U in O))return;O=O[U]}J=J[J.length-1];W=O[J];L=L(W);L!=W&&null!=L&&$jscomp.defineProperty(O,J,{configurable:!0,writable:!0,value:L})};
$jscomp.polyfillIsolated=function(J,L,O,W){var U=J.split(".");J=1===U.length;W=U[0];W=!J&&W in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var wa=0;wa<U.length-1;wa++){var P=U[wa];if(!(P in W))return;W=W[P]}U=U[U.length-1];O=$jscomp.IS_SYMBOL_NATIVE&&"es6"===O?W[U]:null;L=L(O);null!=L&&(J?$jscomp.defineProperty($jscomp.polyfills,U,{configurable:!0,writable:!0,value:L}):L!==O&&($jscomp.propertyToPolyfillSymbol[U]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(U):$jscomp.POLYFILL_PREFIX+
U,U=$jscomp.propertyToPolyfillSymbol[U],$jscomp.defineProperty(W,U,{configurable:!0,writable:!0,value:L})))};$jscomp.polyfill("Array.prototype.fill",function(J){return J?J:function(L,O,W){var U=this.length||0;0>O&&(O=Math.max(0,U+O));if(null==W||W>U)W=U;W=Number(W);0>W&&(W=Math.max(0,U+W));for(O=Number(O||0);O<W;O++)this[O]=L;return this}},"es6","es3");$jscomp.typedArrayFill=function(J){return J?J:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
var rdpcodecs=rdpcodecs||new function(){function J(){var ha=new Uint32Array(10240),Z=0,r=new Uint8Array(10240),D=0,z=new Uint8Array(10240),q=0,d=new Uint8Array(10240),x=0,p=new Uint8Array(0),h=0;this.getData=function(){return ha};this.getDataSize=function(){return Z};this.resetData=function(l){ha.length<l&&(ha=new Uint32Array(l));Z=l;return ha};this.resetLumaPlane=function(l){r.length<l&&(r=new Uint8Array(l));D=l;return r};this.getLumaPlanceSize=function(){return D};this.resetOrangeChromaPlane=function(l){z.length<
l&&(z=new Uint8Array(l));q=l;return z};this.getOrangeChromaPlane=function(){return q};this.resetGreenChromaPlane=function(l){d.length<l&&(d=new Uint8Array(l));x=l;return d};this.getGreenChromaPlane=function(){return x};this.resetAlphaPlane=function(l){p.length<l&&(p=new Uint8Array(l));h=l;return p};this.getAlphaPlane=function(){return h}}function L(ha,Z,r){var D=ha,z=r,q=0,d=8,x=Z;this.attach=function(p,h,l){D=p;z=l;q=0;d=8;x=h};this.getBits=function(p){for(var h,l=0;q<z&&0<p;)h=p,h>d&&(h=d),0!=l&&
(l<<=h),l|=D[q+x]>>d-h&(1<<h)-1,d-=h,p-=h,0==d&&(d=8,q++);return l};this.putBits=function(p,h){for(var l;q<z&&0<h;)l=h,l>d&&(l=d),D[q+x]|=(p>>h-l&(1<<l)-1)<<d-l,d-=l,h-=l,0==d&&(d=8,q++)};this.eos=function(){return q>=z};this.left=function(){return q>=z?0:8*(z-q-1)+d};this.getProcessBytes=function(){return 8>d?q+1:q}}function O(){this.y=this.x=this.CrLen=this.CbLen=this.YLen=this.quantIdxCr=this.quantIdxCb=this.quantIdxY=0;this.data=new Uint32Array(4096)}function W(){function ha(D,z,q,d,x,p,h){q=
D.et;var l=4096,g=D.bitStream,e=1,m=e<<3,y=1,f=y<<3,k=0;for(null==g?g=new L(d,x,p):g.attach(d,x,p);!g.eos()&&0<l;)if(0!=e){for(;!g.eos();){x=g.getBits(1);if(0!=x)break;d=e=1<<e;d>l&&(d=l);0<d&&(ya(h,k,k+d,0),k+=d);l-=e;m+=4;80<m&&(m=80);0>m&&(m=0);e=m>>3}d=e=g.getBits(e);d>l&&(d=l);0<d&&(ya(h,k,k+d,0),k+=d);l-=e;e=g.getBits(1);d=0;do if(x=g.getBits(1),1==x)d++;else break;while(1);x=g.getBits(y);x|=d<<y;0==d?(f+=-2,80<f&&(f=80),0>f&&(f=0),y=f>>3):1!=d&&(f+=d,80<f&&(f=80),0>f&&(f=0),y=f>>3);d=x+1;0<
l&&(h[k++]=0!=e?-d:d);l--;m+=-6;80<m&&(m=80);0>m&&(m=0);e=m>>3}else{d=0;do if(x=g.getBits(1),1==x)d++;else break;while(1);x=g.getBits(y);x|=d<<y;0==d?(f+=-2,80<f&&(f=80),0>f&&(f=0),y=f>>3):1!=d&&(f+=d,80<f&&(f=80),0>f&&(f=0),y=f>>3);d=x;if(1!=q){p=d;for(x=0;0!=p;)p>>=1,x++;x=g.getBits(x);d-=x;0!=x&&0!=d?(m+=-6,80<m&&(m=80),0>m&&(m=0),e=m>>3):0==x&&0==d&&(m+=6,80<m&&(m=80),0>m&&(m=0),e=m>>3);0<l&&(h[k++]=0!=(x&1)?-1*(x+1>>1):x>>1);l--;0<l&&(h[k++]=0!=(d&1)?-1*(d+1>>1):d>>1);l--}else 0==d?(0<l&&(h[k++]=
0),l--,m+=3):(0<l&&(h[k++]=0!=(d&1)?-1*(d+1>>1):d>>1),l--,m+=-3),80<m&&(m=80),0>m&&(m=0),e=m>>3}q=64;l=4032;for(g=4033;1<q;l++,g++,q--)h[g]+=h[l];r(h,0,4096,5);r(h,0,1024,z[8]-6);r(h,1024,1024,z[7]-6);r(h,2048,1024,z[9]-6);r(h,3072,256,z[5]-6);r(h,3328,256,z[4]-6);r(h,3584,256,z[6]-6);r(h,3840,64,z[2]-6);r(h,3904,64,z[1]-6);r(h,3968,64,z[3]-6);r(h,4032,64,z[0]-6);D=D.dwtBuffer;Z(h,3840,D,8);Z(h,3072,D,16);Z(h,0,D,32)}function Z(D,z,q,d){var x,p;var h=d<<1;var l=z+d*d*3;var g=z;var e=0;var m=z+d*d;
var y=z+d*d*2;var f=d*d*2;for(x=0;x<d;x++){q[e]=D[l]-(D[g]+D[g]+1>>1)<<16>>16;q[f]=D[m]-(D[y]+D[y]+1>>1)<<16>>16;for(p=1;p<d;p++){var k=p<<1;q[e+k]=D[l+p]-(D[g+p-1]+D[g+p]+1>>1)<<16>>16;q[f+k]=D[m+p]-(D[y+p-1]+D[y+p]+1>>1)<<16>>16}for(p=0;p<d-1;p++)k=p<<1,q[e+k+1]=(D[g+p]<<1)+(q[e+k]+q[e+k+2]>>1)<<16>>16,q[f+k+1]=(D[y+p]<<1)+(q[f+k]+q[f+k+2]>>1)<<16>>16;k=p<<1;q[e+k+1]=(D[g+p]<<1)+q[e+k]<<16>>16;q[f+k+1]=(D[y+p]<<1)+q[f+k]<<16>>16;l+=d;g+=d;e+=h;m+=d;y+=d;f+=h}for(k=0;k<h;k++){for(p=0;p<d;p++)x=p<<
1,e=z+x*h+k,f=p*h+k,g=f+d*h,D[e]=q[f]-((0<p?q[g-h]:q[g])+q[g]+1>>1)<<16>>16;for(p=0;p<d;p++)x=p<<1,e=z+x*h+k,f=p*h+k,g=f+d*h,D[e+h]=(q[g]<<1)+(D[e]+D[e+(p<d-1?2*h:0)]>>1)<<16>>16}}function r(D,z,q,d){if(0!=d)for(;0<q;z++,q--)D[z]<<=d}this.decodeRgb=function(D,z,q,d,x,p,h,l,g,e){ha(D,q,x,z.getData(),z.getPosition(),d,D.yrBuffer);z.skipPosition(d);ha(D,q,h,z.getData(),z.getPosition(),p,D.cbgBuffer);z.skipPosition(p);ha(D,q,g,z.getData(),z.getPosition(),l,D.crbBuffer);z.skipPosition(l);z=D.yrBuffer;
q=D.cbgBuffer;d=D.crbBuffer;for(p=0;4096>p;p++)h=z[p],l=q[p],g=d[p],h=h+4096<<16,x=h+91947*g,g=h-22544*l-46792*g,h+=115998*l,x>>=21,g>>=21,h>>=21,z[p]=0>x?0:255<x?255:x,q[p]=0>g?0:255<g?255:g,d[p]=0>h?0:255<h?255:h;z=D.yrBuffer;q=D.cbgBuffer;D=D.crbBuffer;for(d=0;4096>d;d++)e[d]=4278190080|D[d]<<16|q[d]<<8|z[d]}}function U(ha){var Z=[new hi5.graphic.Rectangle],r=[new O],D=0,z=0;this.resetRects=function(q){if(Z.length<q){var d=Z.length;for(Z.length=q;d<q;d++)Z[d]=new hi5.graphic.Rectangle}D=q;return Z};
this.resetTiles=function(q){var d=0;if(ha){if(r.length<q)for(d=r.length,r.length=q;d<q;d++)r[d]=new O}else for(;d<q;d++)r[d]=new O;z=q;return r};this.getRectSize=function(){return D};this.getTileSize=function(){return z};this.getRects=function(){return Z};this.getTiles=function(){return r}}function wa(){this.ctxId=0;this.tileSize=64;this.qt=this.et=this.xft=this.cct=this.flags=0;this.yrBuffer=new Int32Array(4096);this.cbgBuffer=new Int32Array(4096);this.crbBuffer=new Int32Array(4096);this.dwtBuffer=
new Int32Array(4096);var ha=this;this.setProperties=function(Z){ha.flags=Z&7;ha.cct=Z>>3&3;ha.xft=Z>>5&15;ha.et=Z>>9&15};this.bitStream=new L}var P=hi5.Arrays.arraycopy,ya=hi5.Arrays.fill;this.flipimage=function(ha,Z,r,D,z,q){q*=D;for(var d=0;d<z;d++)D=Z+(z-d-1)*q,P(ha,D,r,d*q,q)};this.Bitmap=function(ha,Z,r,D,z,q,d,x){this.data=ha;this.left=D;this.top=z;this.width=Z;this.height=r;this.bitsperpixel=q;this.bytesperpixel=Math.floor((q+7)/8);this.raw=d;this.codec=x||0};this.NSCodec=function(){function ha(r,
D,z,q,d){if(0==z)ya(q,0,d,255);else if(z<d){var x=d;for(d=0;4<x;){var p=r[D++];5==x?(q[d++]=p,x--):p==r[D]?(D++,255>(r[D]&255)?(z=r[D++]&255,z+=2):(D++,z=(r[D+3]&255)<<24|(r[D+2]&255)<<16|(r[D+1]&255)<<8|r[D]&255,D+=4),ya(q,d,d+z,p),d+=z,x-=z):(q[d++]=p,x--)}for(z=0;4>z;z++)q[d++]=r[D++]}else P(r,D,q,0,d)}var Z=new J;this.getData=function(){return Z.getData()};this.getDataSize=function(){return Z.getDataSize()};this.process=function(r,D,z,q){D=r.getLittleEndian32();var d=r.getLittleEndian32(),x=r.getLittleEndian32();
r.skipPosition(4);var p=r.getByte(),h=r.getByte();r.skipPosition(2);var l=r.getData(),g=r.getPosition(),e=Z.resetData(z*q),m=z+(~(z&7)+1&7),y=q+(~(q&1)+1&1);var f=m*y;var k=Z.resetLumaPlane(f),A=Z.resetOrangeChromaPlane(f);f=Z.resetGreenChromaPlane(f);var n=z*q;y=0<h?(m>>1)*(y>>1):n;var w=0<h?y:n;ha(l,g,D,k,0<h?m*q:n);g+=D;ha(l,g,d,A,y);ha(l,g+d,x,f,w);l=0;g=z+(~(z&7)+1&7);var S=p-1;for(m=0;m<q;m++)for(0<h?(n=m*g,y=(m>>1)*(g>>1),w=(m>>1)*(g>>1)):(n=m*z,y=m*z,w=m*z),p=0;p<z;p++){var E=k[n]&255;var v=
(A[y]&255)<<S<<24>>24;var H=f[w]<<S<<24>>24;var I=E+v-H;var C=E+H;E=E-v-H;E=0>E?0:255<E?255:E;C=0>C?0:255<C?255:C;I=0>I?0:255<I?255:I;e[l++]=4278190080|E<<16|C<<8|I;n++;y+=0<h?p%2:1;w+=0<h?p%2:1}r.skipPosition(D+d+x)}};this.RemoteFX=function(ha){var Z=new U(!ha);ha=new W;var r=new wa;this.decode=function(z,q){for(q=z.getPosition()+q;z.getPosition()<q;){var d=z.getLittleEndian16();var x=z.getLittleEndian32();if(0==x)break;x=z.getPosition()-6+x;switch(d){case 52416:d=z;d.getLittleEndian32();d.getLittleEndian16();
break;case 52417:z.skipPosition(4);break;case 52418:d=z;for(var p=d.getByte(),h=0;h<p;h++)d.getByte(),d.getLittleEndian16(),d.getLittleEndian16();break;case 52419:d=z;d.skipPosition(2);r.ctxId=d.getByte();r.tileSize=d.getLittleEndian16();r.setProperties(d.getLittleEndian16());break;case 52420:z.skipPosition(10);break;case 52421:z.skipPosition(2);break;case 52422:d=z;d.skipPosition(2);d.skipPosition(1);p=d.getLittleEndian16();h=Z.resetRects(p);for(var l=0;l<p;l++){var g=h[l];g.x=d.getLittleEndian16();
g.y=d.getLittleEndian16();g.width=d.getLittleEndian16();g.height=d.getLittleEndian16()}d.skipPosition(4);break;case 52423:d=z;p=r;d.skipPosition(6);h=d.getLittleEndian16();p.cct=h>>>4&3;p.xft=h>>>6&15;p.et=h>>>10&15;p.qt=h>>>14&3;var e=d.getByte();d.skipPosition(1);l=d.getLittleEndian16();d.skipPosition(4);g=Array(10*e);var m=0;for(h=0;h<e;h++){var y=d.getByte();g[m++]=y&15;g[m++]=y>>>4;y=d.getByte();g[m++]=y&15;g[m++]=y>>>4;y=d.getByte();g[m++]=y&15;g[m++]=y>>>4;y=d.getByte();g[m++]=y&15;g[m++]=
y>>>4;y=d.getByte();g[m++]=y&15;g[m++]=y>>>4}y=Z.resetTiles(l);for(h=0;h<l;h++){e=y[h];m=d;var f=e;m.skipPosition(6);f.quantIdxY=m.getByte();f.quantIdxCb=m.getByte();f.quantIdxCr=m.getByte();f.x=64*m.getLittleEndian16();f.y=64*m.getLittleEndian16();f.YLen=m.getLittleEndian16();f.CbLen=m.getLittleEndian16();f.CrLen=m.getLittleEndian16();D(p,d,g,e.YLen,10*e.quantIdxY,e.CbLen,10*e.quantIdxCb,e.CrLen,10*e.quantIdxCr,e.data)}break;default:svGlobal.logger.warn("unknown blockType 0x%X"+d)}z.setPosition(x)}return Z};
var D=ha.decodeRgb;this.getResult=function(){return Z}};this.bitmap=new function(){function ha(r,D,z,q,d,x){for(var p,h=0,l,g,e,m,y=0,f,k=D,A=x;h<q;){x=A+z*q*4-(h+1)*z*4;e=0;f=x;p=0;if(0==y)for(;p<z;){l=r[D++];g=l&15;l=l>>4&15;m=g<<4|l;47>=m&&16<=m&&(g=m,l=0);for(;0<l;)e=r[D++],d[x]=e,x+=4,p++,l--;for(;0<g;)d[x]=e,x+=4,p++,g--}else for(;p<z;){l=r[D++];g=l&15;l=l>>4&15;m=g<<4|l;47>=m&&16<=m&&(g=m,l=0);for(;0<l;)m=r[D++],0!=(m&1)?(m>>=1,m+=1,e=-m):e=m>>=1,m=d[y+4*p]+e,d[x]=m,x+=4,p++,l--;for(;0<g;)m=
d[y+4*p]+e,d[x]=m,x+=4,p++,g--}h++;y=f}return D-k}function Z(r,D,z,q,d,x){var p,h;for(h=0;h<q;h++)for(p=0;p<z;p++)d[x+4*((q-h-1)*z+p)]=r[D+(h*z+p)]}this.decompressInt16=function(r,D,z,q,d){var x=-1,p=-1;z=d+z;for(var h,l,g,e=r,m=-1,y,f=0,k=0,A=0,n=4294967295,w,S=!1,E=!1,v=new Uint32Array(r*D);d<z;){y=0;l=q[d++];h=l>>4;switch(h){case 12:case 13:case 14:h-=6;l&=15;g=16;break;case 15:h=l&15;9>h?(l=q[d++],l|=q[d++]<<8):l=11>h?8:1;g=0;break;default:h>>=1,l&=31,g=32}0!=g&&(w=2==h||7==h,0==l?l=w?q[d++]+
1:q[d++]+g:w&&(l<<=3));switch(h){case 0:m!=h||e==r&&-1==x||(S=!0);break;case 8:w=q[d++]|q[d++]<<8,f=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16;case 3:w=q[d++]|q[d++]<<8;k=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16;break;case 6:case 7:w=q[d++]|q[d++]<<8;n=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16;h-=5;break;case 9:A=3;h=2;y=3;break;case 10:A=5,h=2,y=5}m=h;for(g=0;0<l;)switch(e>=r&&(e=0,D--,x=p,p=D*r),h){case 0:S&&
(v[p+e]=-1==x?n:v[x+e]^n|4278190080,S=!1,l--,e++);if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(var H=0;8>H;H++)v[p+e]=4278190080,l--,e++;for(;0<l&&e<r;)v[p+e]=4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)v[p+e]=v[x+e],l--,e++;for(;0<l&&e<r;)v[p+e]=v[x+e],l--,e++}break;case 1:if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)v[p+e]=n,l--,e++;for(;0<l&&e<r;)v[p+e]=n,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)v[p+e]=v[x+e]^n|4278190080,l--,e++;for(;0<l&&e<r;)v[p+e]=v[x+e]^n|4278190080,
l--,e++}break;case 2:if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),v[p+e]=0!=(A&g)?n:4278190080,l--,e++;for(;0<l&&e<r;)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),v[p+e]=0!=(A&g)?n:4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),v[p+e]=0!=(A&g)?v[x+e]^n|4278190080:v[x+e],l--,e++;for(;0<l&&e<r;)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),v[p+e]=0!=(A&g)?v[x+e]^n|4278190080:v[x+e],l--,e++}break;
case 3:for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)v[p+e]=k,l--,e++;for(;0<l&&e<r;)v[p+e]=k,l--,e++;break;case 4:for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)w=q[d++]|q[d++]<<8,v[p+e]=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16,l--,e++;for(;0<l&&e<r;)w=q[d++]|q[d++]<<8,v[p+e]=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16,l--,e++;break;case 8:for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)E?(v[p+e]=k,E=!1):(v[p+e]=f,E=!0,l++),l--,e++;for(;0<l&&e<r;)E?(v[p+e]=k,E=!1):
(v[p+e]=f,E=!0,l++),l--,e++;break;case 13:for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)v[p+e]=4294967295,l--,e++;for(;0<l&&e<r;)v[p+e]=4294967295,l--,e++;break;case 14:for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)v[p+e]=4278190080,l--,e++;for(;0<l&&e<r;)v[p+e]=4278190080,l--,e++;break;default:l--,e++}}return v};this.byte2int=function(r,D,z){D||(D=r.length);z||(z=0);D=Math.floor(D/4);for(var q=new Uint32Array(D),d,x=0;x<D;x++)d=(x<<2)+z,q[x]=(r[d+3]&255)<<24|r[d+2]&255|(r[d+1]&255)<<8|(r[d+0]&255)<<16;return q};
this.decompressInt32=function(r,D,z,q,d){z=q[d];d+=1;var x=r*D,p=new Uint32Array(4*x);if(0==(z&32)){for(var h=d,l,g,e=0,m,y,f,k=h,A=3;e<D;){l=A+r*D*4-(e+1)*r*4;for(g=0;g<r;){m=q[h++];y=m&15;m=m>>4&15;f=y<<4|m;47>=f&&16<=f&&(y=f,m=0);for(;0<m;)h++,p[l]=255,l+=4,g++,m--;for(;0<y;)p[l]=255,l+=4,g++,y--}e++}d+=h-k}else for(l=0;l<x;l++)h=l<<2,p[h+3]=255;0!=(z&16)?(z=ha(q,d,r,D,p,2),d+=z,z=ha(q,d,r,D,p,1),ha(q,d+z,r,D,p,0)):(Z(q,d,r,D,p,2),d+=x,Z(q,d,r,D,p,1),Z(q,d+x,r,D,p,0));return rdpBitmap.byte2int(p)};
this.decompressInt24=function(r,D,z,q,d){var x=-1,p=-1;z=d+z;for(var h,l,g,e=r,m=-1,y,f=0,k=0,A=0,n=4294967295,w=!1,S=!1,E,v=new Uint32Array(r*D);d<z;){y=0;l=q[d++];h=l>>4;switch(h){case 12:case 13:case 14:h-=6;l&=15;g=16;break;case 15:h=l&15;9>h?(l=q[d++],l|=q[d++]<<8):l=11>h?8:1;g=0;break;default:h>>=1,l&=31,g=32}0!=g&&(E=2==h||7==h,0==l?l=E?q[d++]+1:q[d++]+g:E&&(l<<=3));switch(h){case 0:m!=h||e==r&&-1==x||(w=!0);break;case 8:f=4278190080|q[d++]<<16|q[d++]<<8|q[d++];case 3:k=4278190080|q[d++]<<
16|q[d++]<<8|q[d++];break;case 6:case 7:n=4278190080|q[d++]<<16|q[d++]<<8|q[d++];h-=5;break;case 9:A=3;h=2;y=3;break;case 10:A=5,h=2,y=5}m=h;for(g=0;0<l;)switch(e>=r&&(e=0,D--,x=p,p=D*r),h){case 0:w&&(v[p+e]=-1==x?n:v[x+e]^n|4278190080,w=!1,l--,e++);if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(E=0;8>E;E++)v[p+e]=4278190080,l--,e++;for(;0<l&&e<r;)v[p+e]=4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(E=0;8>E;E++)v[p+e]=v[x+e],l--,e++;for(;0<l&&e<r;)v[p+e]=v[x+e],l--,e++}break;case 1:if(-1==x){for(;0!=(l&
-8)&&e+8<r;)for(E=0;8>E;E++)v[p+e]=n,l--,e++;for(;0<l&&e<r;)v[p+e]=n,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(E=0;8>E;E++)v[p+e]=v[x+e]^n|4278190080,l--,e++;for(;0<l&&e<r;)v[p+e]=v[x+e]^n|4278190080,l--,e++}break;case 2:if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(E=0;8>E;E++)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),v[p+e]=0!=(A&g)?n:4278190080,l--,e++;for(;0<l&&e<r;)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),v[p+e]=0!=(A&g)?n:4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(E=0;8>E;E++)g<<=1,g&=255,
0==g&&(A=0!=y?y&255:q[d++],g=1),v[p+e]=0!=(A&g)?v[x+e]^n|4278190080:v[x+e],l--,e++;for(;0<l&&e<r;)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),v[p+e]=0!=(A&g)?v[x+e]^n|4278190080:v[x+e],l--,e++}break;case 3:for(;0!=(l&-8)&&e+8<r;)for(E=0;8>E;E++)v[p+e]=k,l--,e++;for(;0<l&&e<r;)v[p+e]=k,l--,e++;break;case 4:for(;0!=(l&-8)&&e+8<r;)for(E=0;8>E;E++)v[p+e]=4278190080|q[d++]<<16|q[d++]<<8|q[d++],l--,e++;for(;0<l&&e<r;)v[p+e]=4278190080|q[d++]<<16|q[d++]<<8|q[d++],l--,e++;break;case 8:for(;0!=(l&-8)&&e+
8<r;)for(E=0;8>E;E++)S?(v[p+e]=k,S=!1):(v[p+e]=f,S=!0,l++),l--,e++;for(;0<l&&e<r;)S?(v[p+e]=k,S=!1):(v[p+e]=f,S=!0,l++),l--,e++;break;case 13:for(;0!=(l&-8)&&e+8<r;)for(E=0;8>E;E++)v[p+e]=4294967295,l--,e++;for(;0<l&&e<r;)v[p+e]=4294967295,l--,e++;break;case 14:for(;0!=(l&-8)&&e+8<r;)for(E=0;8>E;E++)v[p+e]=4278190080,l--,e++;for(;0<l&&e<r;)v[p+e]=4278190080,l--,e++}}return v};this.decompress=function(r,D,z,q,d){var x=-1,p=0;z+=d;var h=r,l=-1,g=0,e=0,m=0,y=4294967295,f=!1,k=!1,A=new Uint8Array(r*D);
for(A[0]=0;d<z;){var n=0;var w=q[d++];var S=w>>4;switch(S){case 12:case 13:case 14:S-=6;w&=15;var E=16;break;case 15:S=w&15;9>S?(w=q[d++],w|=q[d++]<<8):w=11>S?8:1;E=0;break;default:S>>=1,w&=31,E=32}if(0!=E){var v=2==S||7==S;0==w?w=v?q[d++]+1:q[d++]+E:v&&(w<<=3)}switch(S){case 0:l!=S||h==r&&-1==x||(f=!0);break;case 8:g=q[d++];case 3:e=q[d++];break;case 6:case 7:y=q[d++];S-=5;break;case 9:m=3;S=2;n=3;break;case 10:m=5,S=2,n=5}l=S;for(E=0;0<w;)switch(h>=r&&(h=0,D--,x=p,p=D*r),S){case 0:f&&(A[p+h]=-1==
x?y:A[x+h]^y,f=!1,w--,h++);if(-1==x){for(;0!=(w&-8)&&h+8<r;)for(v=0;8>v;v++)A[p+h]=0,w--,h++;for(;0<w&&h<r;)A[p+h]=0,w--,h++}else{for(;0!=(w&-8)&&h+8<r;)for(v=0;8>v;v++)A[p+h]=A[x+h],w--,h++;for(;0<w&&h<r;)A[p+h]=A[x+h],w--,h++}break;case 1:if(-1==x){for(;0!=(w&-8)&&h+8<r;)for(v=0;8>v;v++)A[p+h]=y,w--,h++;for(;0<w&&h<r;)A[p+h]=y,w--,h++}else{for(;0!=(w&-8)&&h+8<r;)for(v=0;8>v;v++)A[p+h]=A[x+h]^y,w--,h++;for(;0<w&&h<r;)A[p+h]=A[x+h]^y,w--,h++}break;case 2:if(-1==x){for(;0!=(w&-8)&&h+8<r;)for(v=0;8>
v;v++)E<<=1,E&=255,0==E&&(m=0!=n?n:q[d++],E=1),A[p+h]=0!=(m&E)?y:0,w--,h++;for(;0<w&&h<r;)E<<=1,E&=255,0==E&&(m=0!=n?n:q[d++],E=1),A[p+h]=0!=(m&E)?y:0,w--,h++}else{for(;0!=(w&-8)&&h+8<r;)for(v=0;8>v;v++)E<<=1,E&=255,0==E&&(m=0!=n?n:q[d++],E=1),A[p+h]=0!=(m&E)?A[x+h]^y:A[x+h],w--,h++;for(;0<w&&h<r;)E<<=1,E&=255,0==E&&(m=0!=n?n:q[d++],E=1),A[p+h]=0!=(m&E)?A[x+h]^y:A[x+h],w--,h++}break;case 3:for(;0!=(w&-8)&&h+8<r;)for(v=0;8>v;v++)A[p+h]=e,w--,h++;for(;0<w&&h<r;)A[p+h]=e,w--,h++;break;case 4:for(;0!=
(w&-8)&&h+8<r;)for(v=0;8>v;v++)A[p+h]=q[d++],w--,h++;for(;0<w&&h<r;)A[p+h]=q[d++],w--,h++;break;case 8:for(;0!=(w&-8)&&h+8<r;)for(v=0;8>v;v++)k?(A[p+h]=e,k=!1):(A[p+h]=g,k=!0,w++),w--,h++;for(;0<w&&h<r;)k?(A[p+h]=e,k=!1):(A[p+h]=g,k=!0,w++),w--,h++;break;case 13:for(;0!=(w&-8)&&h+8<r;)for(v=0;8>v;v++)A[p+h]=255,w--,h++;for(;0<w&&h<r;)A[p+h]=255,w--,h++;break;case 14:for(;0!=(w&-8)&&h+8<r;)for(v=0;8>v;v++)A[p+h]=0,w--,h++;for(;0<w&&h<r;)A[p+h]=0,w--,h++;break;default:w--,h++}}return A}}};
function RdpGeneral(J,L,O,W,U,wa,P){function ya(){return Ra.displayName||Ra.server||Ra.symlink||Ra.id||"undefined"}function ha(a){return 4278190080|(a<<3&248|a>>2&7)<<16|(a>>3&252|a>>9&3)<<8|a>>8&248|a>>13&7}function Z(a){return 4278190080|xa.paletteRdp[2][a]<<16|xa.paletteRdp[1][a]<<8|xa.paletteRdp[0][a]}function r(a){return 4278190080|a}function D(a){return 4278190080|a}function z(a,t){switch(a){case 16:Ab=ha;dc=rdpBitmap.decompressInt16;break;case 8:Ab=Z;break;case 24:Ab=D;dc=rdpBitmap.decompressInt24;
break;case 32:Ab=r;dc=rdpBitmap.decompressInt32;break;case 15:return Ra.invitation||console.log("15 bit color is not supported anymore."),!1;default:return!1}W=a;yc=(a+7)/8>>0;if(t&&X.onColorChange)X.onColorChange(a);return!0}function q(a,t,u){L=a;O=t;ca=M=0;pa=L-1;ia=O-1;if(X.onresolutionchange&&u)X.onresolutionchange(a,t)}function d(a){Tb||ec&&va.send(a)}function x(){this.style=this.yOrigin=this.xOrigin=0;this.pattern=Array(8);this.toStream=function(a){a.setByte(this.xOrigin);a.setByte(this.yOrigin);
a.setByte(this.style);a.setBytes(this.pattern)};this.fromStream=function(a){this.xOrigin=a.getByte();this.yOrigin=a.getByte();this.style=a.getByte();this.pattern=a.getBytes(8)};this.byteLength=function(){return 11}}function p(){this.bottom=this.top=this.right=this.left=0;this.toStream=function(a){a.setLittleEndian16(this.left);a.setLittleEndian16(this.right);a.setLittleEndian16(this.top);a.setLittleEndian16(this.bottom)};this.fromStream=function(a){this.left=a.getLittleEndian16();this.right=a.getLittleEndian16();
this.top=a.getLittleEndian16();this.bottom=a.getLittleEndian16()};this.byteLength=function(){return 8}}function h(){this.action=this.offset=this.bottom=this.top=this.right=this.left=0;this.toStream=function(a){a.setLittleEndian16(this.left);a.setLittleEndian16(this.right);a.setLittleEndian16(this.top);a.setLittleEndian16(this.bottom);a.setLittleEndian32(this.offset);a.setByte(this.action)};this.fromStream=function(a){this.left=a.getLittleEndian16();this.right=a.getLittleEndian16();this.top=a.getLittleEndian16();
this.bottom=a.getLittleEndian16();this.offset=a.getLittleEndian32();this.action=a.getByte()};this.byteLength=function(){return 13}}function l(){this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=
a.getByte()};this.byteLength=function(){return 9}}function g(a,t,u,F,B){this.offset=a;this.baseLine=t;this.width=u;this.height=F;this.fontData=B}function e(){this.opcode=this.backgroundColor=this.endY=this.endX=this.startY=this.startX=this.mixmode=0;this.pen=new f;this.toStream=function(a){a.setLittleEndian16(this.mixmode);a.setLittleEndian16(this.startX);a.setLittleEndian16(this.startY);a.setLittleEndian16(this.endX);a.setLittleEndian16(this.endY);a.setLittleEndian32(this.backgroundColor);a.setByte(this.opcode);
this.pen.toStream(a)};this.fromStream=function(a){this.mixmode=a.getLittleEndian16();this.startX=a.getLittleEndian16();this.startY=a.getLittleEndian16();this.endX=a.getLittleEndian16();this.endY=a.getLittleEndian16();this.backgroundColor=a.getLittleEndian32();this.opcode=a.getByte();this.pen.fromStream(a)};this.byteLength=function(){return 15+this.pen.byteLength()}}function m(){this.cacheIDX=this.cacheID=this.colorTable=this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=
function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian16(this.srcX);a.setLittleEndian16(this.srcY);a.setByte(this.cacheID);a.setByte(this.colorTable);a.setLittleEndian16(this.cacheIDX)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.srcX=a.getLittleEndian16();this.srcY=
a.getLittleEndian16();this.cacheID=a.getByte();this.colorTable=a.getByte();this.cacheIDX=a.getLittleEndian16()};this.byteLength=function(){return 17}}function y(){this.foregroundColor=this.backgroundColor=this.opcode=this.cy=this.cx=this.y=this.x=0;this.brush=new x;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian32(this.backgroundColor);a.setLittleEndian32(this.foregroundColor);
this.brush.toStream(a)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.backgroundColor=a.getLittleEndian32();this.foregroundColor=a.getLittleEndian32();this.brush.fromStream(a)};this.byteLength=function(){return 17+this.brush.byteLength()}}function f(){this.color=this.width=this.style=0;this.toStream=function(a){a.setByte(this.style);a.setByte(this.width);a.setLittleEndian32(this.color)};
this.fromStream=function(a){this.style=a.getByte();this.width=a.getByte();this.color=a.getLittleEndian32()};this.byteLength=function(){return 6}}function k(){this.dataSize=this.opcode=this.lines=this.foregroundColor=this.flags=this.y=this.x=0;this.data=[];this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setByte(this.opcode);a.setLittleEndian32(this.foregroundColor);a.setByte(this.lines);a.setByte(this.dataSize);this.dataSize&&a.setBytes(this.data)};this.fromStream=
function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.opcode=a.getByte();this.foregroundColor=a.getLittleEndian32();this.lines=a.getByte();if(this.dataSize=a.getByte())this.data=a.getBytes(this.dataSize)};this.byteLength=function(){return 11+this.dataSize}}function A(){this.color=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setLittleEndian32(this.color)};
this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.color=a.getLittleEndian32()};this.byteLength=function(){return 12}}function n(){this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian16(this.srcX);a.setLittleEndian16(this.srcY)};
this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.srcX=a.getLittleEndian16();this.srcY=a.getLittleEndian16()};this.byteLength=function(){return 13}}function w(){this.length=this.opcode=this.boxBottom=this.boxRight=this.boxTop=this.boxLeft=this.clipBottom=this.clipRight=this.clipTop=this.clipLeft=this.font=this.unknown=this.y=this.x=this.backgroundColor=this.foregroundColor=
this.mixmode=this.flags=0;this.text=null;this.toStream=function(a){a.setByte(this.font);a.setByte(this.flags);a.setByte(this.opcode);a.setByte(this.mixmode);a.setLittleEndian32(this.foregroundColor);a.setLittleEndian32(this.backgroundColor);a.setLittleEndian16(this.clipLeft);a.setLittleEndian16(this.clipTop);a.setLittleEndian16(this.clipRight);a.setLittleEndian16(this.clipBottom);a.setLittleEndian16(this.boxLeft);a.setLittleEndian16(this.boxTop);a.setLittleEndian16(this.boxRight);a.setLittleEndian16(this.boxBottom);
a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setByte(this.length);this.length&&a.setBytes(this.text)};this.fromStream=function(a){this.font=a.getByte();this.flags=a.getByte();this.opcode=a.getByte();this.mixmode=a.getByte();this.foregroundColor=a.getLittleEndian32();this.backgroundColor=a.getLittleEndian32();this.clipLeft=a.getLittleEndian16();this.clipTop=a.getLittleEndian16();this.clipRight=a.getLittleEndian16();this.clipBottom=a.getLittleEndian16();this.boxLeft=a.getLittleEndian16();
this.boxTop=a.getLittleEndian16();this.boxRight=a.getLittleEndian16();this.boxBottom=a.getLittleEndian16();this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();if(this.length=a.getByte())this.text=a.getBytes(this.length)};this.byteLength=function(){return 33+this.length}}function S(){this.orderType=0;this.bounds=new p;this.destBlt=new l;this.patBlt=new y;this.screenBlt=new n;this.line=new e;this.rectangle=new A;this.deskSave=new h;this.memBlt=new m;this.polyLine=new k;this.text2=new w;this._line=
new hi5.graphic.Line;this.paletteRdp=null;this.toPDU=function(a){var t=4+this.bounds.byteLength()+this.destBlt.byteLength()+this.patBlt.byteLength()+this.screenBlt.byteLength()+this.line.byteLength()+this.rectangle.byteLength()+this.deskSave.byteLength()+this.memBlt.byteLength()+this.polyLine.byteLength()+this.text2.byteLength()+14+10,u=new Uint8Array(t);u[0]=a;u[2]=1;u[3]=3;a=new hi5.DataBuffer(u,0,t);a.skipPosition(4);this.bounds.toStream(a);this.destBlt.toStream(a);this.patBlt.toStream(a);this.screenBlt.toStream(a);
this.line.toStream(a);this.rectangle.toStream(a);this.deskSave.toStream(a);this.memBlt.toStream(a);this.polyLine.toStream(a);this.text2.toStream(a);a.setLittleEndian16(M);a.setLittleEndian16(ca);a.setLittleEndian16(pa);a.setLittleEndian16(ia);a.setLittleEndian32(Hb);a.setByte(this.orderType);a.setByte(W);zc.toStream(a);return u};this.fromStream=function(a){this.bounds.fromStream(a);this.destBlt.fromStream(a);this.patBlt.fromStream(a);this.screenBlt.fromStream(a);this.line.fromStream(a);this.rectangle.fromStream(a);
this.deskSave.fromStream(a);this.memBlt.fromStream(a);this.polyLine.fromStream(a);this.text2.fromStream(a);M=a.getLittleEndian16();ca=a.getLittleEndian16();pa=a.getLittleEndian16();ia=a.getLittleEndian16();Hb=a.getLittleEndian32();this.orderType=a.getByte();z(a.getByte(),!0);zc.fromStream(a)}}function E(){var a=ec;Ac=ec=!1;Ob();xa=new S;Hb=0;Fa&&Fa.reset();Sa&&Sa.reset();a&&(ec=a);Pb&&Pb.reset()}function v(){if(!ec){Ac=!1;if(Tb)va=Tb;else{if(X.oncreatewebsocket)va=X.oncreatewebsocket(J);else{var a=
J;0==X.mode&&P&&(a=J.substring(0,J.indexOf("?"))+"?_METHOD=post",Ra.loadbalanceTokenName&&Ra[Ra.loadbalanceTokenName]&&(a+="&loadbalanceTokenName="+Ra.loadbalanceTokenName+"&"+Ra.loadbalanceTokenName+"="+Ra[Ra.loadbalanceTokenName]));va=new WebSocket(a,"rdp")}"binaryType"in va&&(va.binaryType="arraybuffer")}va.onopen=function(t){ec=!0;if(!P&&X.onopen)X.onopen()};"on"==Ra.recording&&(Za=new RecordingManager,Za.setHeader({name:"rec",width:L,height:O,color:W,namesuffix:".rdpv",filetag:"RDPV",duration:0}));
va.onmessage=H;va.onclose=Yc;va.onerror=X.onerror}}function H(a){var t=a.data;if("string"!=typeof t){var u=new Uint8Array(t);null!=Za&&Za.add(new RecordingObj(u,0,t.byteLength,-1));Ub.attach(u,0,t.byteLength);var F=Ub.getLittleEndian16();switch(F){case 29:case 30:C(Ub,F);break;case 48:if(X.onSlowPath)X.onSlowPath();var B=Ub;B.getLittleEndian16();var G=B.getByte(),N=B.getByte(),K=B.getLittleEndian16(),aa=0!=(N&32);aa&&(K-=18);if(aa)if(Fa||(Fa=new BulkData),3==(N&15)){Sa||(Sa=new Bulk61Data);var la=
B.getByte(),za=B.getByte();K-=2;if(0!=(la&16)&&0!=(za&32)){Fa.dec5(B.getData(),B.getPosition(),K,za);var $a=Fa.getData(),Da=Fa.getDecompressedLength();Sa.dec($a.getData(),$a.getPosition(),Da,la)}else Sa.dec(B.getData(),B.getPosition(),K,la);var qa=Sa.getData()}else Fa.dec(B.getData(),B.getPosition(),K,N),qa=Fa.getData();else qa=B;var T=qa;switch(G){case 2:var Ib=T.getLittleEndian16();switch(Ib){case 0:T.skipPosition(2);var kc=T.getLittleEndian16();T.skipPosition(2);Ha(T,kc);break;case 1:kb(T);break;
case 2:Aa(T);break;case 3:break;default:svGlobal.logger.warn("Unimplemented Update type "+Ib)}break;case 20:break;case 31:Vb=!1;break;case 27:var pb=T.getLittleEndian16();T.skipPosition(2);switch(pb){case 3:var gb=T.getLittleEndian16();var ab=T.getLittleEndian16();X.onMoveCursor(gb,ab,!0);break;case 6:ta(T,24);break;case 7:U.setCursor(T.getLittleEndian16());break;case 1:var fc=T.getLittleEndian16();switch(fc){case 0:break;default:svGlobal.logger.warn("XXX system pointer message "+fc)}break;case 8:var Bc=
T.getLittleEndian16();ta(T,Bc)}break;case 34:break;case 38:a:{var Wb=T.getLittleEndian32(),Qb=X.sessionInfo;if(3>Wb){var Bb=X.sessionInfo;switch(Wb){case 0:T.skipPosition(4);Bb.domain=T.getUnicodeString(52,!0);T.skipPosition(4);Bb.userName=T.getUnicodeString(512,!0);Bb.sessionId=T.getLittleEndian32();break;case 1:Bb.version=T.getLittleEndian16();T.skipPosition(4);Bb.sessionId=T.getLittleEndian32();var Cc=T.getLittleEndian32();var Zc=T.getLittleEndian32();T.skipPosition(558);Bb.domain=T.getUnicodeString(Cc,
!0);Bb.userName=T.getUnicodeString(Zc,!0)}}else if(3==Wb){T.skipPosition(2);var Qc=T.getLittleEndian32();T.skipPosition(4);if(2==Qc)break a;T.getLittleEndian32();T.skipPosition(4);Qb.sessionId=T.getLittleEndian32();var Dc=T.getBytes(16);for(var Xb=Array(16),Ba=0;16>Ba;Ba++)Xb[Ba]=Dc[Ba]&255}if(!Ac&&X.onloggedin)X.onloggedin(X.sessionInfo);Ac=!0;var Ca="8D";Qb.sessionId&&(Ca+=Qb.sessionId+"\t"+(Dc?hi5.Base64.enc(Dc):0)+"\t"+Qb.userName+"\t"+Qb.domain);rc||d(Ca)}Vb=!1;break;case 40:Vb=!1;break;case 41:T.skipPosition(2);
var Cb=T.getLittleEndian16(),sc=0!=(Cb&4),Jb=0!=(Cb&2),qb=0!=(Cb&1),lc=0!=(Cb&8);if(X.onLockKeyState)X.onLockKeyState({capsLock:sc,numLock:Jb,scrollLock:qb,kanaLock:lc});svGlobal.logger.info("LED state, capsLock:"+sc+" numLock:"+Jb+" scrollLock:"+qb+" kanaLock:"+lc);break;case 47:Vb=!0;var ba=T.getLittleEndian32();svGlobal.logger.info("Disconnect:"+ba.toString(16));var Gc=11==ba&&ua;if(Gc)X.onCloseSurface();if(!(1>ba||Gc)){!rc&&ec&&d("85"+ba);var Rc=ba.toString(16).toUpperCase();if(X.onerror)X.onerror(Rc)}break;
case 50:T.skipPosition(4);break;case 54:var ma=T.getLittleEndian32().toString(16).toUpperCase();svGlobal.logger.warn("server status code:"+ma);break;case 55:for(var da=T.getLittleEndian32(),rb,hb,sb,fa,gc=0,lb=0,Q=0,ja=0,Sc=0;Sc<da;Sc++)rb=T.getLittleEndian32(),hb=T.getLittleEndian32(),sb=T.getLittleEndian32(),fa=T.getLittleEndian32(),T.skipPosition(4),gc=Math.min(rb,gc),lb=Math.max(lb,sb),Q=Math.min(hb,Q),ja=Math.max(ja,fa);rb=lb-gc+1;hb=ja-Q+1;svGlobal.logger.warn("monitor, count:"+da+" w:"+rb+
" h:"+hb);q(rb,hb,!0);break;default:svGlobal.logger.warn("Unimplemented Data PDU type "+G)}break;case 49:if(X.onFastPath)X.onFastPath();a:{var cb=Ub,Ua=cb.getByte(),na=Ua&15,Rb=Ua>>4&3,Yb=0;2==(Ua>>6&3)&&(Yb=cb.getByte());var tb=0!=(Yb&32);var bb=cb.getLittleEndian16();if(tb)if(Fa||(Fa=new BulkData),3==(Yb&15)){Sa||(Sa=new Bulk61Data);var Ia=cb.getByte(),ib=cb.getByte();bb-=2;if(0!=(Ia&16)&&0!=(ib&32)){Fa.dec5(cb.getData(),cb.getPosition(),bb,ib);var Sb=Fa.getData(),Wa=Fa.getDecompressedLength();
Sa.dec(Sb.getData(),Sb.getPosition(),Wa,Ia)}else Sa.dec(cb.getData(),cb.getPosition(),bb,Ia);var ub=Sa.getData();bb=Sa.getDecompressedLength()}else Fa.dec(cb.getData(),cb.getPosition(),bb,Yb),ub=Fa.getData(),bb=Fa.getDecompressedLength();else ub=cb;if(0!=Rb)switch(Rb){case 2:case 3:Pb.addFragement(ub,bb);break a;case 1:Pb.addFragement(ub,bb),ub=Pb.clearFragements()}var Ga=ub;oa&&oa.begin("decodeFastPath");switch(na){case 0:var mc=Ga.getLittleEndian16();Ha(Ga,mc);break;case 1:Ga.skipPosition(2);kb(Ga);
break;case 2:Ga.skipPosition(2);Aa(Ga);break;case 3:break;case 4:for(var Hc=Ga.getEnd(),tc,uc;Ga.getPosition()<Hc;){var Ic=Ga.getLittleEndian16();switch(Ic){case 1:case 6:tc=Ga.getLittleEndian16();uc=Ga.getLittleEndian16();Ga.getLittleEndian16();Ga.getBigEndian16();var Jc=void 0,Ma=void 0,ra=Ga,Na=tc,nc=uc,hc=ra.getByte();ra.skipPosition(2);var db=ra.getByte(),vb=ra.getLittleEndian16(),wb=ra.getLittleEndian16(),Zb=ra.getLittleEndian32(),$b=ra.getPosition()+Zb;switch(db){case 0:var Ec=rdpBitmap.byte2int(ra.getData(),
Zb,ra.getPosition());Ma=new Uint32Array(Ec.length);rdpcodecs.flipimage(Ec,0,Ma,vb,wb,1);U.setRGBs(Na,nc,vb,wb,Ma,0,vb);break;case 1:Tc(ra,hc,vb,wb);var ac=Kb.getData(),mb=Kb.getDataSize();Ma=new Uint32Array(mb);rdpcodecs.flipimage(ac,0,Ma,vb,wb,1);U.setRGBs(Na,nc,vb,wb,Ma,0,vb);break;case 3:for(var Db=$c.decode(ra,Zb),Ta=Db.getRects(),ic=Db.getTiles(),Fc=Db.getTileSize(),Ja=Db.getRectSize(),Oa=Ja?new ka(0,0,0,0):null,Lb=0;Lb<Fc;Lb++){var xb=ic[Lb];if(Ja)for(var Kc=0;Kc<Ja;Kc++)Ta[Kc].intersection(xb.x,
xb.y,64,64,Oa),Oa.isEmpty()||(Jc=64*(Oa.y-xb.y)+(Oa.x-xb.x),Oa.x+=Na,Oa.y+=nc,U.setRGBs(Oa.x,Oa.y,Oa.width,Oa.height,xb.data,Jc,64));else U.setRGBs(xb.x,xb.y,64,64,xb.data,0,64)}}ra.setPosition($b);break;case 4:var Uc=Ga,vc=Uc.getLittleEndian16(),Pa=Uc.getLittleEndian32();1==vc&&d("91"+Pa);break;default:svGlobal.logger.warn("Invalid surface cmd:"+Ic)}}break;case 5:break;case 6:break;case 8:break;case 9:ta(Ga,24);break;case 10:U.setCursor(Ga.getLittleEndian16());break;case 11:var bc=Ga.getLittleEndian16();
ta(Ga,bc);break;default:svGlobal.logger.warn("XXX RDP5 opcode "+na)}oa&&oa.end("decodeFastPath")}break;case 65:var Ka=Ub,cc=Ka.getPosition(),oc=Ka.getByte(),Xa=Ka.getByte();seqNoLow=Ka.getByte();seqNoHigh=Ka.getByte();reqType=Ka.getLittleEndian16;out=null;payloadLen=0;payload=null;averageRTT=bandwidth=baseRTT=0;if(0!=Xa)svGlobal.logger.warn("invalid msg channel data");else switch(reqType){case 1:case 4097:out=new Uint8Array(7);out[0]=65;out.set(Ka.getData().subarray(cc,cc+4),1);out[5]=0;out[6]=0;
d(out.buffer);break;case 20:case 276:case 4116:break;case 2:8==oc?(payloadLen=Ka.getLittleEndian16(),payload=Ka.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");break;case 43:8==oc?(payloadLen=Ka.getLittleEndian16(),payload=Ka.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");break;case 1065:case 1577:break;case 2112:baseRTT=Ka.getLittleEndian32();averageRTT=Ka.getLittleEndian32();break;case 2176:bandwidth=Ka.getLittleEndian32();averageRTT=Ka.getLittleEndian32();break;case 2240:baseRTT=
Ka.getLittleEndian32();bandwidth=Ka.getLittleEndian32();averageRTT=Ka.getLittleEndian32();break;default:svGlobal.logger.warn("Invalid msg channel type:"+reqType)}break;case 62:I(Ub.getUnicodeString(Ub.getEnd()-Ub.getPosition(),!1));default:if(X.onmessage)X.onmessage(a)}}else{F=parseInt(t.substring(0,2),16);var nb=t.substring(2);switch(F){case 0:var Ea=J.substring(J.indexOf("?")+1);d("00"+Ea);if(P&&X.onopen)X.onopen();break;case 15:if(X){gd=Vb=!1;xa=new S;if(nb){var Eb=JSON.parse(nb);Eb.capability&&
X&&(X.sessionInfo.suppressOutput=!!Eb.capability.suppressOutput)}if(!rc&&X&&X.onready)X.onready()}break;case 26:Vb=!0;break;case 56:X.sessionInfo.appInfo=JSON.parse(nb);break;case 62:I(nb)}X.onmessage(a)}}function I(a){var t=parseInt(a.substring(0,1),16);a=a.substring(1);switch(t){case 0:a=JSON.parse(a),E(),t=a.width,a=a.height,t==L&&a==O||q(t,a,!1,!1)}}function C(a,t){var u=a.getByte();if(0==u){svGlobal.logger.info("Send history"+(29==t?" for shadowing...":" for recording..."));var F=new Uint8Array(4);
F[0]=t;F[2]=1;F[3]=1;va.send(F.buffer);U.getHistory(t,d,function(B){oa&&oa.begin("his_mppc");Fa&&(F=Fa.toPDU(B))&&va.send(F.buffer);oa&&oa.end("his_mppc");if(Sa){oa&&oa.begin("his_mppc61");var G=Sa.toPDU(B);G&&va.send(G.buffer);oa&&oa.end("his_mppc61")}oa&&oa.begin("his_order");va.send(xa.toPDU(B).buffer);oa&&oa.end("his_order");oa&&oa.begin("his_fragments");Pb&&va.send(Pb.toPDU(B).buffer);oa&&oa.end("his_fragments");F=new Uint8Array(5);F[0]=t;F[2]=1;F[3]=0;F[4]=1;va.send(F.buffer)})}else if(1==u)switch(u=
a.getByte(),u){case 0:svGlobal.logger.warn("All history PDUs received");X.sessionInfo.suppressOutput&&Ra.monitorDef&&524292==X.sessionInfo.appInfo.protocolVersion?(X.suppressOutput(!0),X.suppressOutput(!1)):X.refreshOutput(0,0,L-1,O-1);if(X.onHistoryReceived)X.onHistoryReceived();break;case 1:break;case 2:oa&&oa.begin("his_mppc_dec");Fa||(Fa=new BulkData);Fa.fromStream(a);oa&&oa.end("his_mppc_dec");break;case 3:oa&&oa.begin("his_order_dec");xa.fromStream(a);oa&&oa.end("his_order_dec");break;case 8:Sa||
(Sa=new Bulk61Data);oa&&oa.begin("his_mppc_dec61");Sa.fromStream(a);oa&&oa.end("his_mppc_dec61");break;case 11:Pb||(Pb=new b);oa&&oa.begin("his_fragments_dec");Pb.fromStream(a);oa&&oa.end("his_fragments_dec");break;default:U.setHistory(u,a)}else if(2==u&&U.onHistoryDone)U.onHistoryDone();if(X.onReqHistory)X.onReqHistory()}function b(){var a=0,t=0,u=[0],F=new hi5.DataBuffer(u,0,0);this.addFragement=function(B,G){Vc(B.getData(),B.getPosition(),u,t,G);t+=G;a+=G};this.clearFragements=function(){F.setPosition(0);
F.markEnd(a);t=a=0;return F};this.reset=function(){t=a=0};this.toPDU=function(B){var G=10+u.length,N=new Uint8Array(G);N[0]=B;N[2]=1;N[3]=11;B=new hi5.DataBuffer(N,0,G);B.skipPosition(4);B.setLittleEndian16(a);B.setLittleEndian16(t);B.setLittleEndian16(u.length);B.setBytes(u);return N};this.fromStream=function(B){a=B.getLittleEndian16();t=B.getLittleEndian16();var G=B.getLittleEndian16();Vc(B.getData(),B.getPosition(),u,0,G)}}function Y(a,t,u,F,B,G,N,K){this.x=a;this.y=t;this.width=u;this.height=
F;this.andmask=B;this.xormask=G;this.bpp=N;this.cache_idx=K}function ta(a,t){if(!ad){var u=a.getLittleEndian16();var F=a.getLittleEndian16();var B=a.getLittleEndian16();var G=a.getLittleEndian16();var N=a.getLittleEndian16();var K=a.getLittleEndian16();var aa=a.getLittleEndian16();var la=a.getBytes(aa);a=a.getBytes(K);if(0>F||F>=G-1)F=0;0>B?B=0:B>=N&&(B=N-1);for(K=0;K<aa&&0==la[K];K++);a=new Y(F,B,G,N,a,la,t,u);t=a.x;F=a.y;B=a.width;G=a.height;N=a.andmask;aa=a.xormask;la=a.bpp;a=a.cache_idx;K=new Uint32Array(B*
G);var za=K[0]=0,$a=32==la,Da,qa;for(Da=0;Da<G;Da++)for(qa=0;qa<B;qa++){K[za]=sa(qa,Da,B,G,la,aa);if(!$a){var T=Da;1!=la&&(T=G-T-1);T=8*T*((B+7)/8|0)+qa;T=0==(N[T/8>>0]&128>>T%8)?1:0;if(0==T&&0!=K[za])K[za]=~K[za],K[za]|=4278190080;else if(1==T||0!=K[za])K[za]|=4278190080}za++}t=new La(a,K,t,F,B,G,la,aa.length,N.length);U.putCursor(a,t);U.setCursor(u)}}function sa(a,t,u,F,B,G){1!=B&&(t=F-t-1);t=(t*u+a)*B;u=t/8>>0;a=G[u]&255;switch(B){case 1:return 0==(a&128>>t%8)?0:4294967295;case 8:return 0==a?0:
4294967295;case 15:return a|=(G[u+1]&255)<<8,B=Array(4),od(a,15,B,0),B[0]<<16|B[1]<<8|B[2];case 16:return a|=(G[u+1]&255)<<8,B=Array(4),od(a,16,B,0),B[0]<<16|B[1]<<8|B[2];case 24:return(G[u+2]&255)<<16|(G[u+1]&255)<<8|a;case 32:return(G[u+3]&255)<<24|(G[u+2]&255)<<16|(G[u+1]&255)<<8|a}svGlobal.logger.warn("invalid bpp value for Xor Mask.");return 0}function La(a,t,u,F,B,G,N,K,aa){function la(){var Da=0;if(t)for(var qa=0,T=t.length;qa<T;qa++)0!=t[qa]&&(Da+=qa%B+(qa/B|0));return Da}function za(Da){switch(Da){case 0:return"none";
case 507:return"text";case 2046:case 4359:return"default";default:return""}}this.cache_idx=a;this.rawData=t;this.none=!t;this.hotX=u;this.hotY=F;this.width=B;this.height=G;this.xorSize=K;this.andSize=aa;this.result="";this.distance=0;this.bpp=N;this.system="";t&&(this.distance||(this.distance=la()),this.system||(this.system=za(this.distance),"none"==this.system&&(t=null)));a="";if(!this.system&&t){N=B*G*4;a=62+N+K+aa;var $a=new Uint8Array(a);a=new hi5.DataBuffer($a,0,a);a.setLittleEndian16(0);a.setLittleEndian16(2);
a.setLittleEndian16(1);a.setByte(B);a.setByte(G);a.setByte(0);a.setByte(0);a.setLittleEndian16(u);a.setLittleEndian16(F);a.setLittleEndian32(40+N+K+aa);a.setLittleEndian32(22);a.setLittleEndian32(40);a.setLittleEndian32(B);a.setLittleEndian32(2*G);a.setLittleEndian16(1);a.setLittleEndian16(32);a.setLittleEndian32(0);a.setLittleEndian32(K+aa);a.setLittleEndian32(0);a.setLittleEndian32(0);a.setLittleEndian32(0);a.setLittleEndian32(0);for(u=G-1;0<=u;u--)for(F=0;F<B;F++)G=t[B*u+F],a.setByte(G&255),a.setByte(G>>
8&255),a.setByte(G>>16&255),a.setByte(G>>24&255);a="data:image/x-icon;base64,"+hi5.Base64.enc(a.getData())}this.url=a}function Aa(a){var t=0;a.skipPosition(2);var u=a.getLittleEndian16();a.skipPosition(2);var F=Array(u);var B=Array(u);var G=Array(u);a=a.getBytes(3*u);for(var N=0;N<u;N++)F[N]=a[t],B[N]=a[t+1],G[N]=a[t+2],t+=3;256==u&&(xa.paletteRdp||(xa.paletteRdp=Array(3)),xa.paletteRdp[0]=F,xa.paletteRdp[1]=B,xa.paletteRdp[2]=G)}function Ha(a,t){for(var u=0,F,B;u<t;){F=a.getByte();B=F&3;switch(B){case 1:var G=
a,N=F;0!=(N&8)&&(xa.orderType=G.getByte());var K=void 0,aa=G,la=hd[xa.orderType],za=0;0!=(N&64)&&la--;0!=(N&128)&&(la=2>la?0:la-2);for(var $a=0;$a<la;$a++)K=aa.getByte(),za|=K<<8*$a;var Da=za;if(0!=(N&4)){if(0==(N&32)){var qa=G,T=xa.bounds,Ib=qa.getByte();0!=(Ib&1)?T.left=ea(qa,T.left,!1):0!=(Ib&16)&&(T.left=ea(qa,T.left,!0));0!=(Ib&2)?T.top=ea(qa,T.top,!1):0!=(Ib&32)&&(T.top=ea(qa,T.top,!0));0!=(Ib&4)?T.right=ea(qa,T.right,!1):0!=(Ib&64)&&(T.right=ea(qa,T.right,!0));0!=(Ib&8)?T.bottom=ea(qa,T.bottom,
!1):0!=(Ib&128)&&(T.bottom=ea(qa,T.bottom,!0))}var kc=xa.bounds;M=kc.left;0>M&&(M=0);ca=kc.top;0>ca&&(ca=0);pa=kc.right;pa>=L&&(pa=L-1);ia=kc.bottom;ia>=O&&(ia=O-1)}var pb=0!=(N&16);switch(xa.orderType){case 0:var gb=G,ab=xa.destBlt,fc=Da,Bc=pb;0!=(fc&1)&&(ab.x=ea(gb,ab.x,Bc));0!=(fc&2)&&(ab.y=ea(gb,ab.y,Bc));0!=(fc&4)&&(ab.cx=ea(gb,ab.cx,Bc));0!=(fc&8)&&(ab.cy=ea(gb,ab.cy,Bc));0!=(fc&16)&&(ab.opcode=gb.getByte()&15);var Wb=ab.x,Qb=ab.y,Bb=ab.cx,Cc=ab.cy,Zc=ab.opcode;if(!(Wb>L||Qb>O)){Wb<M&&(Bb-=
M-Wb,Wb=M);var Qc=Wb+Bb-1;Qc>pa&&(Bb-=Qc-pa);Qb<ca&&(Cc-=ca-Qb,Qb=ca);var Dc=Qb+Cc-1;Dc>ia&&(Cc-=Dc-ia);1>Bb||1>Cc||U.bitBlt(Zc,L,Wb,Qb,Bb,Cc,null,0,0,0)}break;case 1:var Xb=void 0,Ba=G,Ca=xa.patBlt,Cb=Da,sc=pb;0!=(Cb&1)&&(Ca.x=ea(Ba,Ca.x,sc));0!=(Cb&2)&&(Ca.y=ea(Ba,Ca.y,sc));0!=(Cb&4)&&(Ca.cx=ea(Ba,Ca.cx,sc));0!=(Cb&8)&&(Ca.cy=ea(Ba,Ca.cy,sc));0!=(Cb&16)&&(Ca.opcode=Ba.getByte(),Ca.opcode=Ca.opcode&3|(Ca.opcode&48)>>2);0!=(Cb&32)&&(Ca.backgroundColor=eb(Ba));0!=(Cb&64)&&(Ca.foregroundColor=eb(Ba));
var Jb=Ca.brush,qb=Cb>>7;0!=(qb&1)&&(Jb.xOrigin=Ba.getByte());0!=(qb&2)&&(Jb.yOrigin=Ba.getByte());0!=(qb&4)&&(Jb.style=Ba.getByte());var lc=Jb.pattern;0!=(qb&8)&&(lc[0]=Ba.getByte());if(0!=(qb&16))for(var ba=1;8>ba;ba++)lc[ba]=Ba.getByte();Jb.pattern=lc;var Gc=Ca.x,Rc=Ca.y;if(!(Gc>pa||Rc>ia)){var ma=Ca.opcode,da=Gc,rb=Rc,hb=Ca.cx,sb=Ca.cy,fa=Ca.foregroundColor,gc=Ca.backgroundColor,lb=Ca.brush.xOrigin,Q=Ca.brush.yOrigin,ja=Ca.brush.style,Sc=Ca.brush.pattern;fa=Ab(fa);gc=Ab(gc);if(!(da>L||rb>O)){da<
M&&(hb-=M-da,da=M);var cb=da+hb-1;cb>pa&&(hb-=cb-pa);rb<ca&&(sb-=ca-rb,rb=ca);var Ua=rb+sb-1;Ua>ia&&(sb-=Ua-ia);if(!(1>hb||1>sb))switch(ja){case 0:Xb=new Uint32Array(hb*sb);for(var na=0;na<Xb.length;na++)Xb[na]=fa;U.bitBlt(ma,L,da,rb,hb,sb,Xb,hb,0,0);break;case 2:svGlobal.logger.warn("hatch");break;case 3:Xb=new Uint32Array(hb*sb);var Rb=0;for(na=0;na<sb;na++)for(var Yb=0;Yb<hb;Yb++)Xb[Rb]=0==(Sc[(na+Q)%8]&1<<(Yb+lb)%8)?fa:gc,Rb++;U.bitBlt(ma,L,da,rb,hb,sb,Xb,hb,0,0);break;default:svGlobal.logger.warn("Unsupported brush style "+
ja)}}}break;case 2:var tb=void 0,bb=G,Ia=xa.screenBlt,ib=Da,Sb=pb;0!=(ib&1)&&(Ia.x=ea(bb,Ia.x,Sb));0!=(ib&2)&&(Ia.y=ea(bb,Ia.y,Sb));0!=(ib&4)&&(Ia.cx=ea(bb,Ia.cx,Sb));0!=(ib&8)&&(Ia.cy=ea(bb,Ia.cy,Sb));0!=(ib&16)&&(Ia.opcode=bb.getByte()&15);0!=(ib&32)&&(Ia.srcX=ea(bb,Ia.srcX,Sb));0!=(ib&64)&&(Ia.srcY=ea(bb,Ia.srcY,Sb));var Wa=Ia.x,ub=Ia.y;if(!(Wa>pa||ub>ia)){var Ga=Ia.cx,mc=Ia.cy,Hc=Ia.opcode,tc=Ia.srcX,uc=Ia.srcY;Wa<M&&(tb=M-Wa,Wa=M,tc+=tb,Ga-=tb);var Ic=Wa+Ga-1;Ic>pa&&(tb=Ic-pa,Ga-=tb);ub<ca&&
(tb=ca-ub,ub=ca,uc+=tb,mc-=tb);var Jc=ub+mc-1;Jc>ia&&(tb=Jc-ia,mc-=tb);1>Ga||1>mc||(12==Hc?U.moveArea(tc,uc,Ga,mc,Wa-tc,ub-uc):U.bitBlt(Hc,Ga,Wa,ub,Ga,mc,null,Ga,tc,uc))}break;case 9:var Ma=G,ra=xa.line,Na=Da,nc=pb;0!=(Na&1)&&(ra.mixmode=Ma.getLittleEndian16());0!=(Na&2)&&(ra.startX=ea(Ma,ra.startX,nc));0!=(Na&4)&&(ra.startY=ea(Ma,ra.startY,nc));0!=(Na&8)&&(ra.endX=ea(Ma,ra.endX,nc));0!=(Na&16)&&(ra.endY=ea(Ma,ra.endY,nc));0!=(Na&32)&&(ra.backgroundColor=eb(Ma));0!=(Na&64)&&(ra.opcode=Ma.getByte());
var hc=ra.pen,db=Na>>7;0!=(db&1)&&(hc.style=Ma.getByte());0!=(db&2)&&(hc.width=Ma.getByte());0!=(db&4)&&(hc.color=eb(Ma));var vb=ra.startX,wb=ra.startY,Zb=ra.endX,$b=ra.endY,Ec=ra.pen.color,ac=ra.opcode-1;if(wb==$b){if(vb>Zb){var mb=vb;vb=Zb;Zb=mb}vb<M&&(vb=M);Zb>pa&&(Zb=pa)}else vb==Zb&&(wb>$b&&(mb=wb,wb=$b,$b=mb),wb<ca&&(wb=ca),wb>ia&&(wb=ia));bd(vb,wb,Zb,$b,Ec,ac);break;case 10:var Db=G,Ta=xa.rectangle,ic=Da,Fc=pb;0!=(ic&1)&&(Ta.x=ea(Db,Ta.x,Fc));0!=(ic&2)&&(Ta.y=ea(Db,Ta.y,Fc));0!=(ic&4)&&(Ta.cx=
ea(Db,Ta.cx,Fc));0!=(ic&8)&&(Ta.cy=ea(Db,Ta.cy,Fc));0!=(ic&16)&&(Hb=Hb&4294967040|Db.getByte());0!=(ic&32)&&(Hb=Hb&4294902015|Db.getByte()<<8);0!=(ic&64)&&(Hb=Hb&4278255615|Db.getByte()<<16);Ta.color=Hb;var Ja=Ta.x,Oa=Ta.y,Lb=Ta.cx,xb=Ta.cy;if(!(Ja>pa||Oa>ia)){Ja<M&&(Lb-=M-Ja,Ja=M);var Kc=Ja+Lb-1;Kc>pa&&(Lb-=Kc-pa);Oa<ca&&(xb-=ca-Oa,Oa=ca);var Uc=Oa+xb-1;Uc>ia&&(xb-=Uc-ia);1>Lb||1>xb||U.fillRect(Ja,Oa,Lb,xb,Ab(Ta.color))}break;case 11:var vc=G,Pa=xa.deskSave,bc=Da,Ka=pb;0!=(bc&1)&&(Pa.offset=vc.getLittleEndian32());
0!=(bc&2)&&(Pa.left=ea(vc,Pa.left,Ka));0!=(bc&4)&&(Pa.top=ea(vc,Pa.top,Ka));0!=(bc&8)&&(Pa.right=ea(vc,Pa.right,Ka));0!=(bc&16)&&(Pa.bottom=ea(vc,Pa.bottom,Ka));0!=(bc&32)&&(Pa.action=vc.getByte());var cc=Pa.right-Pa.left+1,oc=Pa.bottom-Pa.top+1;0==Pa.action?1>cc||1>oc||U.saveDesktop(Pa.left,Pa.top,cc,oc,Pa.offset):U.restoreDesktop(Pa.left,Pa.top,cc,oc,Pa.offset);break;case 13:var Xa=void 0,nb=G,Ea=xa.memBlt,Eb=Da,Mb=pb;0!=(Eb&1)&&(Ea.cacheID=nb.getByte(),Ea.colorTable=nb.getByte());0!=(Eb&2)&&(Ea.x=
ea(nb,Ea.x,Mb));0!=(Eb&4)&&(Ea.y=ea(nb,Ea.y,Mb));0!=(Eb&8)&&(Ea.cx=ea(nb,Ea.cx,Mb));0!=(Eb&16)&&(Ea.cy=ea(nb,Ea.cy,Mb));0!=(Eb&32)&&(Ea.opcode=nb.getByte()&15);0!=(Eb&64)&&(Ea.srcX=ea(nb,Ea.srcX,Mb));0!=(Eb&128)&&(Ea.srcY=ea(nb,Ea.srcY,Mb));0!=(Eb&256)&&(Ea.cacheIDX=nb.getLittleEndian16());var Lc=Ea.x,Mc=Ea.y;if(!(Lc>pa||Mc>ia)){var Wc=Ea.cx,pc=Ea.cy,id=Ea.srcX,ob=Ea.srcY;Lc<M&&(Xa=M-Lc,Lc=M,id+=Xa,Wc-=Xa);var Xc=Lc+Wc-1;Xc>pa&&(Xa=Xc-pa,Wc-=Xa);Mc<ca&&(Xa=ca-Mc,Mc=ca,ob+=Xa,pc-=Xa);var yb=Mc+pc-
1;yb>ia&&(Xa=yb-ia,pc-=Xa);1>Wc||1>pc||U.drawBitmap(Ea.cacheID,Ea.cacheIDX,Lc,Mc,Wc,pc,id,ob,Ea.opcode)}break;case 22:var wc=G,Qa=xa.polyLine,qc=Da,c=pb;0!=(qc&1)&&(Qa.x=ea(wc,Qa.x,c));0!=(qc&2)&&(Qa.y=ea(wc,Qa.y,c));0!=(qc&4)&&(Qa.opcode=wc.getByte());0!=(qc&16)&&(Qa.foregroundColor=eb(wc));0!=(qc&32)&&(Qa.lines=wc.getByte());if(0!=(qc&64)){var Nc=wc.getByte();Qa.dataSize=Nc;Qa.data=wc.getBytes(Nc)}var cd=Qa.x,yd=Qa.y,ie=Qa.foregroundColor,Kd=Qa.lines,je=Qa.dataSize,zd=Qa.data,pd=Array(1);pd[0]=
Math.floor((Kd-1)/4)+1;for(var dd=0,ke=0,le=Qa.opcode-1,Ad=0;Ad<Kd&&pd[0]<je;Ad++){var me=cd,ne=yd;0==Ad%4&&(dd=zd[ke++]);0==(dd&192)&&(dd|=192);0!=(dd&64)&&(cd+=V(zd,pd));0!=(dd&128)&&(yd+=V(zd,pd));bd(me,ne,cd,yd,ie,le);dd<<=2}break;case 27:var Va=G,jb=xa.text2,Ya=Da;0!=(Ya&1)&&(jb.font=Va.getByte());0!=(Ya&2)&&(jb.flags=Va.getByte());0!=(Ya&4)&&(jb.opcode=Va.getByte());0!=(Ya&8)&&(jb.mixmode=Va.getByte());0!=(Ya&16)&&(jb.foregroundColor=eb(Va));0!=(Ya&32)&&(jb.backgroundColor=eb(Va));0!=(Ya&64)&&
(jb.clipLeft=Va.getLittleEndian16());0!=(Ya&128)&&(jb.clipTop=Va.getLittleEndian16());0!=(Ya&256)&&(jb.clipRight=Va.getLittleEndian16());0!=(Ya&512)&&(jb.clipBottom=Va.getLittleEndian16());0!=(Ya&1024)&&(jb.boxLeft=Va.getLittleEndian16());0!=(Ya&2048)&&(jb.boxTop=Va.getLittleEndian16());0!=(Ya&4096)&&(jb.boxRight=Va.getLittleEndian16());0!=(Ya&8192)&&(jb.boxBottom=Va.getLittleEndian16());0!=(Ya&16384)&&Va.skipPosition(1);0!=(Ya&32768)&&Va.skipPosition(1);0!=(Ya&65536)&&Va.skipPosition(1);0!=(Ya&131072)&&
Va.skipPosition(1);0!=(Ya&262144)&&Va.skipPosition(7);0!=(Ya&524288)&&(jb.x=Va.getLittleEndian16());0!=(Ya&1048576)&&(jb.y=Va.getLittleEndian16());if(0!=(Ya&2097152)){var Ld=Va.getByte();jb.length=Ld;jb.text=Va.getBytes(Ld)}var zb=jb,oe=zb.font,pe=zb.flags,qe=zb.mixmode,re=Ab(zb.foregroundColor),se=Ab(zb.backgroundColor),Md=zb.clipLeft,Nd=zb.clipTop,te=zb.clipRight,ue=zb.clipBottom,qd=zb.boxLeft,Od=zb.boxTop,ve=zb.boxBottom,we=zb.x,xe=zb.y,ye=zb.length,ze=zb.text,Bd=zb.boxRight-qd;qd+Bd>L&&(Bd=L-
qd);U.drawText(oe,pe,qe,re,se,Md,Nd,te-Md,ue-Nd,qd,Od,Bd,ve-Od,we,xe,ye,ze,M,ca,pa,ia);break;default:svGlobal.logger.warn("XXX Order type "+xa.orderType)}0!=(N&4)&&Ob();break;case 2:var Pd=a,Qd=F>>2;switch(Qd){case 11:var rd=Pd,Rd=rd.getLittleEndian16()-3,Ae=rd.getPosition()+Rd;X.onAltSecWindows(rd,Rd);rd.setPosition(Ae);break;case 13:Pd.getLittleEndian32();break;default:svGlobal.logger.warn("Alt Sec order:"+Qd)}break;case 3:var jc=a;var Sd=jc.getLittleEndian16();var sd=jc.getLittleEndian16();var Td=
jc.getByte();var Be=jc.getPosition()+Sd+7;if(jc.has(Sd+7)){switch(Td){case 0:var Ud=void 0,xc=jc,Ce=xc.getByte();xc.skipPosition(1);var Cd=xc.getByte(),td=xc.getByte(),ud=xc.getByte(),vd=Math.floor((ud+7)/8),De=xc.getLittleEndian16(),Ee=xc.getLittleEndian16(),Fe=xc.getPosition();xc.skipPosition(De);W!=ud&&(svGlobal.logger.warn("Server limited colour depth to "+ud+" bits"),z(ud,!0));var Dd=Array(Cd*td*vd);Dd[0]=0;for(var Ed=Cd*vd,wd=0;wd<td;wd++)Ud=Fe+(td-wd-1)*Ed,xc.copyToByteArray(Dd,wd*Ed,Ud,Ed);
var Ge=Oc(Dd,vd);U.putBitmap(Ce,Ee,new rdpcodecs.Bitmap(Ge,Cd,td,0,0,8*vd,null,0));break;case 1:svGlobal.logger.info("TODO: color cache");break;case 2:var Vd=void 0,jd=void 0,Fb=jc,He=sd,Ie=Fb.getByte();Fb.getByte();var Fd=Fb.getByte(),Gd=Fb.getByte(),kd=Fb.getByte(),Je=Math.floor((kd+7)/8),Ke=Fb.getLittleEndian16(),Le=Fb.getLittleEndian16();W!=kd&&(svGlobal.logger.warn("Server limited colour depth to "+kd+" bits"),z(kd,!0));0!=(He&1024)?jd=Ke:(Fb.skipPosition(2),jd=Fb.getLittleEndian16(),Fb.skipPosition(2),
Fb.skipPosition(2));Vd=1!=Je?dc(Fd,Gd,jd,Fb.getData(),Fb.getPosition()):ld(Fd,Gd,jd,Fb.getData(),Fb.getPosition());var Me=Fb.getBytes(jd);U.putBitmap(Ie,Le,new rdpcodecs.Bitmap(Vd,Fd,Gd,0,0,kd,Me,1));break;case 3:var Wd=void 0,Hd=void 0,Id=void 0,Xd=void 0,Yd=void 0,Zd=void 0,$d=void 0,ae=void 0,be=void 0,Pc=jc;ae=Pc.getByte();$d=Pc.getByte();for(var ce=0;ce<$d;ce++)Zd=Pc.getLittleEndian16(),Yd=Pc.getLittleEndian16(),Xd=Pc.getLittleEndian16(),Id=Pc.getLittleEndian16(),Hd=Pc.getLittleEndian16(),Wd=
Hd*Math.floor((Id+7)/8)+3&-4,be=new g(Yd,Xd,Id,Hd,Pc.getBytes(Wd)),U.putFont(ae,Zd,be);break;case 4:R(jc,sd,!1);break;case 5:R(jc,sd,!0);break;case 7:svGlobal.logger.info("CacheBrush...=");break;case 8:var ed=void 0,Gb=jc,de=sd&7,ee=Gb.getLittleEndian16();Gb.skipPosition(8);var xd=Gb.getByte();W!=xd&&(svGlobal.logger.warn("Server limited colour depth to "+xd+" bits"),z(xd,!0));Gb.skipPosition(2);var Jd=Gb.getByte(),md=Gb.getLittleEndian16(),nd=Gb.getLittleEndian16(),fe=Gb.getLittleEndian32(),ge=Gb.getPosition();
if(1==Jd){Tc(Gb,xd,md,nd);var Ne=Kb.getData(),Oe=Kb.getDataSize();ed=new Uint32Array(Oe);rdpcodecs.flipimage(Ne,0,ed,md,nd,1);var Pe=Gb.getPosition()-ge;Gb.setPosition(ge);var Qe=Gb.getBytes(Pe);U.putBitmap(de,ee,new rdpcodecs.Bitmap(ed,md,nd,0,0,32,Qe,2))}else if(0==Jd){var he=rdpBitmap.byte2int(Gb.getData(),fe,Gb.getPosition());ed=new Uint32Array(he.length);rdpcodecs.flipimage(he,0,ed,md,nd,1);U.putBitmap(de,ee,new rdpcodecs.Bitmap(ed,md,nd,0,0,32,null,0))}else svGlobal.logger.warn("XXX invalid codec id:"+
Jd);Gb.skipPosition(fe);break;default:svGlobal.logger.warn("invalid second Order, type="+Td)}jc.setPosition(Be)}}u++}}function R(a,t,u){var F;var B=t&7;var G=((t&120)>>3)-2;t=(t&65408)>>7;yc!=G&&(z(8*G,!0),svGlobal.logger.warn("Server limited colour depth to "+G+" bytes"));0!=(t&2)&&a.skipPosition(8);if(0!=(t&1))var N=F=fb.readVar2Bytes(a);else F=fb.readVar2Bytes(a),N=fb.readVar2Bytes(a);var K=fb.readVar4Bytes(a);var aa=fb.readVar2Bytes(a);u&&0==(t&8)&&a.skipPosition(8);if(u){u=1!=G?dc(F,N,K,a.getData(),
a.getPosition()):ld(F,N,K,a.getData(),a.getPosition());a=a.getBytes(K);if(!u){svGlobal.logger.warn("Failed to decompress bitmap data");return}F=new rdpcodecs.Bitmap(u,F,N,0,0,8*G,a,1)}else{u=Array(F*N*G);u[0]=0;var la=a.getPosition(),za=F*G;for(K=0;K<N;K++){var $a=la+(N-K-1)*za;a.copyToByteArray(u,K*za,$a,za)}a=Oc(u,G);F=new rdpcodecs.Bitmap(a,F,N,0,0,8*G,null,0)}U.putBitmap(B,aa,F);0!=(t&2)&&svGlobal.logger.warn("XXX:TODO, persistent")}function ea(a,t,u){return u?(a=a.getByte()<<24>>24,t+a):t=a.getLittleEndian16()<<
16>>16}function eb(a){var t;var u=t=a.getByte();t=a.getByte();u|=t<<8;t=a.getByte();return u|t<<16}function kb(a){for(var t,u,F,B,G,N,K,aa,la,za=a.getLittleEndian16(),$a=0;$a<za;$a++)if(t=a.getLittleEndian16(),u=a.getLittleEndian16(),F=a.getLittleEndian16(),B=a.getLittleEndian16(),G=a.getLittleEndian16(),N=a.getLittleEndian16(),K=a.getLittleEndian16(),aa=a.getLittleEndian16(),la=a.getLittleEndian16(),F=F-t+1,B=B-u+1,W!=K&&(svGlobal.logger.warn("Server limited colour depth to "+K+" bits"),z(K,!0)),
0==aa){aa=G*yc;la=N*aa;K=new Uint8Array(la);for(var Da=a.getPosition(),qa=0;qa<N;qa++)Vc(a.getData(),Da,K,(N-qa-1)*aa,aa),Da+=aa;a.skipPosition(la);K=Oc(K,yc);U.setRGBs(t,u,F,B,K,0,G)}else 0!=(aa&1024)?K=la:(a.skipPosition(2),K=a.getLittleEndian16(),a.skipPosition(4)),aa=a.getData(),la=K,Da=a.getPosition(),qa=u,u=B,B=yc,1>F*u*G*N||(1!=B?U.setRGBs(t,qa,F,u,dc(G,N,la,aa,Da),0,G):(N=ld(G,N,la,aa,Da),aa=qa,B=Oc(N,B),U.setRGBs(t,aa,F,u,B,0,G))),a.skipPosition(K)}function Ob(){M=0;pa=L-1;ca=0;ia=O-1}function bd(a,
t,u,F,B,G){var N=Math.min(a,u),K=Math.max(a,u),aa=Math.min(t,F),la=Math.max(t,F);B=Ab(B);if(!(N>=M&&K<=pa&&aa>=ca&&la<=ia)){if(N>pa||K<M||aa>ia||la<ca)return;if(a==u)t>F&&(N=t,t=F,F=N),t<ca&&(t=ca),F>ia&&(F=ia);else if(t==F)a>u&&(N=a,a=u,u=N),a<M&&(a=M),u>pa&&(u=pa);else{N=xa._line;N.set(a,t,u,F);K=N.intersection(M,ca,pa,ca);aa=[];K&&aa.push(K.x,K.y);(K=N.intersection(pa,ca,pa,ia))&&aa.push(K.x,K.y);(K=N.intersection(M,ia,pa,ia))&&aa.push(K.x,K.y);(K=N.intersection(M,ca,M,ia))&&aa.push(K.x,K.y);2==
aa.length&&(a>=M&&a<=pa&&t>=ca&&t<=ia?aa.push(a,t):u>=M&&u<=pa&&F>=ca&&F<=ia&&aa.push(u,F));if(4!=aa.length)return;a=aa[0];t=aa[1];u=aa[2];F=aa[3]}}12==G?U.drawLine(a,t,u,F,B):U.drawLineExt(a,t,u,F,B,G)}function V(a,t){var u=a[t[0]++]&255,F=u&128;u=0!=(u&64)?u|-64:u&63;0!=F&&(u=u<<8|a[t[0]++]&255);return u}function Yc(a){if(!X)return!0;svGlobal.logger.warn("closed "+(X.sessionInfo.appInfo?X.sessionInfo.appInfo.numericId:0));X&&(ec=!1);if(gd)return svGlobal.logger.info("Req credential"),!1;Kb=Tc=$c=
J=xa=null;var t=!0;try{if(null!=Za&&(Za.exit(a),Za=null,t=!1),X.onclose)X.onclose(Vb);else svGlobal.logger.info("onclose: null")}catch(u){}Ub=null;va&&(va.onopen=null,va.onmessage=null,va.onclose=null,va=va.onerror=null);Pb=null;Fa&&(Fa.release(),Fa=null);Sa&&(Sa.release(),Sa=null);X=null;return t}function od(a,t,u,F){switch(t){case 16:t=a>>8&248;var B=a>>3&252;a=a<<3&255;u[F]=t|t>>5;u[F+1]=B|B>>6;u[F+2]=a|a>>5;u[F+3]=255;break;case 15:t=a>>7&248;B=a>>2&248;a=a<<3&255;u[F]=t|t>>5;u[F+1]=B|B>>5;u[F+
2]=a|a>>5;u[F+3]=255;break;case 8:u[F]=xa.paletteRdp[0][a];u[F+1]=xa.paletteRdp[1][a];u[F+2]=xa.paletteRdp[2][a];u[F+3]=255;break;case 32:u[F]=a&255,u[F+1]=a>>8&255,u[F+2]=a>>16&255,u[F+3]=a>>24&255;default:u[F]=a&255,u[F+1]=a>>8&255,u[F+2]=a>>16&255,u[F+3]=255}}function Oc(a,t){var u=a.length/t>>0,F=new Uint32Array(u),B=Ab;switch(t){case 1:for(var G=0;G<u;G++)F[G]=B(a[G]);break;case 2:for(G=0;G<u;G++)F[G]=B(a[2*G+1]<<8|a[2*G]);break;default:for(G=0;G<u;G++)F[G]=B(a[G*t+2]<<16)|a[G*t+1]<<8|a[G*t]}return F}
this.sessionInfo={domain:"",userName:"",sessionId:0,joinedSessions:[],suppressOutput:!1,appInfo:null};this.mode=0;this.remoteAppLogin=!0;var X=this,Vb=!1,gd=!1,Tb="object"==typeof J?J:null,Ra=Tb?{}:hi5.string.queryToObj(J.substring(J.indexOf("?")+1)),Vc=hi5.Arrays.arraycopy,oa=null,Fa=null,Sa=null;this.protocol=Tb?"":J.substring(0,J.indexOf("://")).toLowerCase();this.setProfiler=function(a){oa=a};this.getProfiler=function(){return oa};this.gateway=function(){if(Tb)return"";var a=J.lastIndexOf("/RDP?");
-1==a&&(a=J.lastIndexOf("/JOIN?"));-1==a&&(a=J.lastIndexOf("/PLAY?"));return J.substring(0,a).replace(/wss:\/\//ig,"https://").replace(/ws:\/\//ig,"http://")}();this.getGatewayAddr=function(){var a=X.gateway;X.ongetgatewayaddress&&(a=X.ongetgatewayaddress(a));return a};var rc="object"==typeof J||0<J.indexOf("/PLAY?"),Nb=!rc&&0<J.indexOf("invitation=");if(rc)this.mode=1,Tb?J="":(L=640,O=480);else if(0<J.indexOf("/JOIN?")||Nb)this.mode=2;Ra.symlink&&Ra.parameters&&hi5.string.queryToObj(Ra.parameters,
Ra);Ra.gateway||(J+="&gateway="+encodeURIComponent(X.gateway));"useSSL"in Ra||(J+="&useSSL="+("wss"==X.protocol));this.getDisplayName=ya;this.server=ya();this.port=parseInt(Ra.port,10);this.getURL=function(){return J};this.getColor=function(){return W};var ka=hi5.graphic.Rectangle,ad=0<J.indexOf("nocurosr=on"),ua=0<J.indexOf("startProgram=app");J.indexOf("mapDisk=on");this.isRemoteApp=function(){return ua};var va=null,ec=!1,Ac=!1,M=0,ca=0,pa=L-1,ia=O-1,yc=0,Za=null,Ab=ha,dc=rdpBitmap.decompressInt16,
ld=rdpBitmap.decompress;z(W,!0);this.setColor=function(a){z(a,!1)};this.setResolution=function(a,t){q(a,t,!1)};var zc={tag:0,channels:0,bitsPerSample:0,samplePerSec:22050,toStream:function(a){a.setLittleEndian16(this.tag);a.setLittleEndian16(this.channels);a.setLittleEndian16(this.bitsPerSample);a.setLittleEndian32(this.samplePerSec)},fromStream:function(a){this.tag=a.getLittleEndian16();this.channels=a.getLittleEndian16();this.bitsPerSample=a.getLittleEndian16();this.samplePerSec=a.getLittleEndian32()}};
this.setAudioFormat=function(a){zc.tag=a.tag;zc.channels=a.channels;zc.samplePerSec=a.samplePerSec;zc.bitsPerSample=a.bitsPerSample};this.running=function(){return ec};this.setJoinMode=function(a){d("8E1"+a)};this.setJoinCloseMode=function(a){d("8EB3\t"+a)};this.refuseControl=function(a){d("8E3"+a)};this.giveControl=function(a){d("8E4"+a)};this.pauseSession=function(a,t){d("8EB"+(t?1:0)+"\t"+a)};this.closeSession=function(a){d("8EB2\t"+a)};this.requestControl=function(){d("8E2")};this.saveSession=
function(a){d("8E9"+(a.save?1:0)+"\t"+(a.timeout||0)+"\t"+(a.id||0))};this.allowJoin=function(a,t){d("8EA"+a+"\t"+(t?1:0))};var fd=new function(){function a(){if(u&&0<u.length){var B=u.shift();fd.sendSingleKey(B.down,B.key);0<u.length?setTimeout(a,F):u=null}}var t={" ":57,space:57,pgup:201,pageup:201,pgdn:209,pagedown:209,end:207,home:199,left:203,up:200,right:205,down:208,printscreen:183,insert:210,del:211,"delete":211,altgr:184,windows:219,windowsright:220,context:221,esc:1,backspace:14,tab:15,
enter:28,meta:29,command:29,ctrl:29,shift:42,alt:56,capslock:58,f1:59,f2:60,f3:61,f4:62,f5:63,f6:64,f7:65,f8:66,f9:67,f10:68,f11:87,f12:88,numlock:69,scrolllock:70,add:78};this.sendSingleKey=function(B,G){var N=t[G.toLowerCase()];N?X.writeScancode(B,N):(N=G.length,0!=N&&(1==N?X.writeKeyCode(B,G.toUpperCase().charCodeAt(0)):B&&X.writeText(G)))};var u=null,F=0;this.sendKeyComb=function(B,G){B=B.split("+");var N=B.length,K;if(0!=N){var aa=null,la=[];for(K=0;K<N;K++){var za=B[K];""==za&&""==aa&&(za="Add");
""!=za&&la.push({key:za,down:!0});aa=za}N=la.length;for(K=N-1;0<=K;K--)la.push({key:la[K].key,down:!1});if(G)u=la,F=G,a();else for(K=0,N=la.length;K<N;K++)fd.sendSingleKey(la[K].down,la[K].key)}}};this.writeRawInput=function(a){d(a);if(X.onactivity)X.onactivity(a);if(Za&&a.substring){var t=a.substring(0,2);a=a.substring(2);if("80"==t||"81"==t||"82"==t||"83"==t){a=a.split("\t");var u=new Uint8Array(7),F=0;var B=parseInt(a[0]);var G=parseInt(a[1]);switch(parseInt(t,16)){case 128:F=("0"==a[2]?4096:8192)|
32768;break;case 129:F="0"==a[2]?4096:8192;break;case 130:F=2048;break;case 131:F="0"==a[2]?33408:33664}u[0]=32;u[1]=F&255;u[2]=F>>8;u[3]=B&255;u[4]=B>>8;u[5]=G&255;u[6]=G>>8;Za.add(new RecordingObj(u,0,7,60))}}};var xa=new S,Hb=0;this.resetStatus=E;this.notify=function(a,t){a="8E6"+a;t&&(a+="\t"+t.join(";"));d(a)};this.run=function(){v()};this.getDesktop=function(){return U};var Ub=new hi5.DataBuffer([],0,0);this.suppressOutput=function(a){if(!X.sessionInfo.suppressOutput)return!1;void 0==a&&(a=
!0);var t=new Uint8Array(a?3:11);t[0]=146;t[1]=3;t[2]=a?1:0;a||(t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=L-1,t[8]=L-1>>8,t[9]=O-1,t[10]=O-1>>8);va.send(t.buffer);return!0};this.refreshOutput=function(a,t,u,F){var B=new Uint8Array(u?11:3);B[0]=146;B[1]=3;B[2]=2;u&&(B[3]=a,B[4]=a>>8,B[5]=t,B[6]=t>>8,B[7]=u,B[8]=u>>8,B[9]=F,B[10]=F>>8);va.send(B.buffer)};var Pb=new b,$c=new rdpcodecs.RemoteFX(wa),Kb=new rdpcodecs.NSCodec,Tc=Kb.process,hd=[1,2,1,0,0,0,0,1,1,2,1,1,0,2,3,1,2,2,2,2,1,2,1,0,2,1,2,3],fb={readVar4Bytes:function(a){var t=
a.getByte(),u=0;switch((t&192)>>6){case 0:u=t&63;break;case 1:u=(t&63)<<8|a.getByte();break;case 2:u=(t&63)<<16;t=a.getByte();u|=t<<8;t=a.getByte();u|=t;break;case 3:u=(t&63)<<24,t=a.getByte(),u|=t<<16,t=a.getByte(),u|=t<<8,t=a.getByte(),u|=t}return u},readVar2Bytes:function(a){var t=a.getByte();return 0!=(t&128)?(t&127)<<8|a.getByte():t}};this._unload=Yc;this.close=function(a){Vb=!0;svGlobal.logger.info("closing...");if(va&&va.readyState!=WebSocket.CLOSING&&va.readyState!=WebSocket.CLOSED)try{for(;va&&
va.readyState!=WebSocket.CLOSING&&va.readyState!=WebSocket.CLOSED;)rc||va.readyState!=WebSocket.OPEN||d("85-1"),va.close()}finally{a=Yc(a)}else a=Yc(a);return a}}
function BulkData(){function J(e){e=(e&1431655765)<<1|e>>>1&1431655765;e=(e&858993459)<<2|e>>>2&858993459;e=(e&252645135)<<4|e>>>4&252645135;if(0==e>>>8)return e;e=(e&16711935)<<8|e>>>8&16711935;return 0==e>>>16?e:(e&65535)<<16|e>>>16&65535}function L(e,m,y,f){var k=0,A=0,n,w,S=0!=(f&1),E=W;if(0==(f&32))return wa=0,P=y,0;0!=(f&64)&&(O=0);if(0!=(f&128)){for(f=65536;0<=--f;)E[f]=0;O=0}P=wa=0;wa=w=n=f=O;if(0==y)return 0;y+=A;do{if(0==k){if(A>=y)break;f=e[m+A++]<<24;k=8}if(0<=f){if(8>k){if(A>=y){if(0!=
f)return-1;break}f|=e[m+A++]<<24-k;k+=8}if(65536<=n)return-1;E[n++]=f>>>24&255;f<<=8;k-=8}else{f<<=1;if(0==--k){if(A>=y)return-1;f=e[m+A++]<<24;k=8}if(0<=f){if(8>k){if(A>=y)return-1;f|=e[m+A++]<<24-k;k+=8}if(65536<=n)return-1;E[n++]=(f>>>24|128)&255;f<<=8;k-=8}else{f<<=1;if(--k<(S?3:2)){if(A>=y)return-1;f|=e[m+A++]<<24-k;k+=8}if(S)switch(f>>>29){case 7:for(;9>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}f<<=3;var v=f>>>26;f<<=6;k-=9;break;case 6:for(;11>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}f<<=
3;v=(f>>>24)+64;f<<=8;k-=11;break;case 5:case 4:for(;13>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}f<<=2;v=(f>>>21)+320;f<<=11;k-=13;break;default:for(;17>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}f<<=1;v=(f>>>16)+2368;f<<=16;k-=17}else switch(f>>>30){case 3:if(8>k){if(A>=y)return-1;f|=e[m+A++]<<24-k;k+=8}f<<=2;v=f>>>26;f<<=6;k-=8;break;case 2:for(;10>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}f<<=2;v=(f>>>24)+64;f<<=8;k-=10;break;default:for(;14>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}v=(f>>>
18)+320;f<<=14;k-=14}if(0==k){if(A>=y)return-1;f=e[m+A++]<<24;k=8}if(0<=f){var H=3;f<<=1;k--}else{var I=S?14:11;do{f<<=1;if(0==--k){if(A>=y)return-1;f=e[m+A++]<<24;k=8}if(0<=f)break;if(0==--I)return-1}while(1);H=(S?16:13)-I;f<<=1;if(--k<H)for(;k<H;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}I=H;H=f>>>32-I&~(-1<<I)|1<<I;f<<=I;k-=I}if(65536<=n+H)return-1;v=n-v&(S?65535:8191);do E[n++]=E[v++];while(0!=--H)}}}while(1);O=n;wa=w;P=n-w;return 0}var O=0,W=new Uint8Array(65536),U=new Int32Array(8),wa=0,P=0,ya=
[6,6,6,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,9,8,9,9,9,9,8,8,9,9,9,9,9,9,8,9,9,10,9,9,9,9,9,9,9,10,9,10,10,10,9,9,10,9,10,9,10,9,9,9,10,10,9,10,9,9,8,9,9,9,9,10,10,10,9,9,10,10,10,10,10,10,9,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,9,7,9,9,10,9,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,10,10,10,10,10,10,11,10,10,10,10,10,10,10,10,10,10,10,10,
10,9,10,10,10,10,10,9,10,10,10,10,10,9,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,8,9,9,10,9,10,10,10,9,10,10,10,9,9,8,7,13,13,7,7,10,7,7,6,6,6,6,5,6,6,6,5,6,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,8,5,6,7,7],ha=[123,65311,65293,65063,65024,65285,65303,65128,197,65031,65299,65216,65288,65048,65307,65203,65027,162,65090,65296,65035,65026,65169,65305,65152,233,65082,65301,65042,87,65239,65309,65294,65077,65129,65314,65304,65146,65025,65315,65300,65268,
65204,65033,65308,65220,65289,65120,65136,65298,65029,65170,65185,65306,65039,65287,65110,65302,65282,65240,65256,65310,65053,59,65535,65286,65535,65137,65161,65535,65535,65068,65067,65056,65535,65211,65231,65032,65535,65248,65037,65535,65177,65535,65028,65194,65097,65535,65047,65121,65247,65535,65279,65270,65100,65535,65535,65159,65535,65316,65535,65084,65138,65535,65535,65230,65535,65278,65535,65059,65212,65034,65193,65535,65041,65535,65154,65535,65030,65178,65269,65535,65058,65101,65119,65535,
65283,65249,65535,65226,65228,65535,65049,65535,65207,65535,65535,65155,65065,65535,65535,65535,65132,65535,65261,65535,65535,65094,65116,65045,65535,65243,65190,65535,65535,65092,65535,65036,65535,65173,65276,65535,65535,65208,5833,65535,65264,65535,65080,65535,65535,65133,65150,65535,65535,65535,65535,65115,65244,65535,65535,65260,65095,65055,65535,65151,65174,65535,65535,65189,65535,65040,65088,65074,65215,65535,65535,65236,65265,65535,65535,65535,65141,65535,65535,65165,65073,65535,65125,65051,
65535,65252,65275,65535,65535,65106,65535,65038,65535,65181,65199,65535,65535,65105,65235,65535,65312,65535,65071,65535,65535,65217,65164,65535,65535,65535,65087,65535,65535,65142,65535,65274,65107,65061,65535,65124,65253,65535,65535,65198,65535,65043,65535,65160,65182,65535,65091,65535,65535,65188,65171,65535,65535,65535,65085,65535,65535,65259,65241,65535,65044,65114,65535,65064,65149,65535,65535,65130,65535,65535,65281,65222,65224,65535,65535,65205,65535,65535,65535,65172,65144,65535,65535,65535,
65187,65535,65535,65242,65112,65535,65054,65093,65258,65535,65131,65535,65535,65079,65535,65535,65535,65148,65206,65535,65535,65272,65535,65535,65535,65223,65179,65535,65535,65535,65104,65535,65535,65197,65250,65535,65050,65123,65102,65535,65535,65273,65535,65139,65535,65535,65535,65072,65163,65535,65535,65213,65070,256,65535,65262,65234,65535,65535,65535,65196,65535,65535,65180,65156,65535,65060,65103,65271,65535,65535,65251,65122,65535,65535,65535,65535,65162,65140,65535,65535,65086,65535,65535,
65535,65233,65214,65535,65535,65069,65535,65098,65267,65535,65535,65245,65118,65046,65535,65096,65192,65535,65195,65175,65535,65535,65232,65535,65535,65229,65209,65535,65535,65535,65066,65535,65535,65158,65134,65535,65535,65535,65246,65535,65535,65117,65099,65057,65535,65263,65176,65535,65535,65153,65535,65535,65535,65191,65535,65210,65277,65535,65535,65535,65227,65535,65535,65135,65081,65535,65535,65535,65157,65535,268,65254,65127,65052,65535,65108,65202,65535,65535,65183,65535,65535,65535,65113,
65201,65535,65218,65535,65535,65078,65266,65535,65535,65238,65143,65535,65535,65535,65075,65535,65535,65167,65109,65062,266,65284,65255,65535,289,65126,65535,65535,65535,65200,65184,65535,271,65168,65535,65535,65237,65535,65535,65219,65076,65535,65535,65535,65166,65535,273,65145,65089,267],Z=[511,0,508,448,494,347,486,482],r=[4,2,3,4,3,4,4,5,4,5,5,6,6,7,7,8,7,8,8,9,9,8,9,9,9,9,9,9,9,9,9,9],D=[4065,4064,4066,4072,14,4069,4068,4074,4081,4067,21,4071,4079,70,4080,4077,4095,4087,4091,25,4093,4084,300,
4075,4094,4086,4090,137,4092,4083,4088,4082],z=[0,4,10,19],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,32769,49153,65537],x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,6,6,8,8,14,14],p=[2,3,4,5,6,7,8,9,10,12,14,16,18,22,26,30,34,42,50,58,66,82,98,114,130,194,258,514,2,2],h=new hi5.DataBuffer(W,0,1),l=hi5.Arrays.arraycopy,g=hi5.Arrays.fill;this.reset=
function(){O=0;W=new Uint8Array(65536);P=wa=0;h=new hi5.DataBuffer(W,0,1)};this.release=function(){W=h=U=null};this.getArrayBuffer=function(){return W.buffer.slice(wa,wa+P)};this.getData=function(){h.setPosition(wa);h.markEnd(wa+P);return h};this.toPDU=function(e){var m=new Uint8Array(65576);m[0]=e;m[2]=1;m[3]=2;m[4]=O;m[5]=O>>8;m[6]=O>>16;m[7]=O>>24;m.set(W,8);m.set(new Uint8Array(U.buffer),65544);return m};this.fromStream=function(e){O=e.getLittleEndian32();var m=e.getPosition();W.set(e.getData().subarray(m,
m+65536));e.skipPosition(65536);for(m=0;8>m;m++)U[m]=e.getLittleEndian32()};this.getDecompressedLength=function(){return P};this.dec5=function(e,m,y,f){return L(e,m,y,f)};this.dec=function(e,m,y,f){if(2==(f&15)){var k=W,A=U,n=O,w=0,S=m,E=0,v=0,H=0;P=0;wa=n;0!=(f&64)&&(l(k,n-32768,k,0,32768),wa=O=n=32768);0!=(f&128)&&(n=0,g(k,0,65536,0),g(A,0,A.length,0),wa=0);if(32!=(f&32))l(e,0,k,n,y),n+=y,P=n-O;else{var I=0;for(var C=m+y;S<C&&!(H=e[S++],w|=H<<I,v+=8,I+=8,32<=I););w=J(w);S<C?(E=J(e[S++])&255,y=8):
y=0;for(;8<=v;){m=0;for(I=5;13>=I;I++)if(12!=I){H=J(w&4294967295<<32-I);var b=ha[H&511^H>>>9^H>>>4^H>>>7];0!=(b^H)>>>9?H=b&511:(b=(H>>>8^H&255)>>>2&15,0!=H>>>9&&(b=~b),H=ha[Z[(b&65535)%12]]);if(I==ya[H])break}w<<=I;v-=I;if(256>H)k[n++]=H&255;else if(256<H&&289>H){b=H-257;I=q[b];m=d[b]-1;0!=I&&(m+=J(w&4294967295<<32-I));b=A;var Y=m;var ta=b[2]|b[3]<<16;ta<<=16;b[2]=ta&65535;b[3]=ta>>>16&65535;var sa=b[0]|b[1]<<16;ta|=sa>>>16;b[2]=ta&65535;b[3]=ta>>>16&65535;sa=sa<<16|Y;b[0]=sa&65535;b[1]=sa>>>16&65535;
w<<=I;v-=I}else if(288<H&&293>H)b=H-289,m=A[b],0!=b&&(I=A,Y=I[0],I[0]=I[b],I[b]=Y);else if(256==H)break;for(I=32-v;0<I;)if(y<I)H=E>>>8-y,w|=H<<32-v-y,v+=y,I-=y,S<C?(E=J(e[S++])&255,y=8):y=I=0;else{y>I?(w|=E>>>8-I,E<<=I,E&=255,y-=I,v=32):(w|=E>>>8-I,v=32,S<C?(E=J(e[S++])&255,y=8):y=0);break}if(0!=m){for(I=2;9>=I&&(H=J(w&4294967295<<32-I),b=D[H&31^H>>>5^H>>>9],0!=(b^H)>>>5?H=b&31:(H=H>>>4&15,H=D[z[(H^H>>>2^H>>>3)&3]]),I!=r[H]);I++);w<<=I;v-=I;I=x[H];b=p[H];0!=I&&(b+=J(w&4294967295<<32-I));w<<=I;v-=
I;Y=n-m;I=b>m?m:b;for(H=0;0<I;)k[n++]=k[Y++],I--;for(;b>m;)H=H>=m?0:H,k[n++]=k[Y+H++],b--;for(I=32-v;0<I;)if(y<I)H=E>>>8-y,w|=H<<32-v-y,v+=y,I-=y,S<C?(E=J(e[S++])&255,y=8):y=I=0;else{y>I?(w|=E>>>8-I,E<<=I,E&=255,y-=I,v=32):(w|=E>>>8-I,v=32,S<C?(E=J(e[S++])&255,y=8):y=0);break}}}P=0!=(f&128)?n:n-O}O=n;return 0}return L(e,m,y,f)}}
function Bulk61Data(){var J=0,L=new Uint8Array(2E6),O=0,W=0,U=new hi5.DataBuffer(L,0,1),wa=hi5.Arrays.arraycopy;this.reset=function(){J=0;L=new Uint8Array(2E6);W=O=0;U=new hi5.DataBuffer(L,0,1)};this.release=function(){L=U=null};this.getArrayBuffer=function(){return L.buffer.slice(O,O+W)};this.getData=function(){U.setPosition(O);U.markEnd(O+W);return U};this.toPDU=function(P){var ya=new Uint8Array(2000008);ya[0]=P;ya[2]=1;ya[3]=8;ya[4]=J;ya[5]=J>>8;ya[6]=J>>16;ya[7]=J>>24;ya.set(L,8);return ya};this.fromStream=
function(P){J=P.getLittleEndian32();P.getPosition();L.set(P.getSubarray(2E6))};this.getDecompressedLength=function(){return W};this.dec=function(P,ya,ha,Z){0!=(Z&4)&&(J=0);O=J;W=0;var r=ya;if(0==(Z&2)){var D=P[r++]|P[r++]<<8;Z=r+8*D;for(var z=0;z<D;z++){var q=P[r++]|P[r++]<<8,d=P[r++]|P[r++]<<8,x=P[r++]|P[r++]<<8|P[r++]<<16|P[r++]<<24;var p=d-W;wa(P,Z,L,J,p);J+=p;Z+=p;W=d;for(p=0;p<q;p++)L[J++]=L[x++],W++}}else Z=r;if(p=ya+ha-Z)wa(P,Z,L,J,p),W+=p,J+=p;return 0}}var rdpBitmap=rdpcodecs.bitmap;
function MSGSMEncoder(){function J(b,Y){return-32768==b&&-32768==Y?32767:b*Y>>15<<16>>16}function L(b,Y){return-32768==b&&-32768==Y?32767:b*Y+16384>>15<<16>>16}function O(b,Y){if(0>=b){if(0<=Y)return b+Y;b=-(b+1)-(Y+1);return 2147483647<=b?-2147483648:-b-2}if(0>=Y)return b+Y;b+=Y;return 2147483647<b?2147483647:b}function W(b){if(0>b){if(-1073741824>=b)return 0;b=~b}return(0!=(b&4294901760)?0!=(b&4278190080)?-1+A[255&b>>24]:7+A[255&b>>16]:0!=(b&65280)?15+A[255&b>>8]:23+A[255&b])<<16>>16}function U(b,
Y){return 16<=Y?0>b?-1:-0:-16>=Y?0:0>Y?b<<-Y<<16>>16:b>>Y<<16>>16}function wa(b,Y,ta,sa,La,Aa){b=J(b<<16>>16,La[Aa]);Y=b+(Y<<16>>16);Y=(-32768>Y?-32768:32767<Y?32767:Y)+256;b=(-32768>Y?-32768:32767<Y?32767:Y)>>9<<16>>16;La[Aa]=(b>ta?ta-sa:b<sa?0:b-sa)<<16>>16}function P(b,Y){b=C[b+3*Y]>>2<<16>>16;return b*b}function ya(b,Y,ta,sa,La,Aa,Ha){b=b[ta]+Aa;La=((-32768>b?-32768:32767<b?32767:b)<<26>>16)-(La<<17>>16);sa=L(Ha,-32768>La?-32768:32767<La?32767:La);Ha=sa+sa;Y[ta]=-32768>Ha?-32768:32767<Ha?32767:
Ha}function ha(b){for(var Y,ta,sa=0;8>sa;sa++)0>b[sa]?(Y=(-32768==b[sa]?32767:-b[sa])<<16>>16,ta=(Y>>2<<16>>16)+26112,b[sa]=-(11059>Y?Y<<1:20070>Y?Y+11059:-32768>ta?-32768:32767<ta?32767:ta)<<16>>16):(Y=b[sa],ta=(Y>>2<<16>>16)+26112,b[sa]=(11059>Y?Y<<1:20070>Y?Y+11059:-32768>ta?-32768:32767<ta?32767:ta)<<16>>16)}function Z(b,Y,ta,sa,La){for(var Aa=b.u,Ha,R,ea,eb,kb,Ob;0!=ta;){ta--;Ha=eb=sa[La];for(Ob=0;8>Ob;Ob++)ea=Aa[Ob],kb=Y[Ob],Aa[Ob]=eb,R=L(kb,Ha),eb=ea+R,eb=-32768>eb?-32768:32767<eb?32767:eb,
R=L(kb,ea),Ha+=R,Ha=-32768>Ha?-32768:32767<Ha?32767:Ha;sa[La++]=Ha}b.u=Aa}var r=[6554,16384,26214,32767],D=[29128,26215,23832,21846,20165,18725,17476,16384],z=[18431,20479,22527,24575,26623,28671,30719,32767],q=new function(){this.dp0=new Int16Array(280);this.mp=this.l_z2=this.z1=0;this.u=new Int16Array(8);this.larpp=[new Int16Array(8),new Int16Array(8)];this.j=0;this.nrp=40;this.v=new Int16Array(9);this.msr=0},d=new Int16Array(8),x=new Int16Array(4),p=new Int16Array(4),h=new Int16Array(4),l=new Int16Array(4),
g=new Int16Array(52),e=new Int16Array(160),m=new Uint8Array(33),y=0,f=hi5.Arrays.arraycopy;this.encode=function(b,Y,ta,sa){for(var La=Y,Aa,Ha=0;160>Ha;Ha++)Aa=b[La++],e[Ha]=0>Aa?32768*Aa:32767*Aa;k=!k;for(var R=0,ea=0,eb=0,kb=0,Ob=120,bd=new Int16Array(50),V=new Int16Array(160),Yc=0,od=0,Oc=q.z1,X=q.l_z2,Vb=q.mp,gd,Tb,Ra,Vc,oa,Fa,Sa=160;0!=Sa;){Sa--;Vc=e[Yc++]>>3<<2<<16>>16;gd=Vc-Oc<<16>>16;Oc=Vc;oa=gd;oa<<=15;Tb=X>>15<<16>>16;Ra=X-(Tb<<15)<<16>>16;oa+=L(Ra,32735);Fa=32735*Tb;X=O(Fa,oa);Fa=O(X,16384);
Tb=L(Vb,-28180);Vb=Fa>>15<<16>>16;var rc=Vb+Tb;V[od++]=-32768>rc?-32768:32767<rc?32767:rc}q.z1=Oc;q.l_z2=X;q.mp=Vb;var Nb,ka=0,ad=0,ua;for(ua=0;159>=ua;ua++){var va=V[ua]+0;var ec=-32768>va?-32768:32767<va?32767:va;ec>ad&&(ad=ec)}var Ac=0==ad?0:4-W(ad<<16)<<16>>16;if(0<Ac)switch(Ac){case 1:for(ua=0;159>=ua;ua++)V[ua]=L(V[ua],16384);break;case 2:for(ua=0;159>=ua;ua++)V[ua]=L(V[ua],8192);break;case 3:for(ua=0;159>=ua;ua++)V[ua]=L(V[ua],4096);break;case 4:for(ua=0;159>=ua;ua++)V[ua]=L(V[ua],2048)}var M=
V[ka];f([0,0,0,0,0,0,0,0,0],0,n,0,n.length);n[0]+=M*V[ka-0];M=V[++ka];n[0]+=M*V[ka-0];n[1]+=M*V[ka-1];M=V[++ka];n[0]+=M*V[ka-0];n[1]+=M*V[ka-1];n[2]+=M*V[ka-2];M=V[++ka];n[0]+=M*V[ka-0];n[1]+=M*V[ka-1];n[2]+=M*V[ka-2];n[3]+=M*V[ka-3];M=V[++ka];n[0]+=M*V[ka-0];n[1]+=M*V[ka-1];n[2]+=M*V[ka-2];n[3]+=M*V[ka-3];n[4]+=M*V[ka-4];M=V[++ka];n[0]+=M*V[ka-0];n[1]+=M*V[ka-1];n[2]+=M*V[ka-2];n[3]+=M*V[ka-3];n[4]+=M*V[ka-4];n[5]+=M*V[ka-5];M=V[++ka];n[0]+=M*V[ka-0];n[1]+=M*V[ka-1];n[2]+=M*V[ka-2];n[3]+=M*V[ka-
3];n[4]+=M*V[ka-4];n[5]+=M*V[ka-5];n[6]+=M*V[ka-6];M=V[++ka];n[0]+=M*V[ka-0];n[1]+=M*V[ka-1];n[2]+=M*V[ka-2];n[3]+=M*V[ka-3];n[4]+=M*V[ka-4];n[5]+=M*V[ka-5];n[6]+=M*V[ka-6];n[7]+=M*V[ka-7];++ka;for(Nb=ka;160>Nb;++Nb)M=V[Nb],n[0]+=M*V[Nb-0],n[1]+=M*V[Nb-1],n[2]+=M*V[Nb-2],n[3]+=M*V[Nb-3],n[4]+=M*V[Nb-4],n[5]+=M*V[Nb-5],n[6]+=M*V[Nb-6],n[7]+=M*V[Nb-7],n[8]+=M*V[Nb-8];for(ua=0;9>ua;ua++)n[ua]<<=1;if(0<Ac)for(ua=0;160>ua;ua++)V[ua]<<=Ac;var ca=new Int16Array(1),pa=0,ia,yc=new Int16Array(9),Za=new Int16Array(9),
Ab=new Int16Array(9);if(0==n[0])for(ia=0;8>ia;ia++)d[ia]=0;else{ca[0]=W(n[0]);for(ia=0;8>=ia;ia++)yc[ia]=n[ia]<<ca[0]>>16;f(yc,0,Ab,0,7);f(yc,0,Za,0,8);for(var dc=1;8>=dc;dc++,pa++){ca[0]=Za[1];ca[0]=(0>ca[0]?-32768==ca[0]?32767:-ca[0]:ca[0])<<16>>16;if(Za[0]<ca[0]){for(ia=dc;8>ia;ia++)d[ia]=0;break}var ld=pa;var zc=ca[0],fd=zc,xa=Za[0],Hb=0,Ub=15;if(0==zc)var Pb=0;else{for(;0!=Ub;)Ub--,Hb=Hb<<17>>16,fd<<=1,fd>=xa&&(fd-=xa,Hb++);Pb=Hb<<16>>16}d[ld]=Pb;0<Za[1]&&(d[pa]=-d[pa]);if(8==dc)break;ca[0]=
L(Za[1],d[pa]);var $c=Za[0]+ca[0];Za[0]=-32768>$c?-32768:32767<$c?32767:$c;for(var Kb=1;Kb<=8-dc;Kb++){ca[0]=L(Ab[Kb],d[pa]);var Tc=Za[Kb+1]+ca[0];Za[Kb]=-32768>Tc?-32768:32767<Tc?32767:Tc;ca[0]=L(Za[Kb+1],d[pa]);var hd=Ab[Kb]+ca[0];Ab[Kb]=-32768>hd?-32768:32767<hd?32767:hd}}}for(var fb,a=0;8>a;a++)fb=d[a],fb=(0>fb?-32768==fb?32767:-fb:fb)<<16>>16,22118>fb?fb>>=1:31130>fb?fb-=11059:(fb-=26112,fb<<=2),d[a]=0>d[a]?-fb:fb;var t=0;wa(20480,0,31,-32,d,t++);wa(20480,0,31,-32,d,t++);wa(20480,2048,15,-16,
d,t++);wa(20480,-2560,15,-16,d,t++);wa(13964,94,7,-8,d,t++);wa(15360,-1792,7,-8,d,t++);wa(8534,-341,3,-4,d,t++);wa(9036,-1144,3,-4,d,t++);var u=new Int16Array(8),F=q.j;var B=F^1;q.j=B;var G=q.larpp[F],N=q.larpp[B],K=0;ya(d,G,K++,0,0,-32,13107);ya(d,G,K++,0,0,-32,13107);ya(d,G,K++,0,2048,-16,13107);ya(d,G,K++,0,-2560,-16,13107);ya(d,G,K++,0,94,-8,19223);ya(d,G,K++,0,-1792,-8,17476);ya(d,G,K++,0,-341,-4,31454);ya(d,G,K++,0,-1144,-4,29708);for(var aa=0;8>aa;aa++){var la=(N[aa]>>2<<16>>16)+(G[aa]>>2<<
16>>16);u[aa]=-32768>la?-32768:32767<la?32767:la;var za=u[aa]+(N[aa]>>1<<16>>16);u[aa]=-32768>za?-32768:32767<za?32767:za}ha(u);Z(q,u,13,V,0);for(var $a=0;8>$a;$a++){var Da=(N[$a]>>1<<16>>16)+(G[$a]>>1<<16>>16);u[$a]=-32768>Da?-32768:32767<Da?32767:Da}ha(u);Z(q,u,14,V,13);for(var qa=0;8>qa;qa++){var T=(N[qa]>>2<<16>>16)+(G[qa]>>2<<16>>16);u[qa]=-32768>T?-32768:32767<T?32767:T;var Ib=u[qa]+(G[qa]>>1<<16>>16);u[qa]=-32768>Ib?-32768:32767<Ib?32767:Ib}ha(u);Z(q,u,13,V,27);for(var kc=0;8>kc;kc++)u[kc]=
G[kc];ha(u);Z(q,u,120,V,40);for(var pb=q.dp0,gb,ab,fc=0;3>=fc;fc++,ea+=13){for(var Bc=V,Wb=40*fc,Qb=bd,Bb=pb,Cc=pb,Zc=Ob,Qc=x,Dc=h,Xb=eb++,Ba=void 0,Ca=void 0,Cb=void 0,sc=void 0,Jb=void 0,qb=void 0,lc=void 0,ba=void 0,Gc=Bc,Rc=Wb,ma=Bb,da=Zc,rb=Dc,hb=Qc,sb=Xb,fa=new Int16Array(40),gc=0,lb=0;39>=lb;lb++)Ba=Gc[lb+Rc],Ba=(0>Ba?-32768==Ba?32767:-Ba:Ba)<<16>>16,Ba>gc&&(gc=Ba);Ba=0;0!=gc&&(Ba=W(gc<<16));Ca=6<Ba?0:6-Ba<<16>>16;for(lb=0;39>=lb;lb++)fa[lb]=Gc[lb+Rc]>>Ca;qb=0;for(ba=lc=40;120>=ba;ba++){var Q=
1;var ja=fa[0]*ma[da-ba];ja+=fa[1]*ma[Q+da-ba];Q++;ja+=fa[2]*ma[Q+da-ba];Q++;ja+=fa[3]*ma[Q+da-ba];Q++;ja+=fa[4]*ma[Q+da-ba];Q++;ja+=fa[5]*ma[Q+da-ba];Q++;ja+=fa[6]*ma[Q+da-ba];Q++;ja+=fa[7]*ma[Q+da-ba];Q++;ja+=fa[8]*ma[Q+da-ba];Q++;ja+=fa[9]*ma[Q+da-ba];Q++;ja+=fa[10]*ma[Q+da-ba];Q++;ja+=fa[11]*ma[Q+da-ba];Q++;ja+=fa[12]*ma[Q+da-ba];Q++;ja+=fa[13]*ma[Q+da-ba];Q++;ja+=fa[14]*ma[Q+da-ba];Q++;ja+=fa[15]*ma[Q+da-ba];Q++;ja+=fa[16]*ma[Q+da-ba];Q++;ja+=fa[17]*ma[Q+da-ba];Q++;ja+=fa[18]*ma[Q+da-ba];Q++;
ja+=fa[19]*ma[Q+da-ba];Q++;ja+=fa[20]*ma[Q+da-ba];Q++;ja+=fa[21]*ma[Q+da-ba];Q++;ja+=fa[22]*ma[Q+da-ba];Q++;ja+=fa[23]*ma[Q+da-ba];Q++;ja+=fa[24]*ma[Q+da-ba];Q++;ja+=fa[25]*ma[Q+da-ba];Q++;ja+=fa[26]*ma[Q+da-ba];Q++;ja+=fa[27]*ma[Q+da-ba];Q++;ja+=fa[28]*ma[Q+da-ba];Q++;ja+=fa[29]*ma[Q+da-ba];Q++;ja+=fa[30]*ma[Q+da-ba];Q++;ja+=fa[31]*ma[Q+da-ba];Q++;ja+=fa[32]*ma[Q+da-ba];Q++;ja+=fa[33]*ma[Q+da-ba];Q++;ja+=fa[34]*ma[Q+da-ba];Q++;ja+=fa[35]*ma[Q+da-ba];Q++;ja+=fa[36]*ma[Q+da-ba];Q++;ja+=fa[37]*ma[Q+
da-ba];Q++;ja+=fa[38]*ma[Q+da-ba];Q++;ja+=fa[39]*ma[Q+da-ba];ja>qb&&(lc=ba<<16>>16,qb=ja)}hb[sb]=lc;qb=qb<<1>>6-Ca;for(lb=Jb=0;39>=lb;lb++){var Sc=ma[lb-lc+da]>>3<<16>>16;Jb+=Sc*Sc}Jb<<=1;if(0>=qb)rb[sb]=0;else if(qb>=Jb)rb[sb]=3;else{Ba=W(Jb);sc=qb<<Ba>>16<<16>>16;Cb=Jb<<Ba>>16<<16>>16;for(var cb=0;2>=cb&&!(sc<=J(Cb,r[cb]));cb++)rb[sb]=cb}var Ua=void 0,na=void 0,Rb=void 0,Yb=Qc[Xb],tb=Bb,bb=Bc,Ia=Wb,ib=Cc,Sb=Qb,Wa=Zc;switch(Dc[Xb]){case 0:Rb=3277;for(na=0;39>=na;na++)ib[na+Wa]=L(Rb,tb[na-Yb+Wa]),
Ua=bb[na+Ia]-ib[na+Wa],Sb[na+5]=-32768>Ua?-32768:32767<Ua?32767:Ua;break;case 1:Rb=11469;for(na=0;39>=na;na++)ib[na+Wa]=L(Rb,tb[na-Yb+Wa]),Ua=bb[na+Ia]-ib[na+Wa],Sb[na+5]=-32768>Ua?-32768:32767<Ua?32767:Ua;break;case 2:Rb=21299;for(na=0;39>=na;na++)ib[na+Wa]=L(Rb,tb[na-Yb+Wa]),Ua=bb[na+Ia]-ib[na+Wa],Sb[na+5]=-32768>Ua?-32768:32767<Ua?32767:Ua;break;case 3:for(Rb=32767,na=0;39>=na;na++)ib[na+Wa]=L(Rb,tb[na-Yb+Wa]),Ua=bb[na+Ia]-ib[na+Wa],Sb[na+5]=-32768>Ua?-32768:32767<Ua?32767:Ua}for(var ub=bd,Ga=
l,mc=p,Hc=kb++,tc=g,uc=ea,Ic=new Int16Array(13),Jc=new Int16Array(13),Ma=void 0,ra=ub,Na=0;39>=Na;Na++)Ma=4096,Ma+=-134*ra[Na+0]+-374*ra[Na+1]+2054*ra[Na+3]+5741*ra[Na+4]+8192*ra[Na+5]+5741*ra[Na+6]+2054*ra[Na+7]+-374*ra[Na+9]+-134*ra[Na+10],Ma=Ma>>13<<16>>16,C[Na]=-32768>Ma?-32768:32767<Ma?32767:Ma;var nc=void 0,hc=void 0,db=void 0,vb=Ic,wb=mc,Zb=Hc,$b=0;nc=db=0+(P(0,1)+P(0,2)+P(0,3)+P(0,4)+P(0,5)+P(0,6)+P(0,7)+P(0,8)+P(0,9)+P(0,10)+P(0,11)+P(0,12));db+=P(0,0);hc=db<<1;db=0+(P(1,0)+P(1,1)+P(1,2)+
P(1,3)+P(1,4)+P(1,5)+P(1,6)+P(1,7)+P(1,8)+P(1,9)+P(1,10)+P(1,11)+P(1,12));db<<=1;db>hc&&($b=1,hc=db);db=0+(P(2,0)+P(2,1)+P(2,2)+P(2,3)+P(2,4)+P(2,5)+P(2,6)+P(2,7)+P(2,8)+P(2,9)+P(2,10)+P(2,11)+P(2,12));db<<=1;db>hc&&($b=2,hc=db);db=nc+P(3,12);db<<=1;db>hc&&($b=3);for(var Ec=0;12>=Ec;Ec++)vb[Ec]=C[$b+3*Ec];wb[Zb]=$b;var ac=void 0,mb=void 0,Db=void 0,Ta=void 0,ic=void 0,Fc=void 0,Ja=void 0,Oa=void 0,Lb=void 0,xb=Ic,Kc=tc,Uc=uc,vc=Ga,Pa=Hc,bc=0;for(mb=0;12>=mb;mb++)Ja=xb[mb],Ja=0>Ja?-32768==Ja?32767:
-Ja:Ja,Ja>bc&&(bc=Ja);Ta=0;Ja=bc>>9<<16>>16;for(mb=Lb=0;5>=mb;mb++)Lb=0>=Ja?Lb|1:Lb|0,Ja=Ja>>1<<16>>16,0==Lb&&Ta++;var Ka=(bc>>(Ta+5<<16>>16)<<16>>16)+(Ta<<3<<16>>16);Oa=-32768>Ka?-32768:32767<Ka?32767:Ka;var cc=0;15<Oa&&(cc=(Oa>>3<<16>>16)-1<<16>>16);ac=Oa-(cc<<3)<<16>>16;if(0==ac)cc=-4,ac=7;else{for(;7>=ac;)ac=(ac<<1|1)<<16>>16,cc--;ac-=8}I==I?(w=cc,S=ac):(E=cc,v=ac);Ta=w;Db=S;Fc=6-Ta<<16>>16;ic=D[Db];for(mb=0;12>=mb;mb++)Ja=xb[mb]<<Fc<<16>>16,Ja=J(Ja,ic),Ja=Ja>>12<<16>>16,Kc[mb+Uc]=Ja+4<<16>>16;
S=Db;w=Ta;vc[Pa]=Oa;var oc=void 0,Xa=void 0,nb=void 0,Ea=void 0,Eb=void 0,Mb=void 0,Lc=tc,Mc=Jc,Wc=uc;I==I?(Eb=z[S],Xa=6-w<<16>>16):(Eb=z[v],Xa=6-E<<16>>16);Ea=-32768>Xa?-32768:32767<Xa?32767:Xa;Xa=Ea-1;var pc=-32768>Xa?-32768:32767<Xa?32767:Xa;nb=16<=pc?0:-16>=pc?-0:0>pc?U(1,-pc):1<<pc<<16>>16;for(var id=H=0;13>id;id++)Mb=(Lc[Wc++]<<1)-7<<16>>16,Mb=Mb<<28>>16,Mb=L(Eb,Mb),oc=Mb+nb,Mb=-32768>oc?-32768:32767<oc?32767:oc,Mc[H++]=U(Mb,Ea);var ob=void 0,Xc=Jc,yb=ub,wc=I,Qa=13,qc=0;ob=wc==I?5:0;switch(mc[Hc]){case 3:yb[ob++]=
0;do yb[ob++]=0,yb[ob++]=0,yb[ob++]=Xc[qc++],--Qa;while(0!=Qa);break;case 2:do yb[ob++]=0,yb[ob++]=0,yb[ob++]=Xc[qc++],--Qa;while(0!=Qa);break;case 1:do yb[ob++]=0,yb[ob++]=Xc[qc++],yb[ob++]=0,--Qa;while(0!=Qa);break;case 0:do yb[ob++]=Xc[qc++],yb[ob++]=0,yb[ob++]=0,--Qa;while(0!=Qa)}wc==I&&(yb[ob++]=0);for(gb=0;39>=gb;gb++)ab=bd[5+gb]+pb[gb+Ob],pb[gb+Ob]=-32768>ab?-32768:32767<ab?32767:ab;Ob+=40}for(gb=0;120>gb;gb++)pb[gb]=pb[160+gb];if(k){var c=d[0]<<4|d[1]<<10;m[R++]=c>>4;c=c>>5|d[2]<<11;m[R++]=
c>>7;c=c>>5|d[3]<<11;c=c>>4|d[4]<<12;m[R++]=c>>6;c=c>>4|d[5]<<12;c=c>>3|d[6]<<13;m[R++]=c>>7;c=c>>3|d[7]<<13;c=c>>7|x[0]<<9;m[R++]=c>>5;c=c>>2|h[0]<<14;c=c>>2|p[0]<<14;c=c>>6|l[0]<<10;m[R++]=c>>3;c=c>>3|g[0]<<13;m[R++]=c>>8;c=c>>3|g[1]<<13;c=c>>3|g[2]<<13;c=c>>3|g[3]<<13;m[R++]=c>>7;c=c>>3|g[4]<<13;c=c>>3|g[5]<<13;c=c>>3|g[6]<<13;m[R++]=c>>6;c=c>>3|g[7]<<13;c=c>>3|g[8]<<13;m[R++]=c>>8;c=c>>3|g[9]<<13;c=c>>3|g[10]<<13;c=c>>3|g[11]<<13;m[R++]=c>>7;c=c>>3|g[12]<<13;c=c>>7|x[1]<<9;m[R++]=c>>5;c=c>>2|
h[1]<<14;c=c>>2|p[1]<<14;c=c>>6|l[1]<<10;m[R++]=c>>3;c=c>>3|g[13]<<13;m[R++]=c>>8;c=c>>3|g[14]<<13;c=c>>3|g[15]<<13;c=c>>3|g[16]<<13;m[R++]=c>>7;c=c>>3|g[17]<<13;c=c>>3|g[18]<<13;c=c>>3|g[19]<<13;m[R++]=c>>6;c=c>>3|g[20]<<13;c=c>>3|g[21]<<13;m[R++]=c>>8;c=c>>3|g[22]<<13;c=c>>3|g[23]<<13;c=c>>3|g[24]<<13;m[R++]=c>>7;c=c>>3|g[25]<<13;c=c>>7|x[2]<<9;m[R++]=c>>5;c=c>>2|h[2]<<14;c=c>>2|p[2]<<14;c=c>>6|l[2]<<10;m[R++]=c>>3;c=c>>3|g[26]<<13;m[R++]=c>>8;c=c>>3|g[27]<<13;c=c>>3|g[28]<<13;c=c>>3|g[29]<<13;
m[R++]=c>>7;c=c>>3|g[30]<<13;c=c>>3|g[31]<<13;c=c>>3|g[32]<<13;m[R++]=c>>6;c=c>>3|g[33]<<13;c=c>>3|g[34]<<13;m[R++]=c>>8;c=c>>3|g[35]<<13;c=c>>3|g[36]<<13;c=c>>3|g[37]<<13;m[R++]=c>>7;c=c>>3|g[38]<<13;c=c>>7|x[3]<<9;m[R++]=c>>5;c=c>>2|h[3]<<14;c=c>>2|p[3]<<14;c=c>>6|l[3]<<10;m[R++]=c>>3;c=c>>3|g[39]<<13;m[R++]=c>>8;c=c>>3|g[40]<<13;c=c>>3|g[41]<<13;c=c>>3|g[42]<<13;m[R++]=c>>7;c=c>>3|g[43]<<13;c=c>>3|g[44]<<13;c=c>>3|g[45]<<13;m[R++]=c>>6;c=c>>3|g[46]<<13;c=c>>3|g[47]<<13;m[R++]=c>>8;c=c>>3|g[48]<<
13;c=c>>3|g[49]<<13;c=c>>3|g[50]<<13;m[R++]=c>>7;c=c>>3|g[51]<<13;m[R]=c>>12;y=m[R]}else c=y<<6|d[0]<<10,m[R++]=c>>6,c=c>>6|d[1]<<10,m[R++]=c>>8,c=c>>5|d[2]<<11,c=c>>5|d[3]<<11,m[R++]=c>>6,c=c>>4|d[4]<<12,c=c>>4|d[5]<<12,m[R++]=c>>6,c=c>>3|d[6]<<13,c=c>>3|d[7]<<13,m[R++]=c>>8,c=c>>7|x[0]<<9,c=c>>2|h[0]<<14,m[R++]=c>>7,c=c>>2|p[0]<<14,c=c>>6|l[0]<<10,m[R++]=c>>7,c=c>>3|g[0]<<13,c=c>>3|g[1]<<13,c=c>>3|g[2]<<13,m[R++]=c>>6,c=c>>3|g[3]<<13,c=c>>3|g[4]<<13,m[R++]=c>>8,c=c>>3|g[5]<<13,c=c>>3|g[6]<<13,c=
c>>3|g[7]<<13,m[R++]=c>>7,c=c>>3|g[8]<<13,c=c>>3|g[9]<<13,c=c>>3|g[10]<<13,m[R++]=c>>6,c=c>>3|g[11]<<13,c=c>>3|g[12]<<13,m[R++]=c>>8,c=c>>7|x[1]<<9,c=c>>2|h[1]<<14,m[R++]=c>>7,c=c>>2|p[1]<<14,c=c>>6|l[1]<<10,m[R++]=c>>7,c=c>>3|g[13]<<13,c=c>>3|g[14]<<13,c=c>>3|g[15]<<13,m[R++]=c>>6,c=c>>3|g[16]<<13,c=c>>3|g[17]<<13,m[R++]=c>>8,c=c>>3|g[18]<<13,c=c>>3|g[19]<<13,c=c>>3|g[20]<<13,m[R++]=c>>7,c=c>>3|g[21]<<13,c=c>>3|g[22]<<13,c=c>>3|g[23]<<13,m[R++]=c>>6,c=c>>3|g[24]<<13,c=c>>3|g[25]<<13,m[R++]=c>>8,
c=c>>7|x[2]<<9,c=c>>2|h[2]<<14,m[R++]=c>>7,c=c>>2|p[2]<<14,c=c>>6|l[2]<<10,m[R++]=c>>7,c=c>>3|g[26]<<13,c=c>>3|g[27]<<13,c=c>>3|g[28]<<13,m[R++]=c>>6,c=c>>3|g[29]<<13,c=c>>3|g[30]<<13,m[R++]=c>>8,c=c>>3|g[31]<<13,c=c>>3|g[32]<<13,c=c>>3|g[33]<<13,m[R++]=c>>7,c=c>>3|g[34]<<13,c=c>>3|g[35]<<13,c=c>>3|g[36]<<13,m[R++]=c>>6,c=c>>3|g[37]<<13,c=c>>3|g[38]<<13,m[R++]=c>>8,c=c>>7|x[3]<<9,c=c>>2|h[3]<<14,m[R++]=c>>7,c=c>>2|p[3]<<14,c=c>>6|l[3]<<10,m[R++]=c>>7,c=c>>3|g[39]<<13,c=c>>3|g[40]<<13,c=c>>3|g[41]<<
13,m[R++]=c>>6,c=c>>3|g[42]<<13,c=c>>3|g[43]<<13,m[R++]=c>>8,c=c>>3|g[44]<<13,c=c>>3|g[45]<<13,c=c>>3|g[46]<<13,m[R++]=c>>7,c=c>>3|g[47]<<13,c=c>>3|g[48]<<13,c=c>>3|g[49]<<13,m[R++]=c>>6,c=c>>3|g[50]<<13,c=c>>3|g[51]<<13,m[R++]=c>>8;var Nc,cd=k?32:33;for(Nc=0;Nc<cd;Nc++)ta[Nc+sa]=m[Nc];return cd};var k=!1,A=[8,7,6,6,5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=new Int32Array(9),w=0,S=0,E=0,v=0,H=0,I=0,C=new Int16Array(40)}
function MSGSM(){function J(f,k,A,n,w,S,E,v){var H=0;g(e,0,160,0);g(m,0,40,0);for(var I=0;3>=I;I++,H+=13){var C=w[I],b=A[I],Y=H,ta=S,sa=m,La=new Int32Array(13);La.buffer||g(La,0,13,0);var Aa=0;15<C&&(Aa=(C>>3)-1);C-=Aa<<3;if(0==C)Aa=-4,C=7;else{for(;7>=C;)C=C<<1|1,Aa--;C-=8}var Ha=Array(2);Ha[0]=Aa;Ha[1]=C;Aa=La;C=Y;Y=ha[Ha[1]];Ha=P(6,Ha[0]);var R=P(Ha,1);R=16<=R?0:-16>=R?-0:0>R?ya(1,-R):1<<R;for(var ea=0,eb=0;13>eb;eb++){var kb=(ta[C++]<<1)-7;kb<<=12;kb=U(Y,kb);kb+=R;-32768>kb?kb=-32768:32767<kb&&
(kb=32767);Aa[ea++]=ya(kb,Ha)}ta=13;Y=Aa=0;switch(b){case 3:sa[Y++]=0;case 2:sa[Y++]=0;case 1:sa[Y++]=0;case 0:sa[Y++]=La[Aa++],ta--}do sa[Y++]=0,sa[Y++]=0,sa[Y++]=La[Aa++];while(0<--ta);for(;4>++b;)sa[Y++]=0;La=k[I];b=n[I];sa=m;q=La=40>La||120<La?q:La;ta=Z[b];for(Aa=0;39>=Aa;Aa++)b=U(ta,r[Aa-La+120]),b+=sa[Aa],-32768>b?b=-32768:32767<b&&(b=32767),r[Aa+120]=b;l(r,40,r,0,120);l(r,120,e,40*I,39)}k=D[z];A=D[z^=1];n=0;L(f,k,n++,0,0,-32,13107);L(f,k,n++,0,0,-32,13107);L(f,k,n++,0,2048,-16,13107);L(f,k,
n++,0,-2560,-16,13107);L(f,k,n++,0,94,-8,19223);L(f,k,n++,0,-1792,-8,17476);L(f,k,n++,0,-341,-4,31454);L(f,k,n++,0,-1144,-4,29708);f=y;for(w=0;8>w;w++)n=(A[w]>>2)+(k[w]>>2),-32768>n?n=-32768:32767<n&&(n=32767),n+=A[w]>>1,-32768>n?n=-32768:32767<n&&(n=32767),f[w]=n;O(y);W(y,13,e,E,0,v);f=y;for(w=0;8>w;w++)n=(A[w]>>1)+(k[w]>>1),-32768>n?n=-32768:32767<n&&(n=32767),f[w]=n;O(y);W(y,14,e,E,13,v);f=y;for(w=0;8>w;w++)n=(A[w]>>2)+(k[w]>>2),-32768>n?n=-32768:32767<n&&(n=32767),n+=k[w]>>1,-32768>n?n=-32768:
32767<n&&(n=32767),f[w]=n;O(y);W(y,13,e,E,27,v);f=y;for(A=0;8>A;A++)f[A]=k[A];O(y);W(y,120,e,E,40,v);k=v;for(A=v+160;A-- >v;k++)f=U(x,28180),x=E[k]+f,-32768>x?x=-32768:32767<x&&(x=32767),f=x<<1,-32768>f?f=-32768:32767<f&&(f=32767),E[k]=f}function L(f,k,A,n,w,S,E){n=f[A]+S;-32768>n?n=-32768:32767<n&&(n=32767);n=P(n<<10,w<<1);n=U(E,n);n+=n;-32768>n?n=-32768:32767<n&&(n=32767);k[A]=n}function O(f){for(var k,A=0;8>A;A++)0>f[A]?(k=-32768==f[A]?32767:-f[A],f[A]=-(11059>k?k<<1:20070>k?k+11059:wa(k>>2,26112))):
(k=f[A],f[A]=11059>k?k<<1:20070>k?k+11059:wa(k>>2,26112))}function W(f,k,A,n,w,S){for(var E,v,H;0!=k;){k--;E=A[w];for(var I=7;0<=I;I--)v=f[I],H=d[I],H=((-32768==v&&-32768==H?32767:65535&v*H+16384>>15)&65535)<<16>>16,E=P(E,H),v=((-32768==v&&-32768==E?32767:65535&v*E+16384>>15)&65535)<<16>>16,v=d[I]+v,-32768>v?v=-32768:32767<v&&(v=32767),d[I+1]=v;n[S+w++]=d[0]=E}}function U(f,k){return-32768==f&&-32768==k?32767:(f*k+16384>>15&65535)<<16>>16}function wa(f,k){f+=k;return-32768>f?-32768:32767<f?32767:
f}function P(f,k){f-=k;return-32768>f?-32768:32767<f?32767:f}function ya(f,k){return 16<=k?0>f?-1:0:-16>=k?0:0>k?f<<-k:f>>k}var ha=[18431,20479,22527,24575,26623,28671,30719,32767],Z=[3277,11469,21299,32767],r=new Int32Array(280),D=[new Int32Array(8),new Int32Array(8)],z=0,q=40,d=new Int32Array(9),x=0,p=new Int32Array(320);p[0]=0;var h=[.1],l=hi5.Arrays.arraycopy,g=hi5.Arrays.fill;this.decode=function(f,k,A){var n=0,w;A=k+A;for(var S=new Int32Array(8),E=new Int32Array(4),v=new Int32Array(4),H=new Int32Array(4),
I=new Int32Array(4),C=new Int32Array(52);k<A;){var b=f[k++]&255;S[0]=b&63;b>>>=6;b|=f[k++]<<2&1023;S[1]=b&63;b>>>=6;b|=f[k++]<<4&4095;S[2]=b&31;b>>>=5;S[3]=b&31;b>>>=5;b|=f[k++]<<2&1023;S[4]=b&15;b>>>=4;S[5]=b&15;b>>>=4;b|=f[k++]<<2&1023;S[6]=b&7;b>>>=3;S[7]=b&7;b>>>=3;b|=f[k++]<<4&4095;E[0]=b&127;b>>>=7;H[0]=b&3;b>>>=2;v[0]=b&3;b>>>=2;b|=f[k++]<<1&511;I[0]=b&63;b>>>=6;C[0]=b&7;b=f[k++]&255;C[1]=b&7;b>>>=3;C[2]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[3]=b&7;b>>>=3;C[4]=b&7;b>>>=3;C[5]=b&7;b>>>=3;b|=f[k++]<<
1&511;C[6]=b&7;b>>>=3;C[7]=b&7;b>>>=3;C[8]=b&7;b=f[k++]&255;C[9]=b&7;b>>>=3;C[10]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[11]=b&7;b>>>=3;C[12]=b&7;b>>>=3;b|=f[k++]<<4&4095;E[1]=b&127;b>>>=7;H[1]=b&3;b>>>=2;v[1]=b&3;b>>>=2;b|=f[k++]<<1&511;I[1]=b&63;b>>>=6;C[13]=b&7;b=f[k++]&255;C[14]=b&7;b>>>=3;C[15]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[16]=b&7;b>>>=3;C[17]=b&7;b>>>=3;C[18]=b&7;b>>>=3;b|=f[k++]<<1&511;C[19]=b&7;b>>>=3;C[20]=b&7;b>>>=3;C[21]=b&7;b=f[k++]&255;C[22]=b&7;b>>>=3;C[23]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[24]=
b&7;b>>>=3;C[25]=b&7;b>>>=3;b|=f[k++]<<4&4095;E[2]=b&127;b>>>=7;H[2]=b&3;b>>>=2;v[2]=b&3;b>>>=2;b|=f[k++]<<1&511;I[2]=b&63;b>>>=6;C[26]=b&7;b=f[k++]&255;C[27]=b&7;b>>>=3;C[28]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[29]=b&7;b>>>=3;C[30]=b&7;b>>>=3;C[31]=b&7;b>>>=3;b|=f[k++]<<1&511;C[32]=b&7;b>>>=3;C[33]=b&7;b>>>=3;C[34]=b&7;b=f[k++]&255;C[35]=b&7;b>>>=3;C[36]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[37]=b&7;b>>>=3;C[38]=b&7;b>>>=3;b|=f[k++]<<4&4095;E[3]=b&127;b>>>=7;H[3]=b&3;b>>>=2;v[3]=b&3;b>>>=2;b|=f[k++]<<1&511;
I[3]=b&63;b>>>=6;C[39]=b&7;b=f[k++]&255;C[40]=b&7;b>>>=3;C[41]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[42]=b&7;b>>>=3;C[43]=b&7;b>>>=3;C[44]=b&7;b>>>=3;b|=f[k++]<<1&511;C[45]=b&7;b>>>=3;C[46]=b&7;b>>>=3;C[47]=b&7;b=f[k++]&255;C[48]=b&7;b>>>=3;C[49]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[50]=b&7;b>>>=3;C[51]=b&7;b>>>=3;J(S,E,v,H,I,C,p,0);b&=15;b|=f[k++]<<4&4095;S[0]=b&63;b>>>=6;S[1]=b&63;b=f[k++]&255;S[2]=b&31;b>>>=5;b|=f[k++]<<3&2047;S[3]=b&31;b>>>=5;S[4]=b&15;b>>>=4;b|=f[k++]<<2&1023;S[5]=b&15;b>>>=4;S[6]=b&7;b>>>=
3;S[7]=b&7;b=f[k++]&255;E[0]=b&127;b>>>=7;b|=f[k++]<<1&511;H[0]=b&3;b>>>=2;v[0]=b&3;b>>>=2;b|=f[k++]<<5&8191;I[0]=b&63;b>>>=6;C[0]=b&7;b>>>=3;C[1]=b&7;b>>>=3;b|=f[k++]<<1&511;C[2]=b&7;b>>>=3;C[3]=b&7;b>>>=3;C[4]=b&7;b=f[k++]&255;C[5]=b&7;b>>>=3;C[6]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[7]=b&7;b>>>=3;C[8]=b&7;b>>>=3;C[9]=b&7;b>>>=3;b|=f[k++]<<1&511;C[10]=b&7;b>>>=3;C[11]=b&7;b>>>=3;C[12]=b&7;b=f[k++]&255;E[1]=b&127;b>>>=7;b|=f[k++]<<1&511;H[1]=b&3;b>>>=2;v[1]=b&3;b>>>=2;b|=f[k++]<<5&8191;I[1]=b&63;b>>>=
6;C[13]=b&7;b>>>=3;C[14]=b&7;b>>>=3;b|=f[k++]<<1&511;C[15]=b&7;b>>>=3;C[16]=b&7;b>>>=3;C[17]=b&7;b=f[k++]&255;C[18]=b&7;b>>>=3;C[19]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[20]=b&7;b>>>=3;C[21]=b&7;b>>>=3;C[22]=b&7;b>>>=3;b|=f[k++]<<1&511;C[23]=b&7;b>>>=3;C[24]=b&7;b>>>=3;C[25]=b&7;b=f[k++]&255;E[2]=b&127;b>>>=7;b|=f[k++]<<1&511;H[2]=b&3;b>>>=2;v[2]=b&3;b>>>=2;b|=f[k++]<<5&8191;I[2]=b&63;b>>>=6;C[26]=b&7;b>>>=3;C[27]=b&7;b>>>=3;b|=f[k++]<<1&511;C[28]=b&7;b>>>=3;C[29]=b&7;b>>>=3;C[30]=b&7;b=f[k++]&255;C[31]=
b&7;b>>>=3;C[32]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[33]=b&7;b>>>=3;C[34]=b&7;b>>>=3;C[35]=b&7;b>>>=3;b|=f[k++]<<1&511;C[36]=b&7;b>>>=3;C[37]=b&7;b>>>=3;C[38]=b&7;b=f[k++]&255;E[3]=b&127;b>>>=7;b|=f[k++]<<1&511;H[3]=b&3;b>>>=2;v[3]=b&3;b>>>=2;b|=f[k++]<<5&8191;I[3]=b&63;b>>>=6;C[39]=b&7;b>>>=3;C[40]=b&7;b>>>=3;b|=f[k++]<<1&511;C[41]=b&7;b>>>=3;C[42]=b&7;b>>>=3;C[43]=b&7;b=f[k++]&255;C[44]=b&7;b>>>=3;C[45]=b&7;b>>>=3;b|=f[k++]<<2&1023;C[46]=b&7;b>>>=3;C[47]=b&7;b>>>=3;C[48]=b&7;b>>>=3;b|=f[k++]<<1&511;
C[49]=b&7;b>>>=3;C[50]=b&7;b>>>=3;C[51]=b&7;J(S,E,v,H,I,C,p,160);b=320*n++;for(w=0;320>w;w++)h[b++]=p[w]/32768}h.length=320*n;return h};var e=new Int32Array(160),m=new Int32Array(40),y=new Int32Array(8)};
