var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(p,C,D){if(null==p)throw new TypeError("The 'this' value for String.prototype."+D+" must not be null or undefined");if(C instanceof RegExp)throw new TypeError("First argument to String.prototype."+D+" must not be a regular expression");return p+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(p,C,D){if(p==Array.prototype||p==Object.prototype)return p;p[C]=D.value;return p};
$jscomp.getGlobal=function(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var C=0;C<p.length;++C){var D=p[C];if(D&&D.Math==Math)return D}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(p,C){var D=$jscomp.propertyToPolyfillSymbol[C];if(null==D)return p[C];D=p[D];return void 0!==D?D:p[C]};$jscomp.polyfill=function(p,C,D,I){C&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(p,C,D,I):$jscomp.polyfillUnisolated(p,C,D,I))};
$jscomp.polyfillUnisolated=function(p,C,D,I){D=$jscomp.global;p=p.split(".");for(I=0;I<p.length-1;I++){var G=p[I];if(!(G in D))return;D=D[G]}p=p[p.length-1];I=D[p];C=C(I);C!=I&&null!=C&&$jscomp.defineProperty(D,p,{configurable:!0,writable:!0,value:C})};
$jscomp.polyfillIsolated=function(p,C,D,I){var G=p.split(".");p=1===G.length;I=G[0];I=!p&&I in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Y=0;Y<G.length-1;Y++){var ka=G[Y];if(!(ka in I))return;I=I[ka]}G=G[G.length-1];D=$jscomp.IS_SYMBOL_NATIVE&&"es6"===D?I[G]:null;C=C(D);null!=C&&(p?$jscomp.defineProperty($jscomp.polyfills,G,{configurable:!0,writable:!0,value:C}):C!==D&&($jscomp.propertyToPolyfillSymbol[G]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(G):$jscomp.POLYFILL_PREFIX+G,
G=$jscomp.propertyToPolyfillSymbol[G],$jscomp.defineProperty(I,G,{configurable:!0,writable:!0,value:C})))};$jscomp.polyfill("String.prototype.startsWith",function(p){return p?p:function(C,D){var I=$jscomp.checkStringArgs(this,C,"startsWith");C+="";var G=I.length,Y=C.length;D=Math.max(0,Math.min(D|0,I.length));for(var ka=0;ka<Y&&D<G;)if(I[D++]!=C[ka++])return!1;return ka>=Y}},"es6","es3");$jscomp.arrayIteratorImpl=function(p){var C=0;return function(){return C<p.length?{done:!1,value:p[C++]}:{done:!0}}};
$jscomp.arrayIterator=function(p){return{next:$jscomp.arrayIteratorImpl(p)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(p){if(p)return p;var C=function(G,Y){this.$jscomp$symbol$id_=G;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:Y})};C.prototype.toString=function(){return this.$jscomp$symbol$id_};var D=0,I=function(G){if(this instanceof I)throw new TypeError("Symbol is not a constructor");return new C("jscomp_symbol_"+(G||"")+"_"+D++,G)};return I},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(p){if(p)return p;p=Symbol("Symbol.iterator");for(var C="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),D=0;D<C.length;D++){var I=$jscomp.global[C[D]];"function"===typeof I&&"function"!=typeof I.prototype[p]&&$jscomp.defineProperty(I.prototype,p,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return p},"es6",
"es3");$jscomp.iteratorPrototype=function(p){p={next:p};p[Symbol.iterator]=function(){return this};return p};$jscomp.iteratorFromArray=function(p,C){p instanceof String&&(p+="");var D=0,I=!1,G={next:function(){if(!I&&D<p.length){var Y=D++;return{value:C(Y,p[Y]),done:!1}}I=!0;return{done:!0,value:void 0}}};G[Symbol.iterator]=function(){return G};return G};$jscomp.polyfill("Array.prototype.keys",function(p){return p?p:function(){return $jscomp.iteratorFromArray(this,function(C){return C})}},"es6","es3");
var svManager={getInstance:function(){var p=window.$vnc;return p&&p.running&&p.running()?p:null}};function connvertServer(p){var C={};C.id=p.id;C.server=p.id;C.displayName=p.displayName||p.id;if(p=p.vnc){for(var D in p)C[D]=p[D];C.pwd=p.password||""}return C}
svGlobal.Vnc=function(p,C,D,I){function G(a){return"on"==a||"true"==a||1==a}function Y(a){g.loadbalanceToken||(L.randomAppId&&(a=hi5.tool.uuid()),g.loadbalanceToken=L.loadbalanceTokenName?L.loadbalanceTokenName+"="+a:"")}function ka(a,b){function c(f){!B&&f-H>q&&0<h.width&&(y.repaint(h.x,h.y,h.width,h.height),h.width=0,H=f);F=requestAnimationFrame(c)}var d=[],e=null,k=null,h=new hi5.graphic.Rectangle(0,0,0,0),r="Uint8ClampedArray"in window;this.width=a;this.height=b;var q=L.animation||62,w=null,B=
!1,y=this,z=null,H=0,F=0;this.pause=function(f){(B=f)?(window.OffscreenCanvas?w=new OffscreenCanvas(a,b):(w=document.createElement("canvas"),w.width=a,w.height=b),k=e,f=w.getContext("2d",{alpha:!1}),f.drawImage(e.canvas,0,0),y.setContext(f)):k&&(k.drawImage(e.canvas,0,0),y.setContext(k))};this.release=function(){cancelAnimationFrame(F);z=d=e=y=null};this.isPaused=function(){return B};this.setContext=function(f){f!=e&&(e||!f||f.createImageData(1,1).data.buffer||(r=!1),e=f,null!=e&&(z=e.createImageData(a,
b)))};this.getContext=function(){return e};this.resize=function(f,m){for(var l=0;l<m;l++)d[l]=new Uint32Array(f);y.width=a=f;y.height=b=m;null!=e&&(z=e.createImageData(a,b))};y.resize(a,b);this.getBuffer=function(){return d};this.setRGB=function(f,m,l){d[m][f]=l|4278190080};this.getRGB=function(f,m){return d[m][f]};this.setRGBs=function(f,m,l,n,t,v,u){var A=f+l;n=m+n;if(t.subarray)for(;m<n;m++,v+=u)d[m].set(t.subarray(v,v+l),f);else for(var P;m<n;m++,v+=u){var M=v;P=d[m];for(l=f;l<A;l++)P[l]=t[M++]}};
this.moveArea=function(f,m,l,n,t,v){if(0<v)for(t=f+t,v=m+v,--n;0<=n;n--)d[v+n].set(d[m+n].subarray(f,f+l),t);else if(0>v){t=f+t;v=m+v;for(var u=0;u<n;u++)d[v+u].set(d[m+u].subarray(f,f+l),t)}else if(0<t){t=f+t;v=m+v;u=d;var A;for(--l;0<=l;l--){var P=t+l;var M=f+l;for(A=0;A<n;A++)u[v+A][P]=u[m+A][M]}}else for(t=f+t,v=m+v,u=d,A=0;A<l;A++){M=t+A;var aa=f+A;for(P=0;P<n;P++)u[v+P][M]=u[m+P][aa]}};this.getRGBs=function(f,m,l,n){var t=new Uint32Array(l*n);t[0]=0;var v=d;l=f+l;n=m+n;for(var u=0,A=m;A<n;A++)for(m=
f;m<l;m++)t[u++]=v[A][m];return t};this.repaint=function(f,m,l,n){var t=z.data,v=0,u,A;0>f&&(l+=f,f=0);0>m&&(n+=m,m=0);f+l>a&&(l=a-f);m+n>b&&(n=b-m);var P=f+l;var M=m+n;if(r)for(t=new Uint32Array(t.buffer),A=m;A<M;A++)t.set(d[A].subarray(f,P),v),v+=a;else{var aa=4*(a-l)|0;for(A=m;A<M;A++){for(u=f;u<P;u++){var E=d[A][u];t[v++]=E&255;t[v++]=E>>8&255;t[v++]=E>>16&255;t[v++]=255}v+=aa}}e.putImageData(z,f,m,0,0,l,n)};this.postPaint=function(f,m,l,n){0<h.width?h.union(f,m,l,n):(h.x=f,h.y=m,h.width=l,h.height=
n)};this.commitPaint=function(){0<h.width&&(this.repaint(h.x,h.y,h.width,h.height),h.width=0)};this.startAnimation=function(){F=requestAnimationFrame(c)};this.fillRect=function(f,m,l,n,t){l=f+l;n=m+n;for(var v=m;v<n;v++)if(d[v].fill)d[v].fill(t,f,l);else{var u=d[v];for(m=f;m<l;m++)u[m]=t}}}function Ea(){var a=p.indexOf("://"),b=p.substring(a+3);a=b.indexOf("/");0<a&&(b=b.substring(0,a));return location.protocol+"//"+b}function J(a){U&&Q.send(a)}function jb(a){if(!ya)return"";a=hi5.browser.httpGet(Ea()+
"/CLIP?s="+ya+"&t="+Date.now(),!1);setTimeout(function(){Q.send("883")},999);return a}function za(){return x.displayName||x.server||x.symlink||x.id||"undefined"}function Fa(a){g.setTitle&&(document.title=a)}function V(a,b,c){this.need=a;this.handler=b;this.repeat=c||1}function Ta(a){var b=0,c=0,d=new Uint8Array(a),e=this,k=new V(0,null,0);this.release=function(){e=d=k=null};this.getHandler=function(){return k};this.getData=function(){return d};this.getPosition=function(){return b};this.setPosition=
function(h){b=h};this.getEnd=function(){return c};this.set=function(h,r,q){d=h;b=r;c=q};this.handle=function(){k.handler(e,k)};this.setHandler=function(h){h&&1>h.need&&svGlobal.logger.warn("need < 1");(k=h)&&c-b>=h.need&&h.handler(e,h)};this.getByte=function(){return d[b++]};this.peekByte=function(){return d[b]};this.getBE32=function(){return d[b++]<<24|d[b++]<<16|d[b++]<<8|d[b++]};this.getBE16=function(){return d[b++]<<8|d[b++]};this.skip=function(h){b+=h};this.skipBack=function(h){b-=h};this.getBytes=
function(h,r){if(r)for(var q=0;q<h;q++)r[q]=d[b++];else return r=b,b+=h,d.subarray(r,b)};this.copyToByteArray=function(h,r,q,w){hi5.Arrays.arraycopy(d,q,h,r,w)};this.getString16LE=function(h,r){for(var q="";h<r;){var w=d[h++]|d[h++]<<8;q+=String.fromCharCode(w)}return q}}function Ua(){var a="";x&&G(x.connectif)&&x.symlink&&"sessionStorage"in window&&(a="SV_"+x.symlink,x.user&&(a+=x.user));return a}function Va(){if(!U){if(Aa)Q=Aa,sa(x.width,x.height);else{var a=g.getRuntimeURL(!0);Q=g.oncreatewebsocket?
g.oncreatewebsocket(a):new WebSocket(a,"vnc");Q.binaryType="arraybuffer"}la.ws=Q;Q.onopen=kb;var b=new hi5.DataBuffer([],0,0);Q.onmessage=function(c){c=c.data;if("string"!=typeof c){var d=new Uint8Array(c);null!=ea&&ea.add(new RecordingObj(d,0,c.byteLength));switch(d[0]){case 48:O.set(d,2,d.length-2);O.handle();break;case 56:b.attach(d,2,d.length-2);Wa(b.getUnicodeString(b.getEnd()-b.getPosition(),!1));break;case 60:if(Ba||Ca)switch(b.attach(d,2,d.length-2),b.getByte()){case 32:if(N&&!N.isPaused()){c=
b.getLittleEndian16();d=b.getLittleEndian16();var e=b.getLittleEndian16();var k=b.getLittleEndian32(),h=g.sessionInfo.appInfo?g.sessionInfo.appInfo.sessions[k]:null;K&&K.moveCursor(d,e,!0,h,k,c)}}break;case 62:b.attach(d,2,d.length-2);Ga(b.getUnicodeString(b.getEnd()-b.getPosition(),!1));break;case 146:b.attach(d,2,d.length-2);lb(b);break;default:svGlobal.logger.warn("invalid type:"+d[0])}}else switch(e=parseInt(c.substring(0,2),16),d=c.substring(2),e){case 0:c=g.getRuntimeURL(!1);c=c.substring(c.indexOf("?")+
1);Q.send("00"+c);break;case 26:c=JSON.parse(d);if(c.name){svGlobal.logger.info("msg="+d);if(g.onerror)g.onerror(c);d=__svi18n.errorCode["S"+c.name]||"";d+=c.message||c.msg;g.showMessage(d)}else 0<svGlobal.log&&console.erro("No error code for message:"+d);break;case 27:0!=L.drawLicense&&K.drawLicense(d);break;case 56:Wa(d);break;case 59:c=hi5.Base64.dec(d,0);Ha=c[3]<<24|c[2]<<16|c[1]<<8|c[0];Ha&64&&g.showMessage(__svi18n.info.recording);K.setFeature(Ha);break;case 61:c=JSON.parse(d);switch(c.type){case 0:sa(c.width,
c.height);S=c.color/8|0;"ignoreCursor"in c&&(Ia=c.ignoreCursor);"trackCursorLocally"in c&&(Ba=c.trackCursorLocally,Xa(K));c.server&&(g.server=c.server,Fa(za()));Ya=c.length;K&&1!=g.mode&&K.setAutoScale(!0);if(g.onopened)g.onopened(c);break;case 1:c=c.duration;if(g.onprogress)g.onprogress(c,Ya);break;case 2:2==c.status?(Ja(),U=!0):(d=0==c.status,N.pause(d),ba=N.getContext(),c.warn&&g.showMessage(d?__svi18n.info.sessionPaused:__svi18n.info.sessionResumed))}break;case 62:Ga(d);break;default:svGlobal.logger.warn("@TODO:"+
c+"\n")}};Q.onclose=ta;Q.onerror=mb}}function lb(a){var b=a.getByte();switch(b){case 0:a=new Uint8Array(2);a[0]=146;a[1]=1;J(a.buffer);break;case 1:da&&da.check();break;case 6:la.remoteLockFlags=a.getLittleEndian32();la.checkLockFlags=!0;break;case 8:a=a.getByte();if(b=surfaces.getFocused()){var c="image/png";switch(a){case 1:c="image/jpeg";break;case 2:c="image/webp"}b.getSnapshot(function(d){d.bytes().then(function(e){sendSnapshot(e)})},c)}break;default:svGlobal.logger.warn("Invalid Client Control: "+
b)}}function nb(a,b){var c=0,d=!1;this.width=a;this.interval=b;var e=0;this.start=function(){d||(d=!0,c=setInterval(function(){if(K&&U){var k=K.getThumbnail(a);k&&k.length!=e&&(J("8E7"+k),e=k.length)}},b))};this.stop=function(){clearInterval(c)}}function ob(a,b){!Z||Z.width==a&&Z.interval==b||(Z.stop(),Z=null);Z||(Z=new nb(a,b));Z.start()}function pb(a){ea=new RecordingManager;ea.setHeader({name:"rec",width:a.width,height:a.height,color:a.server_bpp,namesuffix:".vncv",filetag:"VNCV",duration:0})}
function qb(a){var b=L.page&&L.page.join||"";if(b.startsWith("http://")||b.startsWith("https://"))return b;if(b.startsWith("/"))return location.origin+b;var c=location.href,d=c.lastIndexOf("/");if(b)return c.substring(0,d+1)+b;b=Ea();c.toLowerCase().startsWith(b.toLowerCase())&&(b=c.substring(0,d));return b+"/"+a}function Wa(a){var b=a.indexOf('"sessions":{,');0<b&&(b+=13,a=a.substring(0,b-1)+a.substring(b));a=JSON.parse(a);ya=a.session;Y(a.appId);a.server||(a.server=za());if(b=hi5.$("joinSelect"))b.value=
a.joinMode;if(b=hi5.$("requestControl"))b.disabled=a.hasControl;a.joined||Ca||(g.mode=0,O.setHandler(Da),ma=new Ka);b=qb("joinvnc.html")+"?id="+a.numericId;b=g.modifyURL(b);var c=a.webAddress;if(c&&0<c.length){var d=c.indexOf("://");c=c.substring(d+3);d=c.indexOf("/");0<d&&(c=c.substring(0,d));c.toLowerCase()!=location.host.toLowerCase()&&(b+="&gateway="+c)}a.joinLink=b;g.sessionInfo.appInfo=a;a.ver&&a.ver!=svGlobal.version&&svGlobal.logger.info("Client:"+svGlobal.version+" server:"+a.ver);if(g.onsessionstart)g.onsessionstart(g.sessionInfo)}
function Xa(a){Ba?Ia&&a.setCursor({system:"default",none:!1,result:"default"}):hi5.browser.isIE?a.setCursor({system:"none",none:!0,result:"none"}):a.setCursor({result:"url(data:image/x-icon;base64,AAACAAEAICACAAAAAAAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAgAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAABQUFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAOAAAADgAAAA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8f////H////x////8=) 0 0, none"})}
function Za(a,b){var c=__svi18n.errorCode[a];c||(c="Error "+a,b&&(c+=", "+b));if(g.onerror)g.onerror({name:a,message:c});g.displayMsg&&g.showMessage(c);0<svGlobal.log&&console.error(c)}function kb(a){svGlobal.logger.info("opened...");U=!0;J("87"+navigator.userAgent);if(g.onopen)g.onopen()}function mb(a){svGlobal.logger.warn(a)}function ta(a){if(g&&(svGlobal.logger.warn("closed ..."),(a=Ua())&&g.sessionInfo.appInfo&&0==g.mode&&(sessionStorage[a]=g.sessionInfo.appInfo.session),O&&O.getHandler()&&O.getHandler().handler==
ua&&g.onautherror&&g.onautherror(),pa=U=!1,da&&(da.stop(),da=null),!La)){if(g)if(g.onclose)g.onclose($a);else if(hi5.appcfg&&hi5.appcfg.returnUrl){window.location.href=hi5.appcfg.returnUrl;return}try{null!=ea&&(ea.exit(),ea=null),K&&(K.onclipdata=null,K.close(),K=null)}catch(b){}ab=bb=x=Ma=cb=W=ia=p=null;Z&&(Z.stop(),Z=null);fa=Aa=null;hi5.browser.isChromeApp?chrome.runtime.onSuspend.remvoeListener(ta):window.removeEventListener("unload",ta,!1);Q&&(Q.onopen=null,Q.onmessage=null,Q.onclose=null,Q=
Q.onerror=null);O&&(O.release(),O=null);ca&&(ca.release(),ca=null);ma&&(ma.release(),ma=null);K=la=Na=Da=T=W=null;N&&(N.release(),N=null);ba=null;g&&(g=null);window&&window.$vnc&&(window.$vnc=null);null!=ea&&(ea.exit(),ea=null)}}function rb(){La=!0;var a=document.getElementById("authDialog");if(!a)return"";hi5.browser.initDialog(a,function(b){var c=b.indexOf("=");b=b.substring(c+1);x.pwd=b;O.setHandler(Da);La=!1;setTimeout(Va,300)});a.showModal()}function db(a){svGlobal.logger.info("vnc auth");var b=
new Uint8Array(17);b[0]=32;a.copyToByteArray(b,1,a.getPosition(),16);a.skip(16);a=x.pwd||"";8<a.length&&(a=a.substring(0,8));for(var c=[0,0,0,0,0,0,0,0],d=a.length,e=0;e<d;e++)c[e]=a.charCodeAt(e);a=new DesCipher(c);a.encrypt(b,1,b,1);a.encrypt(b,9,b,9);J(b.buffer);O.setHandler(new V(4,ua))}function Oa(){var a=new Uint8Array(2);a[0]=147;a[1]=void 0==x.share||G(x.share)?1:0;J(a.buffer);O.setHandler(new V(24,function(b){if(g.onloggedin)g.onloggedin();J("8D");if(U){var c=g.sessionInfo;c.width=na=b.getBE16();
c.height=oa=b.getBE16();c.bpp=b.getByte();c.depth=b.getByte();c.bigEndian=0!=b.getByte();c.trueColor=0!=b.getByte();c.redMax=b.getBE16();c.greenMax=b.getBE16();c.blueMax=b.getBE16();c.redShift=b.getByte();c.greenShift=b.getByte();c.blueShift=b.getByte();b.skip(3);for(var d=b.getBE32(),e="",k=0;k<d;k++)e+=String.fromCharCode(b.getByte());c.name=e;svGlobal.logger.info("server name:"+e);x.displayName||x.server||Fa(e);sa(na,oa);sb()}}))}function ua(a){a=a.getBE32();svGlobal.logger.info("sec rst: "+a);
var b={code:a,message:""};switch(a){case 0:Oa();return;case 1:b.message=__svi18n.vnc.authError;g.close();rb();return;case 2:b.message="Too many failed authentication";break;default:b.message="Unknown auth error"+a}O.setHandler(null);g.onautherror&&g.onautherror(b)||(g.showMessage(b.message),g.close())}function sb(){var a=[];if(x){var b=x.encoding;8==x.color&&"Tight"==b&&(b="ZRLE");switch(b){case "Tight":a.push(7);a.push(16);a.push(4294967036);a.push(4294967273);break;case "TightPNG":a.push(4294967036);
a.push(4294967273);a.push(16);a.push(7);16==x.color&&(x.color=32);break;case "Raw":a.push(0);a.push(16);a.push(7);a.push(4294967036);a.push(4294967273);a.push(5);16==x.color&&(x.color=32);break;case "Hextile":a.push(5);a.push(16);a.push(7);a.push(4294967036);a.push(4294967273);a.push(0);16==x.color&&(x.color=32);break;default:a.push(16),a.push(7),a.push(4294967036),a.push(4294967273),16==x.color&&(x.color=32)}a.push(1);Ba&&(a.push(4294967057),a.push(4294967064));L.vnc&&!1===L.vnc.qemuExtKey||a.push(4294967038);
a.push(4294967035);"0"!=x.compression&&a.push(4294967040+parseInt(x.compression||6));"0"!=x.quality&&a.push(4294967264+parseInt(x.quality||5));a.push(4294967073);a.push(4294966988);a.push(R.encVMWServerCaps);R.onservercap=function(e){R.useVMWKeyEvent&&K&&K.setUnicode(!1)};b=a.length;var c=new Uint8Array(5+4*b);c[0]=147;c[1]=2;c[3]=b>>8&255;c[4]=b&255;for(var d=0;d<b;d++)c[5+4*d]=a[d]>>24&255,c[6+4*d]=a[d]>>16&255,c[7+4*d]=a[d]>>8&255,c[8+4*d]=a[d]&255;J(c.buffer);tb();pa=!0;void 0!=x.recording&&"on"==
x.recording&&pb(x);if(g&&(L.pingInterval&&g.startPing(L.pingInterval),g.onready))g.onready()}}function Pa(a,b,c,d,e,k,h,r,q,w){var B=new Uint8Array(21);B[0]=35;B[1]=0;B[5]=a;B[6]=b;B[7]=c?1:0;B[8]=d?1:0;B[9]=e>>8&255;B[10]=e&255;B[11]=k>>8&255;B[12]=k&255;B[13]=h>>8&255;B[14]=h&255;B[15]=r;B[16]=q;B[17]=w;J(B.buffer)}function tb(){var a=parseInt(x.color);switch(a){case 32:Pa(32,24,!1,!0,255,255,255,0,8,16);break;case 16:Pa(16,16,!1,!0,31,63,31,11,5,0);break;case 8:Pa(8,8,!1,!0,7,7,3,0,3,6);break;
default:svGlobal.logger.warn("invliad color depath:"+a)}S=a/8|0;ca&&ca.setBytesPerPixel(S);Qa(0,0,na,oa,!1);O&&O.setHandler(Na)}function Qa(a,b,c,d,e){var k=new Uint8Array(11);k[0]=147;k[1]=3;k[2]=e?1:0;k[3]=a>>8&255;k[4]=a&255;k[5]=b>>8&255;k[6]=b&255;k[7]=c>>8&255;k[8]=c&255;k[9]=d>>8&255;k[10]=d&255;J(k.buffer)}function Ka(){var a=new TINF;a.init(2==g.mode?120:0);var b=new Ta(0),c=new Uint32Array(4096),d=new Uint32Array(128);this.release=function(){d=c=null;a.release();a=null;b.release();b=null};
this.getHistory=function(){var e=[90],k=a.getHistory().length,h=k&255;e.push(k>>8&255);e.push(h);return e=e.concat(a.getHistory())};this.setHistory=function(e){a.setHistory(e)};this.decode=function(e,k,h,r,q,w){var B=e.getBE32();e=e.getBytes(B);e=a.uncompress(e,0);var y;b.set(e.dest,0,e.destIndex);var z=d,H=b.getByte,F=c;2==S&&(S=4);for(e=h;e<h+q;e+=64){var f=Math.min(h+q-e,64);for(B=k;B<k+r;B+=64){var m=Math.min(k+r-B,64);var l=H();var n=0!=(l&128);l&=127;if(1==S)for(y=0;y<l;y++)z[y]=fa[H()];else for(y=
0;y<l;y++)z[y]=H()|H()<<8|H()<<16|4278190080;if(1!=l||w){if(n)if(0==l)for(n=0,y=n+m*f;n<y;){var t=1==S?fa[H()]:H()|H()<<8|H()<<16|4278190080;var v=1;do l=H(),v+=l;while(255==l);if(F.fill)F.fill(t,n,n+v),n+=v;else for(;0<v--;)F[n++]=t}else for(n=0,y=n+m*f;n<y;){t=H();v=1;if(0!=(t&128)){do l=H(),v+=l;while(255==l)}t&=127;t=z[t];if(F.fill)F.fill(t,n,n+v),n+=v;else for(;0<v--;)F[n++]=t}else if(n=m*f,0==l)if(1==S)for(y=0;y<n;y++)F[y]=fa[H()];else for(y=0;y<n;y++)F[y]=H()|H()<<8|H()<<16|4278190080;else for(v=
16<l?8:4<l?4:2<l?2:1,y=n=0;y<f;y++){t=n+m;for(var u=l=0;n<t;)0==u&&(l=H(),u=8),u-=v,F[n++]=z[l>>u&(1<<v)-1&127]}w||N.setRGBs(B,e,m,f,F,0,m)}else N.fillRect(B,e,m,f,z[0])}}w||N.postPaint(k,h,r,q)}}function eb(){function a(f,m,l,n,t){this.draw=function(){ba.fillStyle=t;ba.fillRect(f,m,l,n)};this.type=0;this.ready=function(){return!0}}function b(f,m,l){this.draw=function(){ba.putImageData(l,f,m)};this.type=1;this.ready=function(){return!0}}function c(f,m,l){this.draw=function(){ba.drawImage(l,f,m);URL.revokeObjectURL(l.src)};
this.type=2;this.ready=function(){return!!l.src&&l.complete};this.image=l}function d(f,m,l,n,t){var v=null;l=new Blob([l],{type:t||"image/jpeg"});var u=!1;this.draw=function(){v&&(ba.drawImage(v,f,m),v.close())};this.type=3;this.ready=function(){return u};createImageBitmap(l).then(function(A){v=A;u=!0;n()}).catch(function(A){u=!0;svGlobal.logger.warn("Failed to load JPEG:"+A)})}function e(){var f=w[r];f||(f=new TINF,f.init(2==g.mode?120:0),w[r]=f);return f}function k(f){var m=f.getByte(),l=m&127;
m&128&&(m=f.getByte(),l|=(m&127)<<7,m&128&&(l|=f.getByte()<<14));return l}function h(f){var m=f>>8&248,l=f>>3&252;f=f<<3&255;return m|m>>5|(l|l>>6)<<8|(f|f>>5)<<16|4278190080}var r=0,q=3,w={},B={data:[0],length:0},y=Array(256);y[0]=0;this.inUse=!1;var z=this,H=!!window.createImageBitmap;this.setBytesPerPixel=function(f){q=3<f?3:f};var F=new function(){function f(){for(;0<m.length;){var l=m[0];if(!l.ready())break;l.draw();m.shift()}}var m=[];this.check=f;this.push=function(l){m.push(l);2==l.type?l.image.onload=
f:f()};this.release=function(){m=[]}};this.release=function(){F.release();w=B=y=z=F=null};this.getHistory=function(){var f=[84],m=Object.keys(w).length;f.push(m);for(var l in w)if(w.hasOwnProperty(l)){f.push(parseInt(l));m=w[l].getHistory();var n=m.length,t=n&255;f.push(n>>8&255);f.push(t);f=f.concat(m)}return f};this.setHistory=function(f){for(var m=0,l=f[m++],n=0;n<l;n++){var t=f[m++],v=f[m++],u=f[m++];u=(v&255)<<8|u&255;v=f.slice(m,m+u);m+=u;u=w[t];u||(u=new TINF,u.init(2==g.mode?120:0),w[t]=u);
u.setHistory(v)}};this.drawImageData=function(f,m,l){F.push(new b(m,l,f))};this.decode=function(f,m,l,n,t,v){z.inUse||(z.inUse=!0);var u=f.getByte();switch(u>>4){case 8:if(v)f.skip(q);else{v=F;u=v.push;if(3==q)f="rgb("+f.getByte()+","+f.getByte()+","+f.getByte()+")";else{var A=f.getByte()|f.getByte()<<8;f=A>>8&248;var P=A>>3&252;A=A<<3&255;f="rgb("+(f|f>>5)+","+(P|P>>6)+","+(A|A>>5)+")"}u.call(v,new a(m,l,n,t,f))}break;case 9:u=k(f);v?f.skip(u):H?F.push(new d(m,l,f.getBytes(u),F.check)):(n=f.getBytes(u),
n=new Blob([n],{type:"image/jpeg"}),t=URL.createObjectURL(n),n=new Image,F.push(new c(m,l,n)),n.src=t);break;case 10:u=k(f);v?f.skip(u):H?F.push(new d(m,l,f.getBytes(u),F.check,"image/png")):(n=f.getBytes(u),n=new Blob([n],{type:"image/png"}),t=URL.createObjectURL(n),n=new Image,F.push(new c(m,l,n)),n.src=t);break;default:if(r=(u&48)>>4,u=u&64?f.getByte():0,1==u){u=f.getByte;var M=u()+1,aa=2!=M?n*t:t*((n+7)/8|0),E=0;if(3==q)for(;E<M;E++)y[E]=u()|u()<<8|u()<<16|4278190080;else for(;E<M;E++)y[E]=h(u()|
u()<<8);12>aa?(B.data=f.getBytes(aa),B.length=aa):(u=k(f),f=e().uncompress(f.getBytes(u),0),B.data=f.dest,B.length=f.destIndex);u=B.data;P=ba.createImageData(n,t);if("Uint8ClampedArray"in window)if(A=new Uint32Array(P.data.buffer),2!=M)for(E=0;E<aa;E++)A[E]=y[u[E]];else{f=0;aa=(n+7)/8|0;for(var va,qa=0;qa<t;qa++){va=qa*aa;for(var ja=0;ja<(n/8|0);ja++)for(M=u[va+ja],E=7;0<=E;E--)A[f++]=y[M>>E&1];M=8-n%8;for(E=7;E>=M;E--)A[f++]=y[u[va+ja]>>E&1]}}else if(A=P.data,f=0,2!=M)for(E=0;E<aa;E++)M=y[u[E]],
A[f++]=M&255,A[f++]=M>>8&255,A[f++]=M>>16&255,A[f++]=255;else for(f=0,aa=(n+7)/8|0,qa=0;qa<t;qa++){va=qa*aa;for(ja=0;ja<(n/8|0);ja++)for(M=u[va+ja],E=7;0<=E;E--){var ra=y[M>>E&1];A[f++]=ra&255;A[f++]=ra>>8&255;A[f++]=ra>>16&255;A[f++]=255}M=8-n%8;for(E=7;E>=M;E--)ra=y[u[va+ja]>>E&1],A[f++]=ra&255,A[f++]=ra>>8&255,A[f++]=ra>>16&255,A[f++]=255}v||F.push(new b(m,l,P))}else if(0==u){u=n*t*q;11<u&&(u=k(f));M=n*t;P=M*q;u=11<P?e().uncompress(f.getBytes(u),0).dest:f.getBytes(P);P=ba.createImageData(n,t);
A=P.data;n=f=0;if(3==q)for(E=0;E<M;E++)A[f++]=u[n++],A[f++]=u[n++],A[f++]=u[n++],A[f++]=255;else for(E=0;E<M;E++)t=h(u[n++]|u[n++]<<8),A[f++]=t&255,A[f++]=t>>8&255,A[f++]=t>>16&255,A[f++]=255;v||F.push(new b(m,l,P))}else svGlobal.logger.info("xx filter:"+u)}}}function Ga(a){var b=parseInt(a.substring(0,1),16),c=a.substring(1),d=!1;var e=g.sessionInfo.appInfo;switch(b){case 0:var k=JSON.parse(c);Ja();U=!0;d=k.width;e=k.height;if(d==na&&e==oa)break;sa(d,e);break;case 1:g.reconnectOnResize=!1;k=JSON.parse(c);
e.sessions[k.numericId]=k.name||k.__ip;g.onsessionjoin&&(d=g.onsessionjoin(k));if(d)break;g.showMessage(__svi18n.info.joinsession.applyArgs([k.numericId,k.__ip,k.name]));break;case 2:k=JSON.parse(c);delete e.sessions[k.numericId];g.onsessionexit&&(d=g.onsessionexit(k));if(d)break;g.showMessage(__svi18n.info.exitsession.applyArgs([k.numericId,k.__ip,k.name]));break;case 3:k=JSON.parse(c);e.joinMode!=k.mode&&(e.joinMode=k.mode,a=hi5.$("joinSelect"))&&(a.value=k.mode);if(e.hasControl)break;K.setReadOnly(!1,
2==k.mode);if(e=hi5.$("requestControl"))e.disabled=!0;g.ongivecontrol&&(d=g.ongivecontrol());if(d)break;g.showMessage(__svi18n.info.givecontrol);break;case 4:k=JSON.parse(c);K.setReadOnly(!0,2==k.mode);e.hasControl=!1;if(e=hi5.$("requestControl"))e.disabled=!1;g.ontakebackcontrol&&(d=g.ontakebackcontrol());if(d)break;g.showMessage(__svi18n.info.nocontrol);break;case 5:k=JSON.parse(c);g.onrequirecontrol&&(d=g.onrequirecontrol(k));if(d)break;d=__svi18n.info.title.applyArgs([k.name,k.numericId,k.__ip]);
g.showMessage({title:d,msg:__svi18n.info.recontrol,cbYes:function(){g.giveControl(k.numericId);this.destroy()},cbNo:function(){g.refuseControl(k.numericId);this.destroy()}});break;case 9:k=JSON.parse(c);0<k.interval&&0<k.width?ob(k.width,k.interval):Z&&(Z.stop(),Z=null);break;case 10:if(1==a.length)J("8E8"+hi5.Base64.enc(ub()));else if(vb(hi5.Base64.dec(a.substring(1),0)),g.refreshOutput(),pa=!0,g.onloggedin)g.onloggedin();da&&da.check(15555);break;case 11:k=JSON.parse(c),g.onrequirejoin&&(d=g.onrequirejoin(k)),
d||(d=__svi18n.info.title.applyArgs([k.name,k.numericId,k.__ip]),g.showMessage({title:d,msg:__svi18n.info.reqjoin,cbYes:function(){g.allowJoin(k.numericId,!0);this.destroy()},cbNo:function(){g.allowJoin(k.numericId,!1);this.destroy()}}))}}function ub(){var a=ma.getHistory(),b=ca.getHistory();return a.concat(b)}function vb(a){var b=0,c=a[b++];if(90==c){c=a[b++];var d=a[b++];if(c=(c&255)<<8|d&255)ma.setHistory(a.slice(b,b+c)),b+=c}c=a[b++];84==c&&ca.setHistory(a.slice(b))}function wb(a){if(!g.openLink)return!1;
var b=a;a=a.toLowerCase();var c=0==a.indexOf("http://")||0==a.indexOf("https://")||0==a.indexOf("ftp://")||0==a.indexOf("mailto:")||0==a.indexOf("tel:")||0==a.indexOf("callto:");c||(0==a.indexOf("www.")?(c=!0,a="http://"+a):0==a.indexOf("ftp.")&&(c=!0,a="ftp://"+a));if(c){if(0<a.indexOf("\r")||0<a.indexOf("\n"))return!1;if(g.onurlredirection&&g.onurlredirection(c))return!0;K.processLink(b);return!0}return!1}function xb(a,b,c,d,e,k,h,r,q){this.cache_idx=a;this.rawData=b;this.none=!b;this.hotX=c;this.hotY=
d;this.width=e;this.height=k;this.xorSize=r;this.andSize=q;this.result="";this.distance=0;this.bpp=h;this.system="";this.init=function(){if(this.distance){var y=0;if(b)for(var z=0,H=b.length;z<H;z++)0!=b[z]&&(y+=z%e+(z/e|0));this.distance=y}this.system||(y=507==this.distance?"text":"",this.system=y)};a="";if(!this.system&&b){var w=e*k*4;h=62+w+r+q;var B=new Uint8Array(h);h=new hi5.DataBuffer(B,0,h);h.setLittleEndian16(0);h.setLittleEndian16(2);h.setLittleEndian16(1);h.setByte(e);h.setByte(k);h.setByte(0);
h.setByte(0);h.setLittleEndian16(c);h.setLittleEndian16(d);h.setLittleEndian32(40+w+r+q);h.setLittleEndian32(22);h.setLittleEndian32(40);h.setLittleEndian32(e);h.setLittleEndian32(2*k);h.setLittleEndian16(1);h.setLittleEndian16(32);h.setLittleEndian32(0);h.setLittleEndian32(r+q);h.setLittleEndian32(0);h.setLittleEndian32(0);h.setLittleEndian32(0);h.setLittleEndian32(0);for(c=k-1;0<=c;c--)for(d=0;d<e;d++)k=b[e*c+d],h.setByte(k&255),h.setByte(k>>8&255),h.setByte(k>>16&255),h.setByte(k>>24&255);hi5.browser.isIE||
(a="data:image/x-icon;base64,"+hi5.Base64.enc(h.getData()))}this.url=a}function fb(a,b,c,d,e){var k,h=d*e,r=0,q=a.getPosition(),w=a.getData();if(ca.inUse){e=ba.createImageData(d,e);if(4==S){if("Uint8ClampedArray"in window)for(d=new Uint32Array(e.data.buffer),r=0;r<h;r++)d[r]=w[q++]<<16|w[q++]<<8|w[q++]|4278190080,q++;else for(d=e.data,k=4*h;r<k;)d[r++]=w[q+2],d[r++]=w[q+1],d[r++]=w[q],d[r++]=255,q+=4;a.skip(4*h)}else if(1==S){if("Uint8ClampedArray"in window)for(d=new Uint32Array(e.data.buffer),r=
0;r<h;r++)d[r]=fa[w[q++]];else{d=e.data;k=4*h;for(var B;r<k;)B=fa[w[q++]],d[r++]=B&255,d[r++]=B>>8&255,d[r++]=B>>16&255,d[r++]=255}a.skip(h)}ca.drawImageData(e,b,c)}else{switch(S){case 4:if(0==q%4){q+=3;for(r=0;r<h;r++)w[q]=255,q+=4;k=new Uint32Array(a.getData().buffer,a.getPosition(),h)}else for(k=new Uint32Array(h),r=0;r<h;r++)k[r]=w[q++]|w[q++]<<8|w[q++]<<16|4278190080,q++;a.skip(4*h);break;case 1:k=new Uint32Array(h);for(r=0;r<h;r++)k[r]=fa[w[q++]];a.skip(h);break;default:svGlobal.logger.warn("Invalid bytePixel for RAW: "+
S);return}N.setRGBs(b,c,d,e,k,0,d);N.postPaint(b,c,d,e)}}function sa(a,b){if(a&&b){if(na=a,oa=b,x.width=a,x.height=b,N.resize(a,b),K&&K.setSize(a,b),g.onresolutionchange)g.onresolutionchange(a,b)}else Za("C_1","Invalid monitor size, width:"+a+" h:"+b)}function yb(a){if(pa&&a&&(a=a.getData("text/plain")))if(R.useVMWKeyEvent)g.writeText(a);else{var b=a.length,c=new Int8Array(9+b);c[0]=147;c[1]=6;c[5]=b>>24&255;c[6]=b>>16&255;c[7]=b>>8&255;c[8]=b&255;for(var d=0;d<b;d++)c[9+d]=a.charCodeAt(d);J(c.buffer)}}
function Ja(){U=!1;ca=new eb;ma=new Ka}function Ra(a,b,c,d){pa&&(gb=a,(a?1<<b:0)!=W[1]||c!=(W[2]<<8|W[3])||d!=(W[4]<<8|W[5]))&&(W[2]=a?1<<b:0,W[3]=c>>8&255,W[4]=c&255,W[5]=d>>8&255,W[6]=d&255,J(W.buffer))}function ha(a,b,c){if(hb&&0<c){var d=c;170!=d&&(183==d?d=84:197==d&&(d=198),X[4]=a?1:0,X[5]=b>>24,X[6]=b>>16,X[7]=b>>8,X[8]=b,X[9]=d>>24,X[10]=d>>16,X[11]=d>>8,X[12]=d,J(X.buffer))}else if(R.useVMWKeyEvent&&0<c)J(R.encScancode(a,c));else{if(1>b)return;ia[2]=a?1:0;ia[5]=b>>24;ia[6]=b>>16;ia[7]=b>>
8;ia[8]=b;J(ia.buffer)}if(g.onkey)g.onkey(a,b,c)}function ib(a,b){var c=cb[b.toLowerCase()];c?g.writeScancode(a,c):(c=b.length,0!=c&&(1==c?g.writeKeyCode(a,b.toUpperCase().charCodeAt(0)):a&&g.writeText(b)))}this.displayMsg=!0;this.reconnectTimes=0;this.setTitle=this.openLink=!0;this.mode=0;this.CAP_QEMU_KEY=1;var La=!1,Aa="object"==typeof p?p:null,Ca="object"==typeof p||0<p.indexOf("/PLAY?");Ca?(this.mode=1,Aa&&(p=""),p+="&touchpad=on"):0<p.indexOf("/JOIN?")&&(this.mode=2,this.reconnectOnResize=!1);
hi5.appcfg||(hi5.appcfg={img:{},toolbar:{fadable:!0},displayMsg:!0});var L=hi5.appcfg,x=hi5.tool.queryToObj(p.substring(p.indexOf("?")+1));void 0==x.mapClipboard&&L.clipboard&&void 0!=L.clipboard.enabled&&(x.mapClipboard=L.clipboard.enabled);var da=null,$a=!1,ya="",hb=!1;!x.width&&C&&(x.width=C,p+="&width="+C);!x.wHeight&&D&&(x.height=D,p+="&height="+D);!x.color&&I&&(x.color=I,p+="&color="+I);x.color||(x.color=32);var Ia=void 0==x.ignoreCursor||G(x.ignoreCursor),Ba=void 0==x.trackCursorLocally||G(x.trackCursorLocally),
g=this;this.server=x.server;this.port=parseInt(x.port,10);this.loadbalanceToken="";L.loadbalanceTokenName&&x[L.loadbalanceTokenName]&&Y(x[L.loadbalanceTokenName]);this.sessionInfo={major:0,minor:0,width:0,height:0,bpp:0,bigEndian:!0,trueColor:!0};this.modifyURL=function(a){g.loadbalanceToken&&(a+="&"+g.loadbalanceToken);return a};var K=null,U=!1,pa=!1,Ha=0,Sa=!1,wa=0,xa=0,ea=null;window.$vnc=this;var O=new Ta(4194304);this.setLinks=function(a){};this.running=function(){return U};var Q=null,S=4,na=
1024,oa=768,fa=[-16777216,-16777180,-16777143,-16777107,-16777070,-16777034,-16776997,-16776961,-16768E3,-16767964,-16767927,-16767891,-16767854,-16767818,-16767781,-16767745,-16758528,-16758492,-16758455,-16758419,-16758382,-16758346,-16758309,-16758273,-16749312,-16749276,-16749239,-16749203,-16749166,-16749130,-16749093,-16749057,-16739840,-16739804,-16739767,-16739731,-16739694,-16739658,-16739621,-16739585,-16730624,-16730588,-16730551,-16730515,-16730478,-16730442,-16730405,-16730369,-16721152,
-16721116,-16721079,-16721043,-16721006,-16720970,-16720933,-16720897,-16711936,-16711900,-16711863,-16711827,-16711790,-16711754,-16711717,-16711681,-11206656,-11206620,-11206583,-11206547,-11206510,-11206474,-11206437,-11206401,-11197440,-11197404,-11197367,-11197331,-11197294,-11197258,-11197221,-11197185,-11187968,-11187932,-11187895,-11187859,-11187822,-11187786,-11187749,-11187713,-11178752,-11178716,-11178679,-11178643,-11178606,-11178570,-11178533,-11178497,-11169280,-11169244,-11169207,-11169171,
-11169134,-11169098,-11169061,-11169025,-11160064,-11160028,-11159991,-11159955,-11159918,-11159882,-11159845,-11159809,-11150592,-11150556,-11150519,-11150483,-11150446,-11150410,-11150373,-11150337,-11141376,-11141340,-11141303,-11141267,-11141230,-11141194,-11141157,-11141121,-5636096,-5636060,-5636023,-5635987,-5635950,-5635914,-5635877,-5635841,-5626880,-5626844,-5626807,-5626771,-5626734,-5626698,-5626661,-5626625,-5617408,-5617372,-5617335,-5617299,-5617262,-5617226,-5617189,-5617153,-5608192,
-5608156,-5608119,-5608083,-5608046,-5608010,-5607973,-5607937,-5598720,-5598684,-5598647,-5598611,-5598574,-5598538,-5598501,-5598465,-5589504,-5589468,-5589431,-5589395,-5589358,-5589322,-5589285,-5589249,-5580032,-5579996,-5579959,-5579923,-5579886,-5579850,-5579813,-5579777,-5570816,-5570780,-5570743,-5570707,-5570670,-5570634,-5570597,-5570561,-65536,-65500,-65463,-65427,-65390,-65354,-65317,-65281,-56320,-56284,-56247,-56211,-56174,-56138,-56101,-56065,-46848,-46812,-46775,-46739,-46702,-46666,
-46629,-46593,-37632,-37596,-37559,-37523,-37486,-37450,-37413,-37377,-28160,-28124,-28087,-28051,-28014,-27978,-27941,-27905,-18944,-18908,-18871,-18835,-18798,-18762,-18725,-18689,-9472,-9436,-9399,-9363,-9326,-9290,-9253,-9217,-256,-220,-183,-147,-110,-74,-37,-1],R={updateReqId:1,encVMWServerCaps:1464686202,keybuf:new Uint8Array(9),encoding:[this.encVMWServerCaps],useVMWAck:!1,useVMWKeyEvent:!1,processServerCap:function(a){a=a.getBE32();R.useVMWKeyEvent=!!(a&2);R.useVMWAck=!!(a&32);if(R.onservercap)R.onservercap(a);
svGlobal.logger.info("Server Cap:"+a)},process:function(a){var b=a.getByte();a.getBE16();switch(b){case 0:return R.processServerCap(a),R.encClientCap();default:svGlobal.logger.warn("TODO: vmware type:"+b)}},encClientCap:function(){var a=new Uint8Array(9);a[0]=147;a[1]=127;a[2]=3;a[4]=8;a[5]=0;a[6]=1;a[7]=256;a[8]=65536;return a},encScancode:function(a,b){127<b&&(b=b&127|256);var c=R.keybuf;c[0]=147;c[1]=127;c[2]=0;c[4]=8;c[5]=b>>8;c[6]=b&255;c[7]=a?1:0;return c},encAck:function(a){var b=new Uint8Array(9);
b[0]=147;b[1]=127;b[2]=4;b[4]=8;b[5]=R.updateReqId;a=10*(a+2);b[7]=a>>8;b[8]=a&255;return b}},N;N?N.resize(1024,768):N=new ka(1024,768);var ba=N.getContext();this.getDesktop=function(){return N};this.writeKeyComb=function(a){a=a.split("+");var b=a.length;if(0!=b){for(var c=null,d=0;d<b;d++){var e=a[d];""==e&&""==c&&(e="Add");""!=e&&ib(!0,e);c=e}for(d=b-1;0<=d;d--)e=a[d],""==e&&""==c&&(e="Add"),""!=e&&ib(!1,e),c=e}};var la=new function(){this.ws=null;this.capsLock=this.numLock=!1;this.setJoinMode=
g.setJoinMode;this.requestControl=g.requestControl;this.writeKeyComb=g.writeKeyComb;this.remoteLockFlags=this.localLockFlags=0;this.checkLockFlags=!0;var a=0;this.getAppMode=function(){return g.mode};this.send=function(b){U&&this.ws.send(b)};this.sendInput=function(b){g.writeRawInput(b);if(g.onactivity)g.onactivity(b)};this.getAppInfo=function(){return g.sessionInfo.appInfo};this.onresize=function(b){if(b=b.target.svSurface){var c=b.getFreeSpace();b=c.width;c=c.height;a&&(clearTimeout(a),a=0);var d=
setTimeout;if(Sa){var e=new Int8Array(25);e[0]=147;e[1]=251;e[2]=0;e[3]=b>>8;e[4]=b;e[5]=c>>8;e[6]=c;e[7]=1;e[8]=0;e[9]=wa>>24;e[10]=wa>>16;e[11]=wa>>8;e[12]=wa;e[13]=0;e[14]=0;e[15]=0;e[16]=0;e[17]=b>>8;e[18]=b;e[19]=c>>8;e[20]=c;e[21]=xa>>24;e[22]=xa>>16;e[23]=xa>>8;e[24]=xa;J(e.buffer)}a=d(void 0,555)}else console.warn("==== no surface for browser resizing")};this.onorientationchange=function(b){};this.getClipData=jb;this.onfocus=function(b){};this.fileCallback=[];this.getShareFiles=function(b,
c){this.ws.send("3A5"+b);this.fileCallback.push(c)};this.notifyFiles=function(b){for(var c=this.fileCallback,d=0,e=c.length;d<e;d++)c[d](b)};this.getFile=function(b){window.open(g.getFileUrl(b))};this.removeFile=function(b){uploadMgr&&uploadMgr.fileService.remove(b)};this.getFileLink=function(b){return Ea()+"/DOWNLOAD?s="+ya+"&f="+b};this.getGateway=function(){return p};this.reconnect=function(b,c,d){};this.sendKeyboardSyncFlags=function(b){if(U){var c=this.remoteLockFlags;(c&7)!=b&&((c&4)!=(b&4)&&
(ha(!0,65549,58),ha(!1,65549,58)),(c&2)!=(b&2)&&(ha(!0,65407,69),ha(!1,65407,69)),(c&1)!=(b&1)&&(ha(!0,65300,70),ha(!1,65300,70)));this.remoteLockFlags=this.localLockFlags=b;return!0}return!1}};void 0!=L.displayMsg?this.displayMsg=L.displayMsg:L.displayMsg=this.displayMsg;void 0!=L.reconnectTimes&&(this.reconnectTimes=L.reconnectTimes);void 0!=L.openLink&&(this.openLink=L.openLink);void 0!=L.setTitle&&(this.setTitle=L.setTitle);"boolean"==typeof L.useWSS&&(p=(L.useWSS?"wss":"ws")+p.substring(p.indexOf("://")));
this.getURL=function(){return p};this.getRuntimeURL=function(a){var b=hi5.tool.replaceQuery(p,"pwd","x"),c=Ua(),d="";c&&(d=sessionStorage[c]||"")&&(d="&preSymJoin="+d);b=b+d+"&binary=on";if(d=window.opener){c=null;try{c=d.__sparkUser}catch(e){}c&&(d=c.account,c=c.session,d&&(b+="&account="+d),c&&(b+="&session="+c))}b+="&pasteCap="+(hi5.browser.isChrome&&hi5.browser.isDesktop?3:0);a&&0==g.mode&&L.wsPost&&(b=p.substring(0,p.indexOf("?"))+"?_METHOD=post");b=g.modifyURL(b);(a=hi5.browser.cookie.get("__SV_TOKEN_A"))&&
(b+="&__SV_TOKEN_A="+encodeURIComponent(a));return b};var zb=parseInt(x.server_bpp||x.color||24);this.getColor=function(){return zb};this.getDisplayName=za;Fa(za());this.sendPing=function(a){var b=new Uint8Array(a?2+a.length:2);b[0]=146;b[1]=0;a&&b.set(a,2);J(b.buffer)};this.startPing=function(a,b){b=b||0;da||(da=new hi5.tool.ResponseMonitor(function(){g.sendPing()},function(){if(U&&g.onnoresponse)return g.onnoresponse()}));da.setInterval(a,b);var c=new Uint8Array(4);c[0]=146;c[1]=2;c[2]=a;c[3]=b;
J(c.buffer);g.sendPing()};this.stopPing=function(){da&&da.stop()};var Z=null;this.setJoinMode=function(a){J("8E1"+a)};this.refuseControl=function(a){J("8E3"+a)};this.giveControl=function(a){J("8E4"+a)};this.requestControl=function(){J("8E2")};this.allowJoin=function(a,b){J("8EA"+a+"\t"+(b?1:0))};this.play=function(){J("F3")};this.pause=function(){J("F2")};this.scan=function(a){J("F4"+(a?"1":"0"))};this.seek=function(a){K&&U&&(J("F4"+(a?"1":"0")+"\t"+(a/K.getScale().x|0)),N.pause(!0))};var Ya=0;this.run=
function(){Va();N.startAnimation()};this.hide=function(){K&&K.hide()};this.showMessage=function(a,b){g.displayMsg&&a&&(K?K.showMessage(a,b):("string"==typeof a&&(a={msg:a,timeout:b||0}),hi5.notifications.notify(a)))};this.close=function(){$a=!0;if(Q&&U)for(;Q&&Q.readyState!=WebSocket.CLOSING&&Q.readyState!=WebSocket.CLOSED;)J("85"),Q.close();else ta()};hi5.browser.isChromeApp?chrome.runtime.onSuspend.addListener(ta):window.addEventListener("unload",ta,!1);var Da=new V(12,function(a){if(82!=a.getByte()||
70!=a.getByte()||66!=a.getByte())g.showMessage(__svi18n.vnc.notvnc),g.close();else if(a.skip(1),g.sessionInfo.major=100*(a.getByte()-48)+10*(a.getByte()-48)+(a.getByte()-48),a.skip(1),g.sessionInfo.minor=100*(a.getByte()-48)+10*(a.getByte()-48)+(a.getByte()-48),svGlobal.logger.info("RFB major: "+g.sessionInfo.major+" minor: "+g.sessionInfo.minor),a.skip(1),37<=10*g.sessionInfo.major+g.sessionInfo.minor){a="\u0093RFB 003.008\n";for(var b=new Uint8Array(13),c=0;13>c;c++)b[c]=a.charCodeAt(c);J(b.buffer);
O.setHandler(new V(1,function(d){switch(d.getByte()){case 1:8>g.sessionInfo.minor?Oa():O.setHandler(new V(4,ua));break;case 2:O.setHandler(new V(16,db));break;case 113:O.setHandler(new V(24,function(q){svGlobal.logger.info("NTLM auth");var w=new Uint8Array(345);w[0]=33;q.copyToByteArray(w,1,q.getPosition(),24);q.skip(24);q=x.user;var B=25,y=q.length;if(q)for(c=0;c<y;c++){var z=q.charCodeAt(c);w[B++]=z&255;w[B++]=z>>8&255}if(178<y)g.showMessage("User name is too long: > 178"),g.close();else{B=281;
if(q=x.pwd){y=q.length;if(32<y){g.showMessage("Password is too long: > 32");g.close();return}for(c=0;c<y;c++)z=q.charCodeAt(c),w[B++]=z&255,w[B++]=z>>8&255}Q.send(w.buffer);O.setHandler(new V(4,ua))}}));break;case 19:break;case 30:svGlobal.logger.info("Apple auth");d=new Uint8Array(321);d[0]=34;var e=x.user,k=0,h=1,r=e.length;if(e){if(178<r){g.showMessage("User name is too long: > 178");g.close();break}for(c=0;c<r;c++)k=e.charCodeAt(c),d[h++]=k&255,d[h++]=k>>8&255}h=257;if(e=x.pwd){r=e.length;if(32<
r){g.showMessage("Password is too long: > 32");g.close();break}for(c=0;c<r;c++)k=e.charCodeAt(c),d[h++]=k&255,d[h++]=k>>8&255}Q.send(d.buffer);O.setHandler(new V(4,ua));break;default:g.showMessage(__svi18n.vnc.securityError),g.close()}}))}else{a="\u0093RFB 003.003\n";b=new Uint8Array(13);for(c=0;13>c;c++)b[c]=a.charCodeAt(c);J(b.buffer);O.setHandler(new V(4,function(d){d=d.getBE32();var e=0,k=0;svGlobal.logger.info("sec type:"+d);switch(d){case 1:Oa();break;case 2:O.setHandler(new V(12,db));break;
case -6:O.setHandler(new V(24,function(h){svGlobal.logger.info("NTLM auth");var r=new Uint8Array(345);r[0]=33;h.copyToByteArray(r,1,h.getPosition(),24);h.skip(24);h=x.user;var q=25;if(h)for(e=0,k=h.length;e<k;e++){var w=h.charCodeAt(e);r[q++]=w&255;r[q++]=w>>8&255}q=281;if(h=x.pwd)for(e=0,k=h.length;e<k;e++)w=h.charCodeAt(e),r[q++]=w&255,r[q++]=w>>8&255;J(r.buffer);O.setHandler(new V(4,ua))}));break;default:g.showMessage(__svi18n.vnc.securityError),g.close()}}))}});O.setHandler(Da);this.refreshOutput=
function(a,b,c,d){R.useVMWAck?J(R.encAck(Date.now())):(a=a||0,b=b||0,Qa(a,b,c?c-a+1:na,d?d-b+1:oa,!1))};var Na=new V(1,function(a){var b=a.getByte();switch(b){case 0:R.updateReqId=a.getByte();b=R.useVMWAck?Date.now():0;for(var c=a.getBE16(),d=0;d<c;d++){var e=a.getBE16();var k=a.getBE16();var h=a.getBE16();var r=a.getBE16();var q=a.getBE32()>>>0;switch(q){case 4294967073:sa(h,r);break;case 4294966988:q=a;var w=q.getByte();q.skip(3);for(var B=0;B<w;B++)0==B?(wa=q.getBE32(),q.skip(8),xa=q.getBE32()):
q.skip(16);if(1==e&&0!=k){switch(k){case 1:q="Resize is administratively prohibited";break;case 2:q="Out of resources";break;case 3:q="Invalid screen layout";break;default:q="Unknown reason"}Za("C_2","Resize request has been rejected by the server:"+q);Sa=!1}else sa(h,r),Sa=!0;break;case 240:case 4294967056:0!=h*r&&a.skip(((h+7)/8|0)*r*2+6);break;case 4294967057:if(0!=h*r)if(Ia)a.skip(h*r*S+((h+7)/8|0)*r);else{var y;var z=a;q=e;e=(h+7)/8|0;var H=e*r;w=h*r;B=new Uint32Array(w);var F=z.getBytes(w*S),
f=z.getBytes(H),m=0,l=0;for(H=0;H<r;H++){for(y=0;y<h/8;y++){var n=f[H*e+y];for(z=7;0<=z;z--)0!=(n>>z&1)?1!=S&&(m=4278190080|(F[4*l+2]&255)<<16|(F[4*l+1]&255)<<8|F[4*l]&255):m=0,B[l++]=m}for(z=7;z>=8-h%8;z--)m=0!=(f[H*e+y]>>z&1)?1==S?0:4278190080|(F[4*l+2]&255)<<16|(F[4*l+1]&255)<<8|F[4*l]&255:0,B[l++]=m}q=new xb(0,B,q,k,h,r,4,4*w,w/8|0);K.setCursor(q)}break;case 4294967064:break;case 0:0<h*r&&fb(a,e,k,h,r);break;case 1:q=a.getBE16();w=a.getBE16();ca.inUse?ba.putImageData(ba.getImageData(q,w,h,r),
e,k):(N.moveArea(q,w,h,r,e-q,k-w),N.postPaint(e,k,h,r));break;case 5:ab.decode(a,e,k,h,r);break;case 7:ca.decode(a,e,k,h,r,!1);break;case 16:ma.decode(a,e,k,h,r,!1);break;case 4294967035:q=a.getByte();k=0!=(q&4);h=0!=(q&2);r=0!=(q&1);la.remoteLockFlags=q;la.checkLockFlags=!0;if(g.onLockKeyState)g.onLockKeyState({capsLock:k,numLock:h,scrollLock:r});svGlobal.logger.info("LED state, capsLock:"+k+" numLock:"+h+" scrollLock:"+r);break;case 4294967036:ca.decode(a,e,k,h,r,!1);break;case 4294967038:X=new Uint8Array(13);
X[0]=147;X[1]=255;X[2]=0;X[3]=0;hb=!0;K.setUnicode(!1);if(g.oncapability)g.oncapability(g.CAP_QEMU_KEY);svGlobal.logger.warn("QEMU Ext Key enabled");break;default:svGlobal.logger.warn("Encoding "+q+" is not supported")}}R.useVMWAck?J(R.encAck(Date.now()-b)):Qa(0,0,na,oa,!0);break;case 1:svGlobal.logger.warn("xxx color map");break;case 2:break;case 3:a.skip(3);b=a.getBE32();0<b&&(a=a.getBytes(b),b=String.fromCharCode.apply(null,a),g.onservercopy&&g.onservercopy(b)||wb(b)||K.copyToClip("text/plain;"+
b));break;case 48:b=a.getString16LE(0,a.getEnd());Ga(b);a.skip(a.getEnd()-a.getPosition());break;case 127:(a=R.process(a))&&J(a.buffer);break;default:svGlobal.logger.warn("XX PDU:"+b)}});2!=g.mode&&1!=g.mode||O.setHandler(Na);var ca=new eb,ma=new Ka,ab=new function(){var a=0,b=0;this.decode=function(c,d,e,k,h){var r=d+k,q=e+h;b=a=0;for(var w=e;w<q;w+=16)for(var B=Math.min(16,q-w),y=d;y<r;y+=16){var z=c,H=y,F=w,f=Math.min(16,r-y),m=B,l=z.getByte();if(0!=(l&1))fb(z,H,F,f,m,!1);else if(0!=(l&2)&&(1==
S?a=fa[z.getByte()]:(a=z.getByte()|z.getByte()<<8|z.getByte()<<16|4278190080,z.skip(1))),N.fillRect(H,F,f,m,a),0!=(l&4)&&(1==S?b=fa[z.getByte()]:(b=z.getByte()|z.getByte()<<8|z.getByte()<<16|4278190080,z.skip(1))),0!=(l&8)){f=z.getByte();var n;if(0!=(l&16))if(1==S)for(n=0;n<f;n++){b=fa[z.getByte()];var t=z.getByte();l=t>>4;m=t&15;t=z.getByte();var v=1+(t>>4);t=1+(t&15);N.fillRect(H+l,F+m,v,t,b)}else for(n=0;n<f;n++)b=z.getByte()|z.getByte()<<8|z.getByte()<<16|4278190080,z.skip(1),t=z.getByte(),l=
t>>4,m=t&15,t=z.getByte(),v=1+(t>>4),t=1+(t&15),N.fillRect(H+l,F+m,v,t,b);else for(n=0;n<f;n++)t=z.getByte(),l=t>>4,m=t&15,t=z.getByte(),v=1+(t>>4),t=1+(t&15),N.fillRect(H+l,F+m,v,t,b)}}N.postPaint(d,e,k,h)}};this.resetStatus=Ja;this.addSurface=function(a){K=a;Ca&&a.setPlayerMode();N.setContext(K.context);ba=N.getContext();a.setSize(na,oa);a.setController(la);a.setFastCopy(G(x.fastCopy));a.setTouchpad(G(x.touchpad));a.setClipboard(G(x.mapClipboard));var b=void 0!=x.ctrlToWin?G(x.ctrlToWin):void 0!=
L.ctrlToWin?L.ctrlToWin:!0;a.run(99997,b);K.setImageCursor(!1);Xa(K);a.onclipdata=yb};var W=new Uint8Array(7);W[0]=147;W[1]=5;var gb=!1,T=new Uint8Array(13);T[0]=147;T[1]=5;T[7]=5;T[8]=0;this.mouseDown=function(a,b,c){Ra(!0,c,a,b)};this.mouseMove=function(a,b){Ra(gb,0,a,b)};this.mouseUp=function(a,b,c){Ra(!1,c,a,b)};this.writeKeyCode=function(a,b){g.writeRawInput("8B"+(a?0:49152)+"\t"+b)};this.writeScancode=function(a,b){U&&("number"==typeof a?(g.writeRawInput("840\t"+a),g.writeRawInput("8449152\t"+
a)):g.writeRawInput("84"+(a?0:49152)+"\t"+b))};this.writeText=function(a){g.writeRawInput("86"+a)};var Ma={57:32,201:65365,209:65366,207:65367,199:65360,203:65361,200:65362,205:65363,208:65364,183:65377,84:65377,197:65299,198:65299,210:65379,211:65535,184:65514,219:65515,220:65516,1:65307,14:65288,15:65289,28:65293,29:65507,42:65505,54:65506,56:65513,58:65509,59:65470,60:65471,61:65472,62:65473,63:65474,64:65475,65:65476,66:65477,67:65478,68:65479,87:65480,88:65481,55:65450,69:65407,70:65300,71:65429,
72:65431,73:65434,74:65453,75:65430,76:65437,77:65432,78:65451,79:65436,80:65433,81:65435,82:65438,83:65439,156:65421,157:65508,181:65455,toKeySym:function(a){a=Ma[a];if(la.localLockFlags&2)switch(a){case 65429:a=55;break;case 65431:a=56;break;case 65434:a=57;break;case 65430:a=52;break;case 65437:a=53;break;case 65432:a=54;break;case 65436:a=49;break;case 65433:a=50;break;case 65435:a=51;break;case 65438:a=48;break;case 65439:a=46}return a||0}},bb={260:417,728:418,321:419,317:421,346:422,352:425,
350:426,356:427,377:428,381:430,379:431,261:433,731:434,322:435,318:437,347:438,711:439,353:441,351:442,357:443,378:444,733:445,382:446,380:447,340:448,258:451,313:453,262:454,268:456,280:458,282:460,270:463,272:464,323:465,327:466,336:469,344:472,366:473,368:475,354:478,341:480,259:483,314:485,263:486,269:488,281:490,283:492,271:495,273:496,324:497,328:498,337:501,345:504,367:505,369:507,355:510,729:511,294:673,292:678,304:681,286:683,308:684,295:689,293:694,305:697,287:699,309:700,266:709,264:710,
288:725,284:728,364:733,348:734,267:741,265:742,289:757,285:760,365:765,349:766,312:930,342:931,296:933,315:934,274:938,290:939,358:940,343:947,297:949,316:950,275:954,291:955,359:956,330:957,331:959,256:960,302:967,278:972,298:975,325:977,332:978,310:979,370:985,360:989,362:990,257:992,303:999,279:1004,299:1007,326:1009,333:1010,311:1011,371:1017,361:1021,363:1022,8254:1150,12290:1185,12300:1186,12301:1187,12289:1188,12539:1189,12530:1190,12449:1191,12451:1192,12453:1193,12455:1194,12457:1195,12515:1196,
12517:1197,12519:1198,12483:1199,12540:1200,12450:1201,12452:1202,12454:1203,12456:1204,12458:1205,12459:1206,12461:1207,12463:1208,12465:1209,12467:1210,12469:1211,12471:1212,12473:1213,12475:1214,12477:1215,12479:1216,12481:1217,12484:1218,12486:1219,12488:1220,12490:1221,12491:1222,12492:1223,12493:1224,12494:1225,12495:1226,12498:1227,12501:1228,12504:1229,12507:1230,12510:1231,12511:1232,12512:1233,12513:1234,12514:1235,12516:1236,12518:1237,12520:1238,12521:1239,12522:1240,12523:1241,12524:1242,
12525:1243,12527:1244,12531:1245,12443:1246,12444:1247,1548:1452,1563:1467,1567:1471,1569:1473,1570:1474,1571:1475,1572:1476,1573:1477,1574:1478,1575:1479,1576:1480,1577:1481,1578:1482,1579:1483,1580:1484,1581:1485,1582:1486,1583:1487,1584:1488,1585:1489,1586:1490,1587:1491,1588:1492,1589:1493,1590:1494,1591:1495,1592:1496,1593:1497,1594:1498,1600:1504,1601:1505,1602:1506,1603:1507,1604:1508,1605:1509,1606:1510,1607:1511,1608:1512,1609:1513,1610:1514,1611:1515,1612:1516,1613:1517,1614:1518,1615:1519,
1616:1520,1617:1521,1618:1522,1106:1697,1107:1698,1105:1699,1108:1700,1109:1701,1110:1702,1111:1703,1112:1704,1113:1705,1114:1706,1115:1707,1116:1708,1118:1710,1119:1711,8470:1712,1026:1713,1027:1714,1025:1715,1028:1716,1029:1717,1030:1718,1031:1719,1032:1720,1033:1721,1034:1722,1035:1723,1036:1724,1038:1726,1039:1727,1102:1728,1072:1729,1073:1730,1094:1731,1076:1732,1077:1733,1092:1734,1075:1735,1093:1736,1080:1737,1081:1738,1082:1739,1083:1740,1084:1741,1085:1742,1086:1743,1087:1744,1103:1745,1088:1746,
1089:1747,1090:1748,1091:1749,1078:1750,1074:1751,1100:1752,1099:1753,1079:1754,1096:1755,1101:1756,1097:1757,1095:1758,1098:1759,1070:1760,1040:1761,1041:1762,1062:1763,1044:1764,1045:1765,1060:1766,1043:1767,1061:1768,1048:1769,1049:1770,1050:1771,1051:1772,1052:1773,1053:1774,1054:1775,1055:1776,1071:1777,1056:1778,1057:1779,1058:1780,1059:1781,1046:1782,1042:1783,1068:1784,1067:1785,1047:1786,1064:1787,1069:1788,1065:1789,1063:1790,1066:1791,902:1953,904:1954,905:1955,906:1956,938:1957,908:1959,
910:1960,939:1961,911:1963,901:1966,8213:1967,940:1969,941:1970,942:1971,943:1972,970:1973,912:1974,972:1975,973:1976,971:1977,944:1978,974:1979,913:1985,914:1986,915:1987,916:1988,917:1989,918:1990,919:1991,920:1992,921:1993,922:1994,923:1995,924:1996,925:1997,926:1998,927:1999,928:2E3,929:2001,931:2002,932:2004,933:2005,934:2006,935:2007,936:2008,937:2009,945:2017,946:2018,947:2019,948:2020,949:2021,950:2022,951:2023,952:2024,953:2025,954:2026,955:2027,956:2028,957:2029,958:2030,959:2031,960:2032,
961:2033,963:2034,962:2035,964:2036,965:2037,966:2038,967:2039,968:2040,969:2041,9143:2209,9484:2210,9472:2211,8992:2212,8993:2213,9474:2214,9121:2215,9123:2216,9124:2217,9126:2218,9115:2219,9117:2220,9118:2221,9120:2222,9128:2223,9132:2224,8804:2236,8800:2237,8805:2238,8747:2239,8756:2240,8733:2241,8734:2242,8711:2245,8764:2248,8771:2249,8660:2253,8658:2254,8801:2255,8730:2262,8834:2266,8835:2267,8745:2268,8746:2269,8743:2270,8744:2271,8706:2287,402:2294,8592:2299,8593:2300,8594:2301,8595:2302,9670:2528,
9618:2529,9225:2530,9228:2531,9229:2532,9226:2533,9252:2536,9227:2537,9496:2538,9488:2539,9492:2541,9532:2542,9146:2543,9147:2544,9148:2546,9149:2547,9500:2548,9508:2549,9524:2550,9516:2551,8195:2721,8194:2722,8196:2723,8197:2724,8199:2725,8200:2726,8201:2727,8202:2728,8212:2729,8211:2730,8230:2734,8229:2735,8531:2736,8532:2737,8533:2738,8534:2739,8535:2740,8536:2741,8537:2742,8538:2743,8453:2744,8210:2747,9001:2748,9002:2750,8539:2755,8540:2756,8541:2757,8542:2758,8482:2761,9747:2762,9665:2764,9655:2765,
9675:2766,9647:2767,8216:2768,8217:2769,8220:2770,8221:2771,8478:2772,8242:2774,8243:2775,10013:2777,9644:2779,9664:2780,9654:2781,9679:2782,9646:2783,9702:2784,9643:2785,9645:2786,9651:2787,9661:2788,9734:2789,8226:2790,9642:2791,9650:2792,9660:2793,9756:2794,9758:2795,9827:2796,9830:2797,9829:2798,10016:2800,8224:2801,8225:2802,10003:2803,10007:2804,9839:2805,9837:2806,9794:2807,9792:2808,9742:2809,8981:2810,8471:2811,8248:2812,8218:2813,8222:2814,60:2979,62:2982,175:3008,8869:3010,8970:3012,95:3014,
8728:3018,9109:3020,8868:3022,8968:3027,8866:3036,8867:3068,8215:3295,1488:3296,1489:3297,1490:3298,1491:3299,1492:3300,1493:3301,1494:3302,1495:3303,1496:3304,1497:3305,1498:3306,1499:3307,1500:3308,1501:3309,1502:3310,1503:3311,1504:3312,1505:3313,1506:3314,1507:3315,1508:3316,1509:3317,1510:3318,1511:3319,1512:3320,1513:3321,1514:3322,3585:3489,3586:3490,3587:3491,3588:3492,3589:3493,3590:3494,3591:3495,3592:3496,3593:3497,3594:3498,3595:3499,3596:3500,3597:3501,3598:3502,3599:3503,3600:3504,3601:3505,
3602:3506,3603:3507,3604:3508,3605:3509,3606:3510,3607:3511,3608:3512,3609:3513,3610:3514,3611:3515,3612:3516,3613:3517,3614:3518,3615:3519,3616:3520,3617:3521,3618:3522,3619:3523,3620:3524,3621:3525,3622:3526,3623:3527,3624:3528,3625:3529,3626:3530,3627:3531,3628:3532,3629:3533,3630:3534,3631:3535,3632:3536,3633:3537,3634:3538,3635:3539,3636:3540,3637:3541,3638:3542,3639:3543,3640:3544,3641:3545,3642:3546,3647:3551,3648:3552,3649:3553,3650:3554,3651:3555,3652:3556,3653:3557,3654:3558,3655:3559,3656:3560,
3657:3561,3658:3562,3659:3563,3660:3564,3661:3565,3664:3568,3665:3569,3666:3570,3667:3571,3668:3572,3669:3573,3670:3574,3671:3575,3672:3576,3673:3577,12593:3745,12594:3746,12595:3747,12596:3748,12597:3749,12598:3750,12599:3751,12600:3752,12601:3753,12602:3754,12603:3755,12604:3756,12605:3757,12606:3758,12607:3759,12608:3760,12609:3761,12610:3762,12611:3763,12612:3764,12613:3765,12614:3766,12615:3767,12616:3768,12617:3769,12618:3770,12619:3771,12620:3772,12621:3773,12622:3774,12623:3775,12624:3776,
12625:3777,12626:3778,12627:3779,12628:3780,12629:3781,12630:3782,12631:3783,12632:3784,12633:3785,12634:3786,12635:3787,12636:3788,12637:3789,12638:3790,12639:3791,12640:3792,12641:3793,12642:3794,12643:3795,4520:3796,4521:3797,4522:3798,4523:3799,4524:3800,4525:3801,4526:3802,4527:3803,4528:3804,4529:3805,4530:3806,4531:3807,4532:3808,4533:3809,4534:3810,4535:3811,4536:3812,4537:3813,4538:3814,4539:3815,4540:3816,4541:3817,4542:3818,4543:3819,4544:3820,4545:3821,4546:3822,12653:3823,12657:3824,
12664:3825,12671:3826,12673:3827,12676:3828,12678:3829,12685:3830,12686:3831,4587:3832,4592:3833,4601:3834,8361:3839,8364:5028,338:5052,339:5053,376:5054},ia=new Uint8Array(9);ia[0]=147;ia[1]=4;var X=null;this.writeRawInput=function(a){if(pa){var b=parseInt(a.substring(0,2),16);a=a.substring(2).split("\t");switch(b){case 128:g.mouseDown(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]));break;case 129:g.mouseUp(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]));break;case 130:g.mouseMove(parseInt(a[0]),parseInt(a[1]));
break;case 131:b=0!=parseInt(a[2]);var c=parseInt(a[0]);a=parseInt(a[1]);pa&&(T[2]=b?16:8,T[3]=c>>8&255,T[4]=c&255,T[5]=a>>8&255,T[6]=a&255,T[9]=T[3],T[10]=T[4],T[11]=T[5],T[12]=T[6],J(T.buffer));break;case 132:b=Ma.toKeySym(a[1]);0==b&&a[2]&&(b=a[2].charCodeAt(0));c=0==a[0];ha(c,b,parseInt(a[1],10));break;case 139:c=0==a[0];b=parseInt(a[1]);b=String.fromCharCode(b).toLocaleLowerCase().charCodeAt(0);ha(c,b,parseInt(a[2]));break;case 134:c=0;for(var d=a[0].length;c<d;c++){b=a[0].charCodeAt(c);if(255<
b){var e=bb[b];b=e?e:b|16777216}ha(!0,b,0);ha(!1,b,0)}}}};var cb={" ":57,space:57,pageup:201,pagedown:209,end:207,home:199,left:203,up:200,right:205,down:208,printscreen:183,insert:210,del:211,"delete":211,altgr:184,windows:219,windowsright:220,context:221,esc:1,backspace:14,tab:15,enter:28,meta:29,command:29,ctrl:29,shift:42,alt:56,capslock:58,f1:59,f2:60,f3:61,f4:62,f5:63,f6:64,f7:65,f8:66,f9:67,f10:68,f11:87,f12:88,numlock:69,scrolllock:70,add:78}};
